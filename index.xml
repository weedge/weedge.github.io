<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>æ—¶é—´é£˜è¿‡</title>
    <link>https://weedge.github.io/</link>
    <description>Recent content on æ—¶é—´é£˜è¿‡</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 21 Nov 2021 10:26:23 +0800</lastBuildDate>
    
        <atom:link href="https://weedge.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>About</title>
      <link>https://weedge.github.io/about/</link>
      <pubDate>Sun, 20 Jan 2013 21:38:52 +0800</pubDate>
      
      <guid>https://weedge.github.io/about/</guid>
      
        <description>&lt;p&gt;ç®€å•çš„æœ¨å¤´äººï¼Œç®€å•ï¼Œå‘†æœ¨ï¼Œå–œæ¬¢è‡ªè¨€è‡ªè¯­ï¼Œæ„šäººè‡ªæ‰°å‹ã€‚æ—¶é—´é£é€ï¼Œä»…ä»…è®°å½•ï¼Œç•™ä½æŸäººæŸäº‹ï¼ŒæŸäº›å¥½ç©çš„æŠ€æœ¯ï¼ŒKISS and just do IT.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>WAL</title>
      <link>https://weedge.github.io/post/wal/</link>
      <pubDate>Sun, 21 Nov 2021 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/wal/</guid>
      
        <description>&lt;h3 id=&#34;åºè¨€&#34;&gt;åºè¨€&lt;/h3&gt;
&lt;p&gt;â€‹	æ•°æ®è½åœ°ä¹‹å‰ï¼Œå¦‚æœå‡ºç°æŒä¹…åŒ–å­˜å‚¨å¼•æ“å®ä¾‹é‡å¯ï¼Œæˆ–è€…æœåŠ¡å½“æœºé‡å¯ï¼Œå¦‚ä½•è¿›è¡Œæ•…éšœæ¢å¤ï¼ˆCrash Recoveryï¼‰å‘¢ï¼Ÿæ•°æ®å†™æ“ä½œå¢åˆ æ”¹ï¼Œè¿™äº›æ“ä½œçŠ¶æ€æ•°æ®ï¼Œæ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸­åŸå­æ€§å’ŒæŒä¹…æ€§çš„å‘¢ï¼Ÿ è¿™äº›é—®é¢˜æ•°æ®å¤§æ‹¿ä»¬æå‡ºäº†&lt;a href=&#34;https://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics&#34;&gt;Algorithms for Recovery and Isolation Exploiting Semantics&lt;/a&gt; ï¼ŒåŸºäºè¯­ä¹‰çš„æ¢å¤ä¸éš”ç¦»ç®—æ³•,ç°ä»£æ•°æ®åº“çš„åŸºç¡€ç†è®ºï¼›å½“å‰ä¸»æµå…³ç³»å‹æ•°æ®åœ¨äº‹åŠ¡å®ç°ä¸Šéƒ½å—åˆ°è¯¥ç†è®ºçš„å½±å“ï¼Œå…¶ä¸­æœ‰ä¸¤ç§æ•…éšœæ¢å¤çš„æ–¹æ³•ï¼š é¢„å†™æ—¥å¿—(write-ahead logging (WAL) ) å’Œshadow-page techniqueï¼›shadow-page æ–¹æ³•ç®€å•ä»‹ç»å°±æ˜¯æ¯æ¬¡äº‹åŠ¡æ“ä½œï¼Œä»¥pageä¸ºå•ä½ï¼Œå†™æ—¶å¤åˆ¶çš„æ–¹å¼ï¼Œåˆ†ä¸ºCurrentå’ŒShadowï¼Œç±»ä¼¼ä¸»å¤‡çš„å½¢å¼ï¼Œå¦‚æœcommitæˆåŠŸï¼ŒCurrentä¸­çš„pageåˆå¹¶åˆ° Shadowä¸­; å¦‚æœabortä¸æˆåŠŸä¸¢å¼ƒCurrentçš„page; å¦‚æœCrashäº†ï¼Œä»Shadowä¸­çš„pageæ¢å¤ï¼Œå¯¹æ‰€æœ‰æœªæäº¤äº‹åŠ¡çš„å›æ»šæ“ä½œï¼› ç”±äºshadow-pageæŠ€æœ¯çš„å®ç°ä»¥pageä¸ºå•ä½ï¼Œpageå†…æ— æ³•å¹¶å‘æ“ä½œï¼Œcommit/å›æ»šæ—¶ä¼šæœ‰å¤§é‡åƒåœ¾å›æ”¶æ“ä½œï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»WALï¼Œä»¥åŠå¯¹åº”æŒä¹…åŒ–å­˜å‚¨å¼•æ“çš„å®ç°æœºåˆ¶ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;wal&#34;&gt;WAL&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é¢„å†™æ—¥å¿—&lt;/strong&gt;( &lt;strong&gt;WAL&lt;/strong&gt; ) æ˜¯ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œç”¨äºåœ¨&lt;a href=&#34;https://en.wikipedia.org/wiki/Database_system&#34;&gt;æ•°æ®åº“ç³»ç»Ÿä¸­&lt;/a&gt;æä¾›&lt;a href=&#34;https://en.wikipedia.org/wiki/Atomicity_(database_systems)&#34;&gt;åŸå­æ€§&lt;/a&gt;å’Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/Durability_(database_systems)&#34;&gt;æŒä¹…æ€§&lt;/a&gt;ï¼ˆä¸¤ä¸ª&lt;a href=&#34;https://en.wikipedia.org/wiki/ACID&#34;&gt;ACID&lt;/a&gt;å±æ€§ï¼‰ã€‚åœ¨å°†æ›´æ”¹å†™å…¥æ•°æ®åº“ä¹‹å‰ï¼Œæ›´æ”¹é¦–å…ˆè®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œæ—¥å¿—å¿…é¡»å†™å…¥&lt;a href=&#34;https://en.wikipedia.org/wiki/Stable_storage&#34;&gt;ç¨³å®šå­˜å‚¨&lt;/a&gt;ï¼ˆä¿è¯ä»»ä½•ç»™å®šå†™å…¥æ“ä½œçš„åŸå­æ€§ï¼Œå¹¶å…è®¸ç¼–å†™å¯¹æŸäº›ç¡¬ä»¶å’Œç”µæºæ•…éšœå…·æœ‰&lt;a href=&#34;https://en.wikipedia.org/wiki/Robustness_(computer_science)&#34;&gt;é²æ£’æ€§çš„&lt;/a&gt;è½¯ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·åšçš„ç›®çš„å¯ä»¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå½“è¿è¡Œå®ƒçš„æœºå™¨æ–­ç”µæ—¶ï¼Œå®ƒæ­£åœ¨æ‰§è¡ŒæŸäº›æ“ä½œã€‚é‡æ–°å¯åŠ¨æ—¶ï¼Œè¯¥ç¨‹åºå¯èƒ½éœ€è¦çŸ¥é“å®ƒæ­£åœ¨æ‰§è¡Œçš„æ“ä½œæ˜¯æˆåŠŸã€éƒ¨åˆ†æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚å¦‚æœä½¿ç”¨é¢„å†™æ—¥å¿—ï¼Œç¨‹åºå¯ä»¥æ£€æŸ¥æ­¤æ—¥å¿—å¹¶å°†æ„å¤–æ–­ç”µæ—¶åº”è¯¥æ‰§è¡Œçš„æ“ä½œä¸å®é™…æ‰§è¡Œçš„æ“ä½œè¿›è¡Œæ¯”è¾ƒã€‚åœ¨æ­¤æ¯”è¾ƒçš„åŸºç¡€ä¸Šï¼Œç¨‹åºå¯ä»¥å†³å®šæ’¤æ¶ˆå·²å¼€å§‹çš„å†…å®¹ã€å®Œæˆå·²å¼€å§‹çš„å†…å®¹æˆ–ä¿æŒåŸæ ·ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ WAL çš„ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰ä¿®æ”¹åœ¨åº”ç”¨ä¹‹å‰éƒ½ä¼šå†™å…¥&lt;a href=&#34;https://en.wikipedia.org/wiki/Database_log&#34;&gt;æ—¥å¿—&lt;/a&gt;ã€‚é€šå¸¸redoå’Œundoä¿¡æ¯éƒ½å­˜å‚¨åœ¨æ—¥å¿—ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šå†™ä¸ä¸€å®šæ˜¯é¡ºåºå†™ï¼Œä¸€èˆ¬&lt;a href=&#34;https://en.wikipedia.org/wiki/Computer_data_storage&#34;&gt;è®¡ç®—æœºå­˜å‚¨&lt;/a&gt; éæ˜“å¤±æ€§çš„ç¡¬ä»¶ç»“æ„å¯¹é¡ºåºå†™çš„æ€§èƒ½é«˜äºéšæœºå†™çš„æ€§èƒ½ï¼Œæ¯”å¦‚å¸¸ç”¨çš„ç£ç›˜HDD/SSD; ä½†æ˜¯æœ€è¿‘åŸºäºNVMæŠ€æœ¯(ç»“åˆç£ç›˜å’Œå†…å­˜çš„ç‰¹æ€§)çš„å­˜å‚¨ç¡¬ä»¶PC-RAM(Phase Change Random Access Memory), STT-RAM( Spin Transfer Torque Random Access Memory),  R-RAM(Resistive Random Access Memory)ï¼Œç»“åˆå†…å­˜ä¸­éšæœºè®¿é—®ï¼Œç£ç›˜éæ˜“å¤±æ€§ç‰¹æ€§ï¼Œéšæœºå†™å’Œé¡ºåºå†™æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œ&lt;a href=&#34;http://repository.bilkent.edu.tr/bitstream/handle/11693/37609/Implications%20of%20non-volatile%20memory%20as%20primary%20storage%20for%20database%20management%20systems.pdf&#34;&gt;Implications of Non-Volatile Memory as Primary Storage for Database Management Systems&lt;/a&gt; è¿™ç¯‡è®ºæ–‡ä¸­æåˆ°Pgå¦‚æœä¸éƒ¨ç½²å†…éƒ¨çš„buffer cacheï¼Œæ‰€æœ‰å†™ç›´æ¥å†™åˆ°NVMå¯¹åº”çš„å­˜å‚¨ç¡¬ä»¶ä¸­ï¼Œå¯ä»¥å»æ‰redoæ—¥å¿—ï¼Œä½†æ˜¯undoæ—¥å¿—ä»»ç„¶éœ€è¦,åœ¨ç³»ç»Ÿé”™è¯¯æ—¶å¤åŸ; ä¸€èˆ¬å­¦æœ¯æ–¹æ¡ˆè¦é¢†å…ˆå®é™…å·¥ç¨‹è®¸å¤šï¼ŒçœŸæ­£è½åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿˜æ˜¯ç”¨èººè¿‡å‘çš„æˆç†Ÿæ–¹æ¡ˆ ï¼ˆé¡ºä¾¿æƒ³åˆ°ç°åœ¨ä¸€äº›k/vå­˜å‚¨å¼•æ“è€ƒè™‘ä¸Šäº‘ï¼Œæ”¯æŒäº‘å‚å•†çš„äº‘ç›˜ï¼Œå¯ä»¥è®¤ä¸ºæ— é™å®¹é‡ï¼‰ã€‚ç¡¬ä»¶ç»“æ„å†³å®šä¸Šå±‚è½¯ä»¶å­˜å‚¨å¼•æ“çš„è®¾è®¡çš„ä¼˜åŒ–ï¼Œä»¥ä¸‹éƒ½æ˜¯ä»¥å¸¸ç”¨çš„ç£ç›˜HDD/SSDçš„ç¡¬ä»¶ç»“æ„æ¥ä»‹ç»å­˜å‚¨å¼•æ“å®ç°WALæŠ€æœ¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;mysql-innodbå­˜å‚¨å¼•æ“&#34;&gt;mysql Innodbå­˜å‚¨å¼•æ“&lt;/h3&gt;
&lt;p&gt;mysql Innodbå­˜å‚¨å¼•æ“æ˜¯é€šè¿‡ redoã€undo æ—¥å¿—å®ç° WAL,ä¸»è¦ç”¨äºcrash æ¢å¤å’Œå›æ»šï¼Œæ»¡è¶³æœ¬åœ°äº‹åŠ¡ä¸­çš„æŒä¹…æ€§å’ŒåŸå­æ€§ï¼Œæ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼›å½“ç„¶innodbå¼•æ“ä¸ºäº†æé«˜å¹¶å‘è¯»æ€§èƒ½ï¼Œundo logä¸­åŠ å…¥äº†MVCC (å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)ç›¸å…³ä¿¡æ¯ï¼› å¦å¤–ï¼Œmysql serverå±‚æ‰§è¡Œå™¨ä¼šå†™bin logï¼Œä¸»è¦æ˜¯ç”¨æ¥æ¢å¤æŸä¸ªæ—¶é—´çš„ç‚¹æ•°æ®ä»¥åŠä¸»ä»å¤åˆ¶æ•°æ®ä½¿ç”¨ï¼Œbin logæ–‡ä»¶å’Œå­˜å‚¨å¼•æ“æ— å…³ï¼›åˆ†åˆ«ç®€è¦ä»‹ç»redo, undo, bin log æ–‡ä»¶åœ¨mysqlä¸­çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;redolog&#34;&gt;redolog&lt;/h4&gt;
&lt;h5 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦redo-log&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦redo logï¼Ÿ&lt;/h5&gt;
&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œäº‹åŠ¡çš„å››å¤§ç‰¹æ€§é‡Œé¢æœ‰ä¸€ä¸ªæ˜¯ &lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt; ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯&lt;strong&gt;åªè¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“åšçš„ä¿®æ”¹å°±è¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥äº†ï¼Œä¸å¯èƒ½å› ä¸ºä»»ä½•åŸå› å†å›åˆ°åŸæ¥çš„çŠ¶æ€&lt;/strong&gt; ã€‚é‚£ä¹ˆmysqlæ˜¯å¦‚ä½•ä¿è¯ä¸€è‡´æ€§çš„å‘¢ï¼Ÿæœ€ç®€å•çš„åšæ³•æ˜¯åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå°†è¯¥äº‹åŠ¡æ¶‰åŠä¿®æ”¹çš„æ•°æ®é¡µå…¨éƒ¨åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯è¿™ä¹ˆåšä¼šæœ‰ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å› ä¸º Innodbæ˜¯ä»¥é¡µä¸ºå•ä½è¿›è¡Œç£ç›˜äº¤äº’çš„ï¼Œè€Œä¸€ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½åªä¿®æ”¹ä¸€ä¸ªæ•°æ®é¡µé‡Œé¢çš„å‡ ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªæ—¶å€™å°†å®Œæ•´çš„æ•°æ®é¡µåˆ·åˆ°ç£ç›˜çš„è¯ï¼Œå¤ªæµªè´¹èµ„æºäº†ï¼&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªäº‹åŠ¡å¯èƒ½æ¶‰åŠä¿®æ”¹å¤šä¸ªæ•°æ®é¡µï¼Œå¹¶ä¸”è¿™äº›æ•°æ®é¡µåœ¨ç‰©ç†ä¸Šå¹¶ä¸è¿ç»­ï¼Œä½¿ç”¨éšæœºIOå†™å…¥æ€§èƒ½å¤ªå·®ï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ mysqlè®¾è®¡äº†redolog ï¼Œ &lt;strong&gt;å…·ä½“æ¥è¯´å°±æ˜¯åªè®°å½•äº‹åŠ¡å¯¹æ•°æ®é¡µåšäº†å“ªäº›ä¿®æ”¹&lt;/strong&gt;ï¼Œè¿™æ ·å°±èƒ½å®Œç¾åœ°è§£å†³æ€§èƒ½é—®é¢˜äº†(ç›¸å¯¹è€Œè¨€æ–‡ä»¶æ›´å°å¹¶ä¸”æ˜¯é¡ºåºIO)ã€‚&lt;/p&gt;
&lt;h5 id=&#34;redo-logåŸºæœ¬æ¦‚å¿µ&#34;&gt;redo logåŸºæœ¬æ¦‚å¿µ&lt;/h5&gt;
&lt;p&gt;redo logåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²( redo log buffer )ï¼Œå¦ä¸€ä¸ªæ˜¯ç£ç›˜ä¸Šçš„æ—¥å¿—æ–‡ä»¶(  redo log file )ã€‚ mysql æ¯æ‰§è¡Œä¸€æ¡ DML ä¿®æ”¹å†™è¯­å¥ï¼Œæ“ä½œçš„æ•°æ®åœ¨å†…å­˜ä¸­(å¦‚æœæ²¡æœ‰ä¼šloadåˆ°å†…å­˜ä¸­)ï¼Œé¦–å…ˆä¼šè®°ä¿®æ”¹æ“ä½œçš„åæ“ä½œé€»è¾‘æ•°æ®è®°å½•å†™å…¥undo log bufferä¸­ï¼Œç„¶åä¼šå°†ä¿®æ”¹å“ªä¸ªç‰©ç†é¡µé¢åšäº†ä»€ä¹ˆæ“ä½œè®°å½•å†™å…¥ redo log buffer ï¼Œåç»­æŸä¸ªæ—¶é—´ç‚¹å†ä¸€æ¬¡æ€§å°†å¤šä¸ªæ“ä½œè®°å½•å†™åˆ° redo log file å’Œ undo log fileã€‚è¿™ç§ &lt;strong&gt;å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜&lt;/strong&gt; çš„æŠ€æœ¯å°±æ˜¯ MySQLä¸­çš„ WALã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ç©ºé—´( user space )ä¸‹çš„ç¼“å†²åŒºæ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ— æ³•ç›´æ¥å†™å…¥ç£ç›˜çš„ï¼Œä¸­é—´å¿…é¡»ç»è¿‡æ“ä½œç³»ç»Ÿå†…æ ¸ç©ºé—´(kernel space )ç¼“å†²åŒº( OS Buffer )ã€‚å› æ­¤ï¼Œ redo/undo log buffer å†™å…¥ redo/undo log file; å®é™…ä¸Šæ˜¯å…ˆå†™å…¥ OS Buffer ï¼Œç„¶åå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨ fsync() å°†å…¶åˆ·åˆ° redo/undo log file ä¸­ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-static.segmentfault.com/755/731/755731335-aec527828a1323b6_fix732&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;mysql æ”¯æŒä¸‰ç§å°† redo/undo log buffer å†™å…¥ redo/undo log file çš„æ—¶æœºï¼Œå¯ä»¥é€šè¿‡ innodb_flush_log_at_trx_commit  å‚æ•°é…ç½®ï¼Œå„å‚æ•°å€¼å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°å€¼&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0ï¼ˆå»¶è¿Ÿå†™ï¼‰&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡æäº¤æ—¶ä¸ä¼šå°† redo/undo log buffer ä¸­æ—¥å¿—å†™å…¥åˆ° os buffer ï¼Œè€Œæ˜¯æ¯ç§’å†™å…¥ os buffer å¹¶è°ƒç”¨ fsync() å†™å…¥åˆ° redo/undo log file ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´è®¾ç½®ä¸º0æ—¶æ˜¯(å¤§çº¦)æ¯ç§’åˆ·æ–°å†™å…¥åˆ°ç£ç›˜ä¸­çš„ï¼Œå½“ç³»ç»Ÿå´©æºƒï¼Œä¼šä¸¢å¤±1ç§’é’Ÿçš„æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1ï¼ˆå®æ—¶å†™ï¼Œå®æ—¶åˆ·ï¼‰&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡æ¯æ¬¡æäº¤éƒ½ä¼šå°† redo/undo log buffer ä¸­çš„æ—¥å¿—å†™å…¥ os buffer å¹¶è°ƒç”¨ fsync() åˆ·åˆ° redo/undo log file ä¸­ã€‚è¿™ç§æ–¹å¼å³ä½¿ç³»ç»Ÿå´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±ä»»ä½•æ•°æ®ï¼Œä½†æ˜¯å› ä¸ºæ¯æ¬¡æäº¤éƒ½å†™å…¥ç£ç›˜ï¼ŒIOçš„æ€§èƒ½è¾ƒå·®ã€‚ä¸€èˆ¬å¼€å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2ï¼ˆå®æ—¶å†™ï¼Œå»¶è¿Ÿåˆ·ï¼‰&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡æäº¤éƒ½ä»…å†™å…¥åˆ° os buffer ï¼Œç„¶åæ˜¯æ¯ç§’è°ƒç”¨ fsync() å°† os buffer ä¸­çš„æ—¥å¿—å†™å…¥åˆ° redo/undo log file ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src=&#34;https://image-static.segmentfault.com/706/634/706634199-04894beff4e7b54f_fix732&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h5 id=&#34;redo-logè®°å½•å½¢å¼&#34;&gt;redo logè®°å½•å½¢å¼&lt;/h5&gt;
&lt;p&gt;å‰é¢è¯´è¿‡ï¼Œ redo log å®é™…ä¸Šè®°å½•æ•°æ®é¡µçš„å˜æ›´ï¼Œè€Œè¿™ç§å˜æ›´è®°å½•æ˜¯æ²¡å¿…è¦å…¨éƒ¨ä¿å­˜ï¼Œå› æ­¤ redo logå®ç°ä¸Šé‡‡ç”¨äº†å¤§å°å›ºå®šï¼Œå¾ªç¯å†™å…¥çš„æ–¹å¼ï¼Œå½“å†™åˆ°ç»“å°¾æ—¶ï¼Œä¼šå›åˆ°å¼€å¤´å¾ªç¯å†™æ—¥å¿—ã€‚é€šè¿‡&lt;code&gt;show variables like &#39;innodb_log%&#39;; &lt;/code&gt; æŸ¥çœ‹å‚æ•°ï¼›è®°å½•æ–‡ä»¶å½¢å¼å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-static.segmentfault.com/390/444/3904443652-cc3225d69e1d0476_fix732&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨innodbå­˜å‚¨å¼•æ“ä¸­ï¼Œæ—¢æœ‰ redo log éœ€è¦åˆ·ç›˜ï¼Œè¿˜æœ‰ æ•°æ®é¡µ ä¹Ÿéœ€è¦åˆ·ç›˜ï¼Œ redo log å­˜åœ¨çš„æ„ä¹‰ä¸»è¦å°±æ˜¯é™ä½å¯¹æ•°æ®é¡µåˆ·ç›˜çš„è¦æ±‚ ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œ write pos è¡¨ç¤º redo log å½“å‰è®°å½•çš„ LSN (é€»è¾‘åºåˆ—å·)ä½ç½®ï¼Œ check point è¡¨ç¤ºæ•°æ®é¡µæ›´æ”¹è®°å½•åˆ·ç›˜åå¯¹åº” redo log æ‰€å¤„çš„ LSN (é€»è¾‘åºåˆ—å·)ä½ç½®ã€‚ write pos åˆ° check point ä¹‹é—´çš„éƒ¨åˆ†æ˜¯ redo log ç©ºç€çš„éƒ¨åˆ†ï¼Œç”¨äºè®°å½•æ–°çš„è®°å½•ï¼› check point åˆ° write pos ä¹‹é—´æ˜¯ redo log å¾…è½ç›˜çš„æ•°æ®é¡µæ›´æ”¹è®°å½•ã€‚å½“ write pos è¿½ä¸Š check point æ—¶ï¼Œä¼šå…ˆæ¨åŠ¨ check point å‘å‰ç§»åŠ¨ï¼Œç©ºå‡ºä½ç½®å†è®°å½•æ–°çš„æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;å¯åŠ¨ innodb çš„æ—¶å€™ï¼Œä¸ç®¡ä¸Šæ¬¡æ˜¯æ­£å¸¸å…³é—­è¿˜æ˜¯å¼‚å¸¸å…³é—­ï¼Œæ€»æ˜¯ä¼šè¿›è¡Œæ¢å¤æ“ä½œã€‚å› ä¸º redo log è®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼Œå› æ­¤æ¢å¤çš„æ—¶å€™é€Ÿåº¦æ¯”é€»è¾‘æ—¥å¿—(å¦‚ binlog )è¦å¿«å¾ˆå¤šã€‚ é‡å¯ innodb æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥ç£ç›˜ä¸­æ•°æ®é¡µçš„ LSN ï¼Œå¦‚æœæ•°æ®é¡µçš„ LSN å°äºæ—¥å¿—ä¸­çš„ LSN ï¼Œåˆ™ä¼šä» checkpoint å¼€å§‹æ¢å¤ã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œåœ¨å®•æœºå‰æ­£å¤„äºcheckpoint çš„åˆ·ç›˜è¿‡ç¨‹ï¼Œä¸”æ•°æ®é¡µçš„åˆ·ç›˜è¿›åº¦è¶…è¿‡äº†æ—¥å¿—é¡µçš„åˆ·ç›˜è¿›åº¦ï¼Œæ­¤æ—¶ä¼šå‡ºç°æ•°æ®é¡µä¸­è®°å½•çš„ LSN å¤§äºæ—¥å¿—ä¸­çš„ LSNï¼Œè¿™æ—¶è¶…å‡ºæ—¥å¿—è¿›åº¦çš„éƒ¨åˆ†å°†ä¸ä¼šé‡åšï¼Œå› ä¸ºè¿™æœ¬èº«å°±è¡¨ç¤ºå·²ç»åšè¿‡çš„äº‹æƒ…ï¼Œæ— éœ€å†é‡åšã€‚&lt;/p&gt;
&lt;h4 id=&#34;undolog&#34;&gt;undolog&lt;/h4&gt;
&lt;p&gt;æ•°æ®åº“äº‹åŠ¡å››å¤§ç‰¹æ€§ä¸­æœ‰ä¸€ä¸ªæ˜¯ &lt;strong&gt;åŸå­æ€§&lt;/strong&gt; ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ &lt;strong&gt;åŸå­æ€§æ˜¯æŒ‡å¯¹æ•°æ®åº“çš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸å¯èƒ½å‡ºç°éƒ¨åˆ†æˆåŠŸçš„æƒ…å†µ&lt;/strong&gt;ã€‚å®é™…ä¸Šï¼Œ &lt;strong&gt;åŸå­æ€§&lt;/strong&gt; åº•å±‚å°±æ˜¯é€šè¿‡ undo log å®ç°çš„ã€‚ undo log ä¸»è¦è®°å½•äº†æ•°æ®çš„é€»è¾‘å˜åŒ–ï¼Œæ¯”å¦‚ä¸€æ¡  INSERT è¯­å¥ï¼Œå¯¹åº”ä¸€æ¡ DELETE çš„ undo log ï¼Œå¯¹äºæ¯ä¸ª UPDATE è¯­å¥ï¼Œå¯¹åº”ä¸€æ¡ç›¸åçš„ UPDATE çš„undo log ï¼Œè¿™æ ·åœ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°±èƒ½å›æ»šåˆ°äº‹åŠ¡ä¹‹å‰çš„æ•°æ®çŠ¶æ€ã€‚åŒæ—¶ï¼Œ undo log ä¹Ÿæ˜¯ MVCC (å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)å®ç°çš„å…³é”®ï¼›é€šè¿‡ &lt;code&gt;show variables like &#39;%undo%&#39;; &lt;/code&gt;æŸ¥çœ‹å‚æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;binlog&#34;&gt;binlog&lt;/h4&gt;
&lt;p&gt;binlog ç”¨äºè®°å½•æ•°æ®åº“æ‰§è¡Œçš„å†™å…¥æ€§æ“ä½œ(ä¸åŒ…æ‹¬æŸ¥è¯¢)ä¿¡æ¯ï¼Œä»¥äºŒè¿›åˆ¶çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸­ã€‚ binlog æ˜¯ mysqlçš„é€»è¾‘æ—¥å¿—ï¼Œå¹¶ä¸”ç”± Server å±‚è¿›è¡Œè®°å½•ï¼Œä½¿ç”¨ä»»ä½•å­˜å‚¨å¼•æ“çš„ mysql æ•°æ®åº“éƒ½ä¼šè®°å½• binlog æ—¥å¿—ï¼ˆ&lt;code&gt;log_bin&lt;/code&gt; æ‰“å¼€çš„æƒ…å†µä¸‹ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘æ—¥å¿—&lt;/strong&gt;ï¼š å¯ä»¥ç®€å•ç†è§£ä¸ºè®°å½•çš„å°±æ˜¯sqlè¯­å¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰©ç†æ—¥å¿—&lt;/strong&gt;ï¼š mysql æ•°æ®æœ€ç»ˆæ˜¯ä¿å­˜åœ¨æ•°æ®é¡µä¸­çš„ï¼Œç‰©ç†æ—¥å¿—è®°å½•çš„å°±æ˜¯æ•°æ®é¡µå˜æ›´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;binlog æ˜¯é€šè¿‡è¿½åŠ çš„æ–¹å¼è¿›è¡Œå†™å…¥çš„ï¼Œå¯ä»¥é€šè¿‡ max_binlog_size å‚æ•°è®¾ç½®æ¯ä¸ª binlogæ–‡ä»¶çš„å¤§å°ï¼Œå½“æ–‡ä»¶å¤§å°è¾¾åˆ°ç»™å®šå€¼ä¹‹åï¼Œä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶æ¥ä¿å­˜æ—¥å¿—ã€‚binlogç›¸å…³å‚æ•°é€šè¿‡&lt;code&gt;show variables like &amp;quot;%binlog%&amp;quot;;&lt;/code&gt; æŸ¥çœ‹ï¼›é€šè¿‡&lt;code&gt;show variables like &amp;quot;%log_bin%&amp;quot;;&lt;/code&gt;æŸ¥çœ‹binlogæ˜¯å¦å¼€å¯,ä»¥åŠbinlogæ—¥å¿—ç›®å½•ï¼Œ8.0ç‰ˆæœ¬é»˜è®¤æ—¶å¼€å¯ã€‚&lt;/p&gt;
&lt;h5 id=&#34;binlogä½¿ç”¨åœºæ™¯&#34;&gt;binlogä½¿ç”¨åœºæ™¯&lt;/h5&gt;
&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ binlog çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ &lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt; å’Œ &lt;strong&gt;æ•°æ®æ¢å¤&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt; ï¼šåœ¨ Master ç«¯å¼€å¯ binlog ï¼Œç„¶åå°† binlog å‘é€åˆ°å„ä¸ª Slave ç«¯ï¼Œ Slave ç«¯é‡æ”¾ binlog ä»è€Œè¾¾åˆ°ä¸»ä»æ•°æ®ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¢å¤&lt;/strong&gt; ï¼šé€šè¿‡ä½¿ç”¨ mysqlbinlog å·¥å…·æ¥æ¢å¤æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;binlogåˆ·ç›˜æ—¶æœº&#34;&gt;binlogåˆ·ç›˜æ—¶æœº&lt;/h5&gt;
&lt;p&gt;å¯¹äº InnoDB å­˜å‚¨å¼•æ“è€Œè¨€ï¼Œåªæœ‰åœ¨äº‹åŠ¡æäº¤æ—¶æ‰ä¼šè®°å½• biglog ï¼Œæ­¤æ—¶è®°å½•è¿˜åœ¨å†…å­˜ä¸­ï¼Œé‚£ä¹ˆ biglogæ˜¯ä»€ä¹ˆæ—¶å€™åˆ·åˆ°ç£ç›˜ä¸­çš„å‘¢ï¼Ÿ mysql é€šè¿‡ sync_binlog å‚æ•°æ§åˆ¶ biglog çš„åˆ·ç›˜æ—¶æœºï¼Œå–å€¼èŒƒå›´æ˜¯ 0-Nï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0ï¼šä¸å»å¼ºåˆ¶è¦æ±‚ï¼Œç”±ç³»ç»Ÿè‡ªè¡Œåˆ¤æ–­ä½•æ—¶å†™å…¥ç£ç›˜ï¼›&lt;/li&gt;
&lt;li&gt;1ï¼šæ¯æ¬¡ commit çš„æ—¶å€™éƒ½è¦å°† binlog å†™å…¥ç£ç›˜ï¼›ä¸€èˆ¬å¼€å¯&lt;/li&gt;
&lt;li&gt;Nï¼šæ¯Nä¸ªäº‹åŠ¡ï¼Œæ‰ä¼šå°† binlog å†™å…¥ç£ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ sync_binlog æœ€å®‰å…¨çš„æ˜¯è®¾ç½®æ˜¯ 1 ï¼Œè¿™ä¹Ÿæ˜¯ MySQL 5.7.7ä¹‹åç‰ˆæœ¬çš„é»˜è®¤å€¼ã€‚ä½†æ˜¯è®¾ç½®ä¸€ä¸ªå¤§ä¸€äº›çš„å€¼å¯ä»¥æå‡æ•°æ®åº“æ€§èƒ½ï¼Œå› æ­¤å®é™…æƒ…å†µä¸‹ä¹Ÿå¯ä»¥å°†å€¼é€‚å½“è°ƒå¤§ï¼Œç‰ºç‰²ä¸€å®šçš„ä¸€è‡´æ€§æ¥è·å–æ›´å¥½çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h5 id=&#34;binlogæ—¥å¿—æ ¼å¼&#34;&gt;binlogæ—¥å¿—æ ¼å¼&lt;/h5&gt;
&lt;p&gt;binlog æ—¥å¿—æœ‰ä¸‰ç§æ ¼å¼ï¼Œåˆ†åˆ«ä¸º STATMENT ã€ ROW å’Œ MIXED ã€‚åœ¨ MySQL 5.7.7 ä¹‹å‰ï¼Œé»˜è®¤çš„æ ¼å¼æ˜¯ STATEMENT ï¼Œ MySQL 5.7.7 ä¹‹åï¼Œé»˜è®¤å€¼æ˜¯ ROW ã€‚æ—¥å¿—æ ¼å¼é€šè¿‡ binlog-format æŒ‡å®š; &lt;code&gt;show variables like &amp;quot;%binlog_format%&amp;quot;;&lt;/code&gt;æŸ¥çœ‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;STATMENT ï¼š åŸºäº SQL è¯­å¥çš„å¤åˆ¶( statement-based replication, SBR )ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ä¼šè®°å½•åˆ° binlog ä¸­ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š ä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº† binlog  æ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº†  IO  , ä»è€Œæé«˜äº†æ€§èƒ½ï¼›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼Œæ¯”å¦‚æ‰§è¡Œæœ¬åœ°æ—¶é—´æ“ä½œï¼› &lt;code&gt;SELECT NOW(),SYSDATE(),SLEEP(3),NOW(),SYSDATE();&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ROW ï¼š åŸºäºè¡Œçš„å¤åˆ¶( row-based replication, RBR )ï¼Œä¸è®°å½•æ¯æ¡sqlè¯­å¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»…éœ€è®°å½•å“ªæ¡æ•°æ®è¢«ä¿®æ”¹äº† ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š ä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹çš„å­˜å‚¨è¿‡ç¨‹ã€æˆ–functionã€æˆ–triggerçš„è°ƒç”¨å’Œè§¦å‘æ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ ï¼›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š ä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯ alter table çš„æ—¶å€™ä¼šè®©æ—¥å¿—æš´æ¶¨ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MIXED ï¼š åŸºäº STATMENT å’Œ ROW ä¸¤ç§æ¨¡å¼çš„æ··åˆå¤åˆ¶( mixed-based replication, MBR )ï¼Œä¸€èˆ¬çš„å¤åˆ¶ä½¿ç”¨ STATEMENT æ¨¡å¼ä¿å­˜ binlog ï¼Œå¯¹äº STATEMENT æ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ ROW æ¨¡å¼ä¿å­˜ binlogï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;binlogæ—¥å¿—ä¸»è¦æ˜¯ç”¨æ¥ä¸»ä»åŒæ­¥å¤åˆ¶æ•°æ®ä»¥åŠæ•°æ®æ¢å¤ï¼Œæ˜¯mysql serverå±‚æ‰§è¡Œå™¨è¿›è¡Œæ“ä½œ(ä¸»)å†™å…¥å’Œ(ä»)è¯»å…¥(relaylog)ï¼›&lt;/p&gt;
&lt;p&gt;æ•°æ®å¯ä»¥æŒ‰å¤©æŒ‰å‘¨è¿›è¡Œå¤‡ä»½ï¼Œé¡ºåºå†™å…¥ï¼Œæ²¡æœ‰å¤§å°é™åˆ¶(æ–‡ä»¶å¤§å°æœ‰é™ï¼Œä½†æ˜¯æ•´ä½“æ²¡æœ‰é™åˆ¶ï¼Œå¤šä¸ªæ–‡ä»¶binlog.**å¯ä»¥é€šè¿‡binlog.indexå®šä½)ï¼›&lt;/p&gt;
&lt;h4 id=&#34;redo-logä¸binlogåŒºåˆ«&#34;&gt;redo logä¸binlogåŒºåˆ«&lt;/h4&gt;
&lt;p&gt;ä¸åŒäºredo log, è™½ç„¶ä¸¤è€…éƒ½å¯ä»¥ç”¨æ¥æ¢å¤æ•°æ®ï¼Œä½†æ˜¯åœ¨mysqlä¸­innodbå­˜å‚¨å¼•æ“çš„walæœºåˆ¶ä¸‹ç”Ÿæˆçš„redologæœ‰å¤§å°é™åˆ¶ï¼Œ redo log å®é™…ä¸Šè®°å½•æ•°æ®é¡µçš„å˜æ›´ï¼Œè€Œè¿™ç§å˜æ›´è®°å½•æ˜¯æ²¡å¿…è¦å…¨éƒ¨ä¿å­˜ï¼Œå› æ­¤ redo logå®ç°ä¸Šé‡‡ç”¨äº†å¤§å°å›ºå®šï¼Œå¾ªç¯å†™å…¥çš„æ–¹å¼ï¼Œå½“å†™åˆ°ç»“å°¾æ—¶ï¼Œä¼šå›åˆ°å¼€å¤´å¾ªç¯å†™æ—¥å¿—ï¼›è€Œbinlogä¸»è¦æ˜¯ç”¨æ¥æ•°æ®æ¢å¤ï¼Œå¦‚æœå¤‡ä»½æ—¶é—´é•¿ï¼Œç”¨æˆ·åœ¨æŸæ®µæ—¶é—´æœ‰è¯¯æ“ä½œï¼Œéœ€è¦å›æ»šæ“ä½œï¼Œå°±å¯ä»¥åŒbinlogæ¥æ¢å¤åˆ°æŸä¸ªæ—¶é—´ç‚¹çš„æ—¥å¿—çŠ¶æ€ï¼›å¯¹äºredo logæ˜¯åšä¸åˆ°çš„ï¼›è€Œä¸”binlog ä¸æ˜¯å­˜å‚¨å¼•æ“ç‰¹æœ‰çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸åŒçš„å­˜å‚¨å¼•æ“å…¬ç”¨æ¥æ¢å¤æ•°æ®åœºæ™¯ï¼›åŒºåˆ«å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;redo log&lt;/th&gt;
&lt;th&gt;binlog&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æ–‡ä»¶å¤§å°&lt;/td&gt;
&lt;td&gt;redo log çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚&lt;/td&gt;
&lt;td&gt;binlog å¯é€šè¿‡é…ç½®å‚æ•° max_binlog_size è®¾ç½®æ¯ä¸ª binlog æ–‡ä»¶çš„å¤§å°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å®ç°æ–¹å¼&lt;/td&gt;
&lt;td&gt;redo log æ˜¯ InnoDB å¼•æ“å±‚å®ç°çš„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å¼•æ“éƒ½æœ‰ã€‚&lt;/td&gt;
&lt;td&gt;binlog æ˜¯ Server å±‚å®ç°çš„ï¼ŒMySQL 3.23.14 ä¸­å¼•å…¥çš„ï¼Œæ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ binlog æ—¥å¿—ï¼ŒæœåŠ¡å™¨è¿è¡ŒæœŸé—´ç”Ÿæˆçš„æœåŠ¡å™¨å…¨å±€çŠ¶æ€æ›´æ”¹çš„è·Ÿè¸ªæ—¥å¿—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è®°å½•æ–¹å¼&lt;/td&gt;
&lt;td&gt;redo log é‡‡ç”¨å¾ªç¯å†™çš„æ–¹å¼è®°å½•ï¼Œå½“å†™åˆ°ç»“å°¾æ—¶ï¼Œä¼šå›åˆ°å¼€å¤´å¾ªç¯å†™æ—¥å¿—ã€‚&lt;/td&gt;
&lt;td&gt;binlogé€šè¿‡è¿½åŠ çš„æ–¹å¼è®°å½•ï¼Œå½“æ–‡ä»¶å¤§å°å¤§äºç»™å®šå€¼åï¼Œåç»­çš„æ—¥å¿—ä¼šè®°å½•åˆ°æ–°çš„æ–‡ä»¶ä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‚ç”¨åœºæ™¯&lt;/td&gt;
&lt;td&gt;redo log é€‚ç”¨äºå´©æºƒæ¢å¤(crash-safe)ï¼Œé‡å¯æ¢å¤çš„æ—¶å€™ï¼Œé€šè¿‡check pointå’Œwrite pos æ¥æ¢å¤æ•°æ®&lt;/td&gt;
&lt;td&gt;binlog é€‚ç”¨äºä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ï¼ŒæŸä¸ªæ—¶é—´ç‚¹çš„æ“ä½œè®°å½•å½’æ¡£ï¼Œå¯ä»¥æŒ‰æ—¶é—´ç‚¹è¿›è¡Œæ¢å¤ï¼›ä»¥åŠä¸»ä»ä¹‹é—´çš„å¤åˆ¶é‡æ”¾, å®ç°é«˜å¯ç”¨çš„åŸºç¡€ï¼Œä»¥åŠè®¢é˜…binlogè¿›è¡Œä¸åŒåˆ†å¸ƒå¼å­˜å‚¨æ•°æ®çš„åŒæ­¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç”± binlog å’Œ redo log çš„åŒºåˆ«å¯çŸ¥ï¼šå› ä¸ºmysql æ—©æœŸè‡ªå¸¦çš„MyISAMå­˜å‚¨å¼•æ“è®¾è®¡ç”¨ binlog æ—¥å¿—åªç”¨äºå½’æ¡£ï¼Œè¿›è¡Œæ•°æ®æ¢å¤ï¼Œåªä¾é  binlog æ˜¯æ²¡æœ‰ crash-safe èƒ½åŠ›çš„ã€‚innnodbå­˜å‚¨å¼•æ“å¼•å…¥mysqlä¹‹åï¼Œå¼•å…¥redo/undo logæ–‡ä»¶æ¥æ”¯æŒäº‹åŠ¡æŒä¹…æ€§å’ŒåŸå­æ€§æ¥ä¿è¯å†™å…¥æ•°æ®çš„ä¸€è‡´æ€§ï¼›ä½†åªæœ‰ redo log ä¹Ÿä¸è¡Œï¼Œå› ä¸º redo log æ˜¯ InnoDB ç‰¹æœ‰çš„ï¼Œå¾ªç¯å†™å…¥ï¼Œæ— æ³•è¿˜åŸä¸åœ¨è¿™ä¸ªredo logä¸­çš„è®°å½•ï¼Œæ¯”å¦‚ä»æœåŠ¡å¯åŠ¨æˆ–è€…è®°å½•æ•°æ®è½åå¾ˆå¤šï¼›å› æ­¤éœ€è¦ binlog å’Œ redo logäºŒè€…åŒæ—¶è®°å½•ï¼Œæ‰èƒ½ä¿è¯å½“æ•°æ®åº“å‘ç”Ÿè¯¯åˆ æˆ–è€…å®•æœºé‡å¯æ—¶ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä¸¤é˜¶æ®µæäº¤çš„æœºåˆ¶&#34;&gt;ä¸¤é˜¶æ®µæäº¤çš„æœºåˆ¶&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯å†™å…¥ä¸¤ä»½æ—¥å¿—redo log, binlog æœ€ç»ˆæ¢å¤æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œé‡‡ç”¨ä¸¤é˜¶æ®µæäº¤çš„æœºåˆ¶(XA,å†…éƒ¨/å…¨å±€äº‹åŠ¡ innodbæä¾›ä¸€æ ·çš„æ“ä½œ)ï¼Œmysql server æ‰§è¡Œå™¨ åœ¨è°ƒç”¨innodbå­˜å‚¨å¼•æ“æ¥å£è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œèµ·åˆ°ä¸€ä¸ªäº‹åŠ¡åè°ƒè€…çš„ä½œç”¨,é€šè¿‡TC_LOG(Transaction Coordinator Log)åŸºç±»å®šä¹‰äº†äº‹åŠ¡æ—¥å¿—éœ€è¦å®ç°çš„æ¥å£: open, prepare, commit, rollback, closeï¼›å®ç°è¿™äº›æ¥å£çš„ç±»ï¼šTC_LOG_DUMMY(disable the logging), TC_LOG_MMAP(mmap logging), MYSQL_BIN_LOG(binlog)ï¼›ä¸»è¦æ˜¯æ˜¯æŸ¥çœ‹MYSQL_BIN_LOGç±»ä¸­&lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/binlog.cc#L7881&#34;&gt;prepare&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/binlog.cc#L7934&#34;&gt;commit&lt;/a&gt; çš„å®ç°ï¼›prepare å’Œ commitæœ€ç»ˆä¼šè°ƒç”¨å­˜å‚¨å¼•æ“åˆå§‹åŒ–æ—¶æŒ‡å‘çš„handlertonå¯¹è±¡å¯¹åº”å‡½æ•°ï¼›ï¼ˆè¿™ç§æ¥å£éš”ç¦»çš„å¸¸ç”¨è®¾è®¡ï¼Œå°†è°ƒç”¨æ–¹å’Œå®ç°æ–¹è¿›è¡Œè§£è€¦ï¼Œæ ¹æ®å‚æ•°é…ç½®æ¥ç»‘å®šå®ç°æ–¹ï¼Œè¿è¡Œæ—¶åŠ¨æ€è°ƒç”¨ï¼‰&lt;/p&gt;
&lt;p&gt;mysqlæ˜¯ä»¥pluginçš„æ–¹å¼ç®¡ç†å­˜å‚¨å¼•æ“å’Œå…¶ä»–ä¸»ä»å¤åˆ¶æ’ä»¶ï¼ˆé€šè¿‡&lt;code&gt;SHOW PLUGINS;&lt;/code&gt;æŸ¥çœ‹), æ’ä»¶çš„æ–¹å¼ä»¥AOPçš„æ–¹å¼RUN_HOOKè°ƒç”¨å¯¹åº”å‡½æ•°ï¼›æ‰€ä»¥ä¼šè°ƒç”¨å¯¹åº”é…ç½®åˆå§‹çš„å­˜å‚¨å¼•æ“(é»˜è®¤innodb), mysqld å¯åŠ¨æ—¶ä¼šè°ƒç”¨&lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/mysqld.cc#L5815&#34;&gt;init_server_components&lt;/a&gt; è°ƒç”¨innodbå­˜å‚¨å¼•æ“çš„æ¥å£è¿›è¡Œåˆå§‹åŒ–ha_handler, åœ¨&lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/storage/innobase/handler/ha_innodb.cc#L4935&#34;&gt;innodb_init&lt;/a&gt;ä¸­è¿›è¡Œåˆå§‹åŒ–, æ¯”å¦‚åˆ·ç›˜æ“ä½œ innobase_hton-&amp;gt;flush_logs = innobase_flush_logs; ç„¶ååœ¨sql/handlerä¸­å®šä¹‰çš„ç›¸å…³æ¥å£è°ƒç”¨, æ¯”å¦‚&lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/handler.cc#L2459&#34;&gt;ha_flush_logs&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¼šæœ‰å„ç§æ—¥å¿—çš„åˆ·æ–°æœºåˆ¶ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;show variables like &#39;%innodb%flush%&#39;; show variables like &#39;sync_binlog&#39;;&lt;/code&gt;è·å–å¯¹åº”çš„å‚æ•°ï¼Œå¯ä»¥å»å®˜ç½‘&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/server-option-variable-reference.html&#34;&gt;Server Option, System Variable, and Status Variable Reference&lt;/a&gt; æŸ¥æ‰¾å¯¹åº”çš„è¯¦æƒ…è¿›è¡Œé…ç½®ä¼˜åŒ–ï¼›&lt;/p&gt;
&lt;p&gt;å½“å¼€å¯binlogæ—¶, MySQLé»˜è®¤ä½¿ç”¨è¯¥éšå¼XAæ¨¡å¼ï¼Œå¼€å¯è‡ªåŠ¨æäº¤äº‹åŠ¡autocommitã€‚äº‹åŠ¡çš„æäº¤æµç¨‹ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæ‰§è¡Œç®€å•çš„updateæ“ä½œï¼Œç®€è¿°å¦‚ä¸‹ï¼š(æ’¸ä¸€éï¼Œå“‡å¡ï½get ğŸ¸)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;0. æ‰§è¡Œå™¨æ•°æ®è·å–ä¿®æ”¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰§è¡Œå™¨è°ƒç”¨innodbå­˜å‚¨å¼•æ“æ¥å£è·å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œé€šè¿‡æ ‘ç´¢å¼•æŸ¥æ‰¾/å…¨è¡¨æŸ¥æ‰¾ï¼Œ å¦‚æœæ•°æ®åœ¨buffer poolä¸­æŸ¥æ‰¾åˆ°ï¼Œè¿”å›æ•°æ®ï¼›å¦åˆ™ä»ç£ç›˜è¡¨ç©ºé—´æ–‡ä»¶ä¸­è¯»å–æ•°æ®pageåˆ°buffer pool  clean pageä¸­ï¼Œè¿”å›æ•°æ®ï¼›æ— æ•°æ®ï¼Œæµç¨‹ç»ˆæ­¢è¿”å›ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå™¨ä¿®æ”¹æ‰¾åˆ°çš„æ•°æ®ï¼Œå°†ä¿®æ”¹çš„æ•°æ® è°ƒç”¨innodbå­˜å‚¨å¼•æ“æ¥å£å†™å…¥æ–°æ•°æ®ï¼Œè¿›è¡Œä¸¤é˜¶æ®µæäº¤ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;äº‹åŠ¡çš„æäº¤è¿‡ç¨‹å…¥å£ç‚¹ä½äº &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/handler.cc#L1592&#34;&gt;ha_commit_trans&lt;/a&gt;å‡½æ•°ï¼Œä»¥mysql binlog ä¸ºäº‹åŠ¡2pcåè°ƒè€…ä¸ºä¾‹ï¼Œäº‹åŠ¡æäº¤çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. mysql bin log äº‹åŠ¡2pcåè°ƒè€… å¤„ç† å‡†å¤‡prepareé˜¶æ®µ&lt;/strong&gt;ï¼š(tc_log-&amp;gt;prepare)&lt;/p&gt;
&lt;p&gt;MYSQL_BIN_LOG::prepare(THD *thd, bool all)  è®¾ç½® thd-&amp;gt;durability_property = HA_IGNORE_DURABILITY; ç”¨äºåœ¨å­˜å‚¨å¼•æ“å‡†å¤‡é˜¶æ®µä¸åˆ·æ–°äº‹åŠ¡æ—¥å¿—redo/undo log åˆ°ç£ç›˜æ—¥å¿—æ–‡ä»¶ä¸­ï¼›&lt;/p&gt;
&lt;p&gt;è°ƒç”¨æµç¨‹ï¼šha_prepare_low â†’ innobase_xa_prepare â†’ trx_prepare_for_mysql â†’   &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/storage/innobase/trx/trx0trx.cc#L2919&#34;&gt;static void trx_prepare(trx_t *trx)&lt;/a&gt;   â†’ trx_prepare_low â†’ trx_undo_set_state_at_prepare&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;æ‰§è¡Œå™¨è°ƒç”¨innodbå­˜å‚¨å¼•æ“æ¥å£è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œé¦–å…ˆå†™å…¥æ•°æ®çš„æ—§å€¼è‡³undo log bufferä¸­ï¼Œæ›´æ–°InnoDBçš„undoå›æ»šæ®µï¼Œå°†å…¶è®¾ç½®ä¸ºPrepareçŠ¶æ€ï¼ˆ&lt;code&gt;TRX_UNDO_PREPARED&lt;/code&gt;ï¼‰å†™å…¥mlogä¸­ï¼Œè¿”å› redo log çš„LSN,&lt;/li&gt;
&lt;li&gt;æ›´æ–°buffer poolä¸­çš„æ•°æ®ï¼Œä¿®æ”¹çš„clean pageå˜æˆ dirty page(æ›´æ–°çš„æ•°æ®é¡µåœ¨ç¼“å­˜ä¸­ï¼Œè¿˜æœªåˆ·ç›˜)&lt;/li&gt;
&lt;li&gt;åŒæ—¶å°†æ•°æ®é¡µçš„ä¿®æ”¹è®°å½•LSNå†™å…¥redo log bufferä¸­ï¼Œå‡†å¤‡æäº¤äº‹åŠ¡ï¼Œæ­¤æ—¶ redo log å¤„äº prepare çŠ¶æ€ï¼Œå¦‚æœthd-&amp;gt;durability_property = HA_IGNORE_DURABILITY, å°†&lt;code&gt;LSN&lt;/code&gt; å†™å…¥redo log ç£ç›˜æ–‡ä»¶ä¸­ï¼›åŸå­åŒ–æ“ä½œ&lt;code&gt;trx_t&lt;/code&gt; äº‹åŠ¡çŠ¶æ€ä¸º PREPARED (ç”¨äºäº‹åŠ¡éš”ç¦»æ“ä½œ)ï¼› å°†&lt;code&gt;gtid_desc&lt;/code&gt;å†™å…¥undolog è¡¨ç©ºé—´ä¸­ï¼›ç„¶åå‘ŠçŸ¥æ‰§è¡Œå™¨æ‰§è¡Œå®Œæˆäº†ï¼Œéšæ—¶å¯ä»¥æäº¤äº‹åŠ¡ã€‚è¿™é‡Œä¼šå‡ºç°redo log fileå†™æ»¡çš„æƒ…å†µï¼Œbuffer å†™å…¥ä¼šhangä½ï¼ŒMySQLå°±ä¼šåœä¸‹æ‰‹å¤´çš„ä»»åŠ¡ï¼Œå…ˆæŠŠè„é¡µåˆ·åˆ°ç£ç›˜é‡Œï¼Œæ‰èƒ½ç»§ç»­å¹²æ´»ï¼Œä¼šå¯¼è‡´MySQLçš„æœåŠ¡å™¨çš„tpsæœ‰æ˜æ˜¾çš„æ³¢åŠ¨ï¼› é»˜è®¤å¼€å¯äº†innodb_adaptive_flushing ç®—æ³•è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨redo log fileè¿˜æ²¡æœ‰æ»¡çš„æ—¶å€™ï¼Œä¼šæ ¹æ®redo log fileç”Ÿæˆçš„é€Ÿåº¦å’Œåˆ·æ–°é¢‘ç‡æ¥å°†redo log fileä¸­çš„è„é¡µåˆ·å…¥ç£ç›˜è¡¨ç©ºé—´æ–‡ä»¶ä¸­ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;2. mysql binlog äº‹åŠ¡2pcåè°ƒè€… å¤„ç† æäº¤commité˜¶æ®µï¼š&lt;/strong&gt;(tc_log-&amp;gt;commit)&lt;/p&gt;
&lt;p&gt;è°ƒç”¨æµç¨‹ï¼šTC_LOG::enum_result MYSQL_BIN_LOG::commit(THD *thd, bool all) â†’&lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/binlog.cc#L8717&#34;&gt;int MYSQL_BIN_LOG::ordered_commit(THD *thd, bool all, bool skip_commit)&lt;/a&gt;  , å¦‚æœæ²¡æœ‰å¼€å¯log_binï¼Œæ²¡æœ‰bin logæ–‡ä»¶ï¼Œç›´æ¥è·³è‡³commité˜¶æ®µï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç»„æäº¤&lt;/strong&gt; (ordered_commit) &lt;code&gt;binlog_order_commits&lt;/code&gt;å‚æ•°æ§åˆ¶ï¼Œä¿è¯innodb commité¡ºåºå’Œbinlogå†™å…¥é¡ºåºä¸€è‡´ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flushé˜¶æ®µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è°ƒç”¨æµç¨‹ï¼šTC_LOG::enum_result MYSQL_BIN_LOG::commit(THD *thd, bool all) â†’&lt;a href=&#34;&#34;&gt;int MYSQL_BIN_LOG::ordered_commit(THD *thd, bool all, bool skip_commit)&lt;/a&gt;  â†’  &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/binlog.cc#L8301&#34;&gt;int MYSQL_BIN_LOG::process_flush_stage_queue&lt;/a&gt; ;&lt;/p&gt;
&lt;p&gt;RUN_HOOK å»è·å–åŠ è½½çš„æ’ä»¶ï¼Œrpl handler Binlog_storage_delegate::after_flush FOREACH_OBSERVERå®æ·»åŠ æ’ä»¶åˆ° thd-&amp;gt;lex list ä¸­æ‰§è¡Œï¼›&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶process_flush_stage_queueå¤„ç†ä¼šå½¢æˆä¸€ç»„é˜Ÿåˆ—ï¼Œç”±leaderä¾æ¬¡ä¸ºåˆ«çš„çº¿ç¨‹å†™binlogæ–‡ä»¶ åœ¨å‡†å¤‡å†™binlogå‰ï¼Œä¼šå…ˆè°ƒç”¨ha_flush_logs -&amp;gt; innobase_flush_logsæ¥å£ï¼Œå°†å­˜å‚¨çš„æ—¥å¿—å†™åˆ°æœ€æ–°çš„LSNï¼›ç„¶åå†å†™binlogåˆ°æ–‡ä»¶; è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æå‡ç»„æäº¤çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;æ‰§è¡Œå™¨ è°ƒç”¨innodbå­˜å‚¨å¼•æ“innobase_flush_logs æ¥å£ å°† redo/undo log bufferä¸­çš„æ•°æ®å†™å…¥redo log file ç£ç›˜ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå™¨ è°ƒç”¨ MYSQL_BIN_LOG::flush_thread_caches å°† thread caches  å†™å…¥ bin logä¸­(è¿˜æœªåˆ·ç›˜), å¹¶ä¸”è®¾ç½®å¥½äº‹åŠ¡çš„å†™å…¥ä½ç½®m_trans_end_posï¼Œå½“äº‹åŠ¡æäº¤commité˜¶æ®µçš„æ—¶å€™ï¼Œç›´æ¥è·å–ä½ç½®æäº¤ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;sync_binlogé˜¶æ®µï¼š&lt;/strong&gt; &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/sql/binlog.cc#L8506&#34;&gt;std::pair&amp;lt;bool, bool&amp;gt; MYSQL_BIN_LOG::sync_binlog_file(bool force)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RUN_HOOK å»è·å–åŠ è½½çš„æ’ä»¶ï¼Œrpl handler Binlog_storage_delegate::after_sync FOREACH_OBSERVERå®æ·»åŠ æ’ä»¶åˆ° thd-&amp;gt;lex list ä¸­æ‰§è¡Œï¼›&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆè°ƒç”¨ &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/mysys/my_sync.cc#L84&#34;&gt;int my_sync(File fd, myf my_flags)&lt;/a&gt; ,æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿæ¥è°ƒç”¨ï¼Œunixæ“ä½œç³»ç»Ÿè°ƒç”¨fsync/fdatasyncå‡½æ•°åˆ·ç›˜, fsyncä¼šç¡®ä¿OS cacheä¸­çš„æ•°æ®ç›´åˆ°å†™ç£ç›˜æ“ä½œç»“æŸæ‰ä¼šè¿”å›ï¼Œå¹¶ä¸”å†™å…¥å…ƒæ•°æ®ï¼Œè€Œfdatasyncä¸ä¼š; å¦‚æœæƒ³ä¸èµ°OS cacheç›´æ¥å†™ç£ç›˜ï¼Œå¯¹æ‰“å¼€/åˆ›å»ºçš„æ–‡ä»¶å¥æŸ„åŠ ä¸ŠO_DIRECTå±æ€§ï¼Œä¸€èˆ¬ç”¨äºå†™ç³»ç»Ÿè¡¨ç©ºé—´æ•°æ®è½ç›˜ï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœ&lt;code&gt;sync_binlog&lt;/code&gt;è®¡æ•°è¶…è¿‡é…ç½®å€¼ï¼Œåˆ™è¿›è¡Œä¸€æ¬¡æ–‡ä»¶fsyncï¼Œå‚æ•°&lt;code&gt;sync_binlog&lt;/code&gt;çš„å«ä¹‰ä¸æ˜¯æŒ‡çš„è¿™ä¹ˆå¤šä¸ªäº‹åŠ¡ä¹‹ååšä¸€æ¬¡fsyncï¼Œè€Œæ˜¯è¿™ä¹ˆå¤šç»„äº‹åŠ¡é˜Ÿåˆ—ååšä¸€æ¬¡fsync;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;å¼€å§‹ç”Ÿæˆè¿™ä¸ªæ—¶é—´ç‚¹çš„é€»è¾‘æ“ä½œæ—¥å¿—æ ¼å¼ï¼Œé€šè¿‡&lt;code&gt;sync_binlog&lt;/code&gt; flushç­–ç•¥å¼‚æ­¥å°†thead cachesä¸­çš„æ•°æ®æ‰¹é‡å†™å…¥åˆ°ç£ç›˜binlogæ–‡ä»¶binlog.**/binlog.indexä¸­ï¼› é€šè¿‡ &lt;code&gt;show binlog events;&lt;/code&gt;æ¥æŸ¥çœ‹binlogæ–‡ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥å¯¹å•ä¸ªæ–‡ä»¶æŸ¥çœ‹ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Async/Semisync/Group å¼‚æ­¥/åŠåŒæ­¥/ç»„å¤åˆ¶é˜¶æ®µï¼š&lt;/strong&gt; (å†™æ“ä½œéƒ½åœ¨ä¸»ä¸Š)&lt;/p&gt;
&lt;p&gt;å¼‚æ­¥å¤åˆ¶ï¼šä¸»åº“åœ¨æ‰§è¡Œå®Œè‡ªå·±çš„äº‹åŠ¡ã€è®°å½•å®Œbinlogä¹‹åå°±ä¼šç›´æ¥è¿”å›ï¼Œmysqlä¸»ä»æ¨¡å¼é»˜è®¤æ˜¯å¼‚æ­¥å¤åˆ¶ï¼›&lt;/p&gt;
&lt;p&gt;åŠåŒæ­¥å¤åˆ¶ï¼šä¸»çš„äº‹åŠ¡éœ€è¦ç­‰ä¸€å°ä»åŒæ­¥binlogæ—¥å¿—æäº¤åˆ°Relay Logä¸­(sync_relay=1)ï¼Œè¿”å›ackï¼Œä¸»åº“æäº¤äº‹åŠ¡ï¼›ä»MySQL5.5å¼€å§‹ ä»¥æ’ä»¶çš„å½¢å¼æ”¯æŒåŠåŒæ­¥å¤åˆ¶ï¼›å¦‚æœéœ€è¦æ”¯æŒï¼Œä¸»ä»éƒ½éœ€è¦å®‰è£…åŠåŒæ­¥æ’ä»¶åº“ï¼Œ&lt;/p&gt;
&lt;p&gt;ä¸» &lt;code&gt;install plugin rpl_semi_sync_master soname &#39;semisync_master.so&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä» &lt;code&gt;install plugin rpl_semi_sync_slave soname &#39;semisync_slave.so&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”æ‰“å¼€åŠåŒæ­¥å¤åˆ¶ï¼Œ&lt;code&gt;set global rpl_semi_sync_master_enabled=1;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­é€šè¿‡å‚æ•°&lt;code&gt;rpl_semi_sync_master_wait_point&lt;/code&gt;æ¥å†³å®šä»€ä¹ˆæ—¶å€™æäº¤äº‹åŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;after_sync&lt;/strong&gt; ä¸»åº“å…ˆä¸æäº¤äº‹åŠ¡ï¼Œç­‰å¾…æŸä¸€ä¸ªä»åº“è¿”å›äº†ç»“æœä¹‹åï¼Œå†æäº¤äº‹åŠ¡ï¼Œåœ¨è¿”å›ç»“æ„é€šçŸ¥å®¢æˆ·ç«¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœä»åº“åœ¨æ²¡æœ‰ä»»ä½•è¿”å›çš„æƒ…å†µä¸‹å®•æœºäº†ï¼Œmasterè¿™è¾¹ä¹Ÿæ— æ³•æäº¤äº‹åŠ¡ã€‚ä¸»ä»ä»ç„¶æ˜¯ä¸€è‡´çš„ï¼Œmysql5.7ä¹‹åé»˜è®¤å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;after_commit&lt;/strong&gt; ä¸»åº“å…ˆæäº¤äº‹åŠ¡ï¼Œç­‰å¾…ä»åº“è¿”å›ç»“æœå†é€šçŸ¥å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»„å¤åˆ¶ï¼šåŸºäºåŸç”Ÿå¤åˆ¶åŠ paxos åè®®ï¼Œæä¾›ä¸€è‡´æ•°æ®å®‰å…¨ä¿è¯ï¼Œä¸€ç§å¯ç”¨äºå®ç°å®¹é”™ç³»ç»Ÿçš„æŠ€æœ¯ï¼›MySQL 5.7.17ç‰ˆæœ¬ä¸­å¼•å…¥äº†MySQL Group Replicationç»„å¤åˆ¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä»¥æ’ä»¶çš„å½¢å¼æ”¯æŒ;ä¸»ä»éƒ½æ˜¯&lt;code&gt;INSTALL PLUGIN group_replication SONAME &#39;group_replication.so&#39;;&lt;/code&gt; å…·ä½“å®é™…æ“ä½œè§ï¼š&lt;a href=&#34;https://www.cnblogs.com/kevingrace/p/10260685.html&#34;&gt;MySQL 5.7 åŸºäºç»„å¤åˆ¶(MySQL Group Replication)&lt;/a&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;å¦‚æœå¼€å¯çš„ä¸»ä»å¤åˆ¶(é»˜è®¤å¼‚æ­¥)1:nï¼Œä¸»åº“ä¼šç­‰å¾…ä»åº“I/Oçº¿ç¨‹å»ºç«‹è¿æ¥ä¹‹åï¼Œåˆ›å»ºbinlog dumpçº¿ç¨‹ï¼Œé€šçŸ¥slaveæœ‰æ•°æ®æ›´æ–°ï¼Œå½“I/Oçº¿ç¨‹è¯·æ±‚æ—¥å¿—å†…å®¹æ—¶ï¼Œä¼šå°†æ­¤æ—¶çš„binlogåç§°å’Œå½“å‰æ›´æ–°çš„ä½ç½®posåŒæ—¶ä¼ ç»™slaveçš„I/Oçº¿ç¨‹, æŠŠbinlog eventå‘é€ç»™ä»åº“I/Oçº¿ç¨‹ï¼Œä»åº“I/Oçº¿ç¨‹è·å–åˆ°binlog eventä¹‹åå°†å…¶å†™å…¥åˆ°è‡ªå·±çš„Relay Logä¸­ï¼Œç„¶åä»åº“å¯åŠ¨SQLçº¿ç¨‹ï¼Œå°†Relayä¸­çš„æ•°æ®è¿›è¡Œé‡æ”¾ï¼Œå®Œæˆä»åº“çš„æ•°æ®æ›´æ–°ï¼›ä¸ºäº†ä¿è¯ä¸é‡å¤æ›´æ–°ï¼Œbinlog/relaylog ä¸­è®°å½•äº†GTIDï¼ˆmysql5.6åŠ å…¥ï¼‰, å…¨å±€å”¯ä¸€, å¦‚æœrelaylogä¸­å·²æœ‰GTID, åˆ™æ‰§è¡ŒGTIDè‡ªåŠ¨è·³è¿‡ï¼Œæ„å‘³ç€åœ¨æºä¸Šæäº¤çš„äº‹åŠ¡åªèƒ½åœ¨å‰¯æœ¬ä¸Šåº”ç”¨ä¸€æ¬¡ï¼Œè¿™æœ‰åŠ©äºä¿è¯ä¸€è‡´æ€§;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦å¤–å¦‚æœä¸»ä»å¤åˆ¶è¿‡ç¨‹çªç„¶ä¸­æ–­äº†ï¼Œæˆ–è€…ä¸»ä»åˆ‡æ¢äº†ï¼Œé‡å¯ä¹‹åå‘ç°SQLçº¿ç¨‹å®é™…æ‰§è¡Œåˆ°ä½ç½®å’Œæ•°æ®åº“è®°å½•çš„ä¸ä¸€è‡´ï¼›mysql5.6ä¹‹åå°†å¤åˆ¶çš„è¿›åº¦æ”¾åœ¨ç³»ç»Ÿçš„&lt;code&gt;mysql.slave_relay_log_info&lt;/code&gt;innodbè¡¨é‡Œï¼Œå¹¶ä¸”æŠŠæ›´æ–°è¿›åº¦ã€SQLçº¿ç¨‹æ‰§è¡Œç”¨æˆ·äº‹åŠ¡ç»‘å®šæˆä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œã€‚å³ä½¿å®•æœºäº†ï¼Œå¯ä»¥é€šè¿‡MySQLå†…å»ºçš„å´©æºƒæ¢å¤æœºåˆ¶æ¥ä½¿å®é™…æ‰§è¡Œçš„ä½ç½®å’Œæ•°æ®åº“ä¿å­˜çš„è¿›åº¦æ¢å¤åˆ°ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;commité˜¶æ®µ:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è°ƒç”¨æµç¨‹ï¼šint MYSQL_BIN_LOG::finish_commit(THD *thd) -&amp;gt; ha_commit_low -&amp;gt; innobase_commit -&amp;gt; &lt;a href=&#34;https://github.com/mysql/mysql-server/blob/8.0/storage/innobase/trx/trx0trx.cc#L2199&#34;&gt;void trx_commit(trx_t *trx)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RUN_HOOK å»è·å–åŠ è½½çš„æ’ä»¶ï¼Œrpl handler Trans_delegate::after_commit  FOREACH_OBSERVERå®æ·»åŠ æ’ä»¶åˆ° thd-&amp;gt;lex list ä¸­æ‰§è¡Œ&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;åªæœ‰binlogå†™å…¥ç£ç›˜æˆåŠŸä¹‹åï¼Œæ‰§è¡Œå™¨æ‰ä¼šè°ƒç”¨innodbå­˜å‚¨å¼•æ“æ¥å£ï¼Œé˜Ÿåˆ—ä¸­çš„äº‹åŠ¡ä¾æ¬¡è¿›è¡Œinnodb commitï¼Œå°†undoå¤´çš„çŠ¶æ€ä¿®æ”¹ä¸º&lt;code&gt;TRX_UNDO_CACHED&lt;/code&gt; / &lt;code&gt;TRX_UNDO_TO_FREE&lt;/code&gt; / &lt;code&gt;TRX_UNDO_TO_PURGE&lt;/code&gt;ä»»æ„ä¸€ç§ï¼›å¹¶é‡Šæ”¾äº‹åŠ¡é”ï¼Œæ¸…ç†è¯»å†™äº‹åŠ¡é“¾è¡¨ã€readviewç­‰ä¸€ç³»åˆ—æ“ä½œã€‚æ¯ä¸ªäº‹åŠ¡åœ¨commité˜¶æ®µä¹Ÿä¼šå»æ›´æ–°äº‹åŠ¡é¡µçš„binlogä½ç‚¹ã€‚ æœ€åè°ƒç”¨MYSQL_BIN_LOG::rotate æ˜¯å¦åˆ‡å‰²binlogæ–‡ä»¶ï¼Œå¦‚æœåˆ‡å‰²äº†ï¼Œ è°ƒç”¨MYSQL_BIN_LOG::purge()åˆ·ç›˜; ç»“æŸordered_commit ç»„æäº¤æµç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ›´æ–°æµç¨‹ä¸­å†™å…¥redo logçš„è¿‡ç¨‹æ‹†æˆäº†ä¸¤ä¸ªæ­¥éª¤prepareå’Œcommit ä¸¤ä¸ªé˜¶æ®µï¼›å¦‚æœä¸ä½¿ç”¨ä¸¤é˜¶æ®µæäº¤ï¼Œæ•°æ®åº“çš„çŠ¶æ€å°±æœ‰å¯èƒ½å’Œç”¨å®ƒçš„æ—¥å¿—æ¢å¤å‡ºæ¥çš„åº“çš„çŠ¶æ€ä¸ä¸€è‡´ã€‚åœ¨å´©æºƒæ¢å¤ä¸­ï¼Œ&lt;!-- raw HTML omitted --&gt;æ˜¯ä»¥ binlog ä¸­çš„ xid å’Œ redolog ä¸­çš„ xid è¿›è¡Œæ¯”è¾ƒï¼Œxid åœ¨ binlog é‡Œå­˜åœ¨åˆ™æäº¤ï¼Œä¸å­˜åœ¨åˆ™å›æ»šï¼Œä»¥åŠåˆ¤æ–­redo logä¸­æ˜¯å¦æœ‰commitæ ‡è¯†&lt;!-- raw HTML omitted --&gt;ï¼›å´©æºƒæ¢å¤æ—¶å…·ä½“çš„æƒ…å†µ:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;binlogæ— è®°å½•ï¼Œredologæ— è®°å½•ï¼šåœ¨redologå†™ä¹‹å‰crash, æ— prepareçŠ¶æ€ï¼Œæ— undo log è®°å½•ï¼Œæ¢å¤æ“ä½œï¼šæ— ï¼Œæ— éœ€å…³å¿ƒï¼›&lt;/li&gt;
&lt;li&gt;binlogæ— è®°å½•ï¼Œredologæ— è®°å½•ï¼šåœ¨redologå†™ä¹‹å‰crash, æ— prepareçŠ¶æ€ï¼Œæœ‰undo log è®°å½•ï¼Œæ¢å¤æ“ä½œï¼šé€šè¿‡undo logå›æ»šäº‹åŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;binlogæœ‰è®°å½•ï¼Œredologæœ‰è®°å½•ï¼šredologçŠ¶æ€prepareï¼Œ åˆ™åˆ¤æ–­å¯¹åº”çš„äº‹åŠ¡æ˜¯å¦å­˜åœ¨å®Œæ•´çš„binlogï¼Œæ¢å¤æ“ä½œï¼šå¦‚æœæ˜¯, åˆ™æäº¤äº‹åŠ¡ï¼Œå¦åˆ™, é€šè¿‡undo logå›æ»šäº‹åŠ¡;&lt;/li&gt;
&lt;li&gt;å¦‚æœredo logé‡Œé¢çš„äº‹åŠ¡æ˜¯å®Œæ•´çš„, ä¹Ÿå°±æ˜¯æœ‰äº†commitæ ‡è¯†, æ¢å¤æ“ä½œï¼šç›´æ¥æäº¤äº‹åŠ¡ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;mysql80-innodbå­˜å‚¨å¼•æ“å†™æ“ä½œ&#34;&gt;Mysql8.0 InnoDBå­˜å‚¨å¼•æ“å†™æ“ä½œ&lt;/h4&gt;
&lt;p&gt;Mysql8.0 InnoDBå­˜å‚¨å¼•æ“å†™æ“ä½œï¼Œå¯¹redo logçš„å†™æ“ä½œè¿›è¡Œæ— é”å…¨å¼‚æ­¥è®¾è®¡ä¼˜åŒ–ï¼›å…·ä½“è¯¦ç»†è§å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/optimizing-innodb-logging.html&#34;&gt;ä¼˜åŒ– InnoDB é‡åšæ—¥å¿—&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;etcd&#34;&gt;etcd&lt;/h3&gt;
&lt;h3 id=&#34;references&#34;&gt;references&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Write-ahead_logging&#34;&gt;Write-ahead_logging&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics&#34;&gt;ARIES:Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cs.stanford.edu/people/chrismre/cs345/rl/aries.pdf&#34;&gt;aries.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mesl.ucsd.edu/pubs/SOSP2013-MARS.pdf&#34;&gt;From ARIES to MARS: Transaction Support for Next-Generation, Solid-State Drives&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://repository.bilkent.edu.tr/bitstream/handle/11693/37609/Implications%20of%20non-volatile%20memory%20as%20primary%20storage%20for%20database%20management%20systems.pdf&#34;&gt;Implications of Non-Volatile Memory as Primary Storage for Database Management Systems&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=S9nctHdkggk&#34;&gt;ARIES Overview, Types of Log Records, ARIES Helper Structures&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=4VGkRXVM5fk&#34;&gt;ARIES Database Recovery (CMU Databases Systems / Fall 2019)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/internals/en/binary-log.html&#34;&gt;mysql binary-log&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2021/10/01/&#34;&gt;MySQL Â· å¼•æ“ç‰¹æ€§ Â· åº–ä¸è§£InnoDBä¹‹UNDO LOG&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://catkang.github.io/2020/02/27/mysql-redo.html&#34;&gt;åº–ä¸è§£InnoDBä¹‹REDO LOG&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2020/05/09/&#34;&gt;MySQL Â· å¼•æ“ç‰¹æ€§ Â· åŸºäºGTIDå¤åˆ¶å®ç°çš„å·¥ä½œåŸç†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2020/05/07/&#34;&gt;MySQL Â· æºç åˆ†æ Â· å†…éƒ¨ XA å’Œç»„æäº¤&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/372300181&#34;&gt;æ— å¤„ä¸åœ¨çš„ MySQL XA äº‹åŠ¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/server-option-variable-reference.html&#34;&gt;Server Option, System Variable, and Status Variable Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://icyfenix.cn/architect-perspective/general-architecture/transaction/local.html&#34;&gt;å‡¤å‡°æ¶æ„-æœ¬åœ°äº‹åŠ¡&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>è®¾è®¡-é…ç½®å¹³å°</title>
      <link>https://weedge.github.io/post/conf/</link>
      <pubDate>Thu, 18 Nov 2021 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/conf/</guid>
      
        <description>&lt;h3 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h3&gt;
&lt;p&gt;ä¸šåŠ¡æœåŠ¡åœ¨å¯åŠ¨æ—¶åŠ è½½é…ç½®ï¼Œé…ç½®åˆ†ä¸ºé™æ€é…ç½®å’ŒåŠ¨æ€é…ç½®ï¼Œé™æ€é…ç½®å¦‚æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œæ—¥å¿—è·¯å¾„ï¼Œè®¿é—®ä¾èµ–æœåŠ¡å•å…ƒä¸åŒäº‘(region / zone) åŸŸååœ°å€ç­‰ï¼›åŠ¨æ€é…ç½®åŒ…æ‹¬ä¸šåŠ¡é…ç½®ï¼Œæµç¨‹ç®¡ç†é…ç½®ï¼Œç­–ç•¥é…ç½®ç­‰ï¼›é™æ€é…ç½®æœåŠ¡å¯åŠ¨ä¹‹åä¸ä¼šæ›´æ”¹ï¼Œè€ŒåŠ¨æ€é…ç½®åœ¨æœåŠ¡å¯åŠ¨è¿è¡Œæ—¶å¯ä»¥åŠ¨æ€çƒ­åŠ è½½ï¼›å°†é…ç½®çš„å†…å®¹å’Œç‰ˆæœ¬è¿›è¡Œåˆ†ç¦»ï¼Œå…³æ³¨é…ç½®çš„ç®¡ç†è€Œæ— éœ€å…³æ³¨é…ç½®çš„å†…å®¹ï¼Œé…ç½®å†…å®¹ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰é…ç½®å†…å®¹ï¼Œä½¿ç”¨json-schemaè¿›è¡Œæ ¡éªŒï¼Œæä¾›è‡ªå®šä¹‰é…ç½®å†…å®¹jsonç»™åå°uiå‰ç«¯è¿›è¡Œå•ä¸ªæ•´ä½“é…ç½®çš„äº¤äº’ï¼Œé…ç½®åå°åªéœ€åŠ è½½json-schemaè¿›è¡Œæ ¡éªŒæäº¤å†…å®¹ï¼Œjson-schemaç”±ç”¨æˆ·ä¸Šä¼ æä¾›åœ°å€å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›®æ ‡&#34;&gt;ç›®æ ‡&lt;/h3&gt;
&lt;p&gt;é€šè¿‡é…ç½®åå°ï¼Œä¸šåŠ¡æœåŠ¡æµç¨‹å¯æ§ï¼Œå¯é…ç½®ï¼Œå¯è§†åŒ–ï¼Œéš”ç¦»å·²æœ‰ä¸šåŠ¡åœºæ™¯é…ç½®ï¼Œæé«˜äººæ•ˆï¼›&lt;/p&gt;
&lt;h3 id=&#34;åŠŸèƒ½&#34;&gt;åŠŸèƒ½&lt;/h3&gt;
&lt;h4 id=&#34;åå°åŸºç¡€åŠŸèƒ½&#34;&gt;åå°åŸºç¡€åŠŸèƒ½&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;åå°ç®¡ç†å‘å¸ƒç”Ÿäº§ç¯å¢ƒçš„åŠ¨æ€é…ç½®ï¼ŒåŒ…æ‹¬æ–°å¢ï¼Œä¿®æ”¹ï¼Œå®¡æ ¸ï¼Œå‘å¸ƒï¼Œå›æ»šç­‰åŠŸèƒ½ï¼›&lt;/li&gt;
&lt;li&gt;å¤šäººå‘å¸ƒçš„æ—¶å€™ï¼Œæ£€æŸ¥å½“å‰çš„ç‰ˆæœ¬æ˜¯å¦å·²ç»å‘å¸ƒï¼Œå¹¶è¿›è¡Œç‰ˆæœ¬diff;&lt;/li&gt;
&lt;li&gt;é…ç½®æ˜¯æœåŠ¡æ¥å£ç»´åº¦è¿›è¡Œæ“ä½œç®¡ç†ï¼Œ ä»¥æœåŠ¡ç²’åº¦è¿›è¡Œæ•´ä½“å‘å¸ƒï¼›&lt;/li&gt;
&lt;li&gt;æä¾›è·å–å½“å‰å·²å‘å¸ƒçš„æœåŠ¡é…ç½®æ¥å£ï¼Œç”¨äºè®¢é˜…ç«¯æ‹‰å–ï¼›&lt;/li&gt;
&lt;li&gt;æä¾›RBACæƒé™ç®¡ç†;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;åŠ¨æ€é…ç½®çƒ­åŠ è½½åŠŸèƒ½&#34;&gt;åŠ¨æ€é…ç½®çƒ­åŠ è½½åŠŸèƒ½&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;ä¸šåŠ¡æœåŠ¡é…ç½®è·å–æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡é…ç½®ä¿®æ”¹å‘å¸ƒï¼Œé€šè¿‡å‘å¸ƒ/è®¢é˜…æ¨¡å¼(Pub-Sub Pattern)é€šçŸ¥ä¸šåŠ¡æœåŠ¡è¿›è¡ŒåŠ è½½ï¼›å¯ç”¨ç»„ä»¶ä¸ºæ”¯æŒpub/subå‘½ä»¤çš„redisåè®®kvæœåŠ¡ï¼Œæˆ–è€…é€šè¿‡get(mget)/set(mset) incr(seq)å‘½ä»¤è¿›è¡Œæ¨¡æ‹Ÿå®ç°ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡é…ç½®ä¿®æ”¹å‘å¸ƒï¼Œé€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern) watchæœºåˆ¶é€šçŸ¥ä¸šåŠ¡æœåŠ¡è¿›è¡Œå®æ—¶åŠ è½½ï¼›å¯ä»¥ä½¿ç”¨etcdv3çš„watchæœºåˆ¶å®ç°;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸¤ç§æ–¹æ¡ˆéƒ½å¯ä»¥ï¼Œçœ‹æ˜¯å¦æœ‰å¯¹åº”çš„é«˜å¯ç”¨ç»„ä»¶æœåŠ¡æ”¯æŒï¼›å¦‚æœéƒ½æœ‰ï¼Œå»ºè®®ä½¿ç”¨etcdv3(client 3.4+)çš„watchæœºåˆ¶ï¼Œé€šè¿‡é•¿é“¾æ¥æ¥é€šçŸ¥å˜æ›´äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŠ è½½æ–¹å¼æœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡éƒ¨ç½²å•ç‹¬agentè¿›ç¨‹æ¥è·å–é…ç½®è¿›è¡Œè§£æå†™å…¥æŒ‡å®šé…ç½®è·¯å¾„æ–‡ä»¶ä¸­(é‡å¯æ—¶)å’Œå…±äº«å†…å­˜ä¸­(è¿è¡Œæ—¶)ï¼Œå…ˆå†™æ–‡ä»¶ï¼ŒæˆåŠŸäº†ï¼Œåœ¨å†™å…±äº«å†…å­˜ï¼›ç„¶åç”±ä¸šåŠ¡æœåŠ¡è¯»å–ï¼›&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šæ–¹ä¾¿å•ç‹¬ç»´æŠ¤ï¼Œæ— éœ€ä¸šåŠ¡æ–¹å…³å¿ƒï¼Œåªéœ€å…³å¿ƒåŠ è½½é…ç½®çš„è·¯å¾„åœ¨åå°ç»´æŠ¤ï¼Œä»¥åŠå…±äº«å†…å­˜ä¸­çš„é…ç½®ç»“æ„ï¼›&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šå¤šäº†ä¸€æ¬¡è¿›ç¨‹ä¹‹é—´çš„äº¤äº’ï¼›ä¸šåŠ¡æ–¹ä»£ç ä¸­éœ€è¦æœ‰è¯»å–å…±äº«å†…å­˜çš„é€»è¾‘è€ƒè™‘ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æä¾›é…ç½®åŠ è½½libåº“ï¼Œç”±ä¸šåŠ¡æ–¹å¯åŠ¨é€»è¾‘ä»£ç ä¸­è°ƒç”¨ï¼›å°†è·å–é…ç½®è¿›è¡Œè§£æå†™å…¥æŒ‡å®šé…ç½®è·¯å¾„æ–‡ä»¶ä¸­ï¼ŒåŠ è½½åˆ°ä¸šåŠ¡è¿›ç¨‹é…ç½®ç»“æ„ä¸­ä½¿ç”¨å³å¯ï¼›&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šä¸šåŠ¡æ–¹ç›´æ¥è°ƒç”¨libåº“ä¸­çš„æ–¹æ³•ï¼Œæ— éœ€å…³å¿ƒåŠ è½½é€»è¾‘ï¼›&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šå‡å¦‚ä¸šåŠ¡æ–¹æ˜¯ä¸åŒçš„è¯­è¨€ç¼–å†™ï¼Œéœ€è¦æä¾›ä¸åŒè¯­è¨€ç‰ˆæœ¬çš„libåº“æ–¹æ³•ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»ä½“æ¥è¯´ï¼Œ2ç§æ–¹æ¡ˆéƒ½å¯è¡Œï¼Œå¦‚æœç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚ä½¿ç”¨golangè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥é€‰ç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼›&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™æ ·å°±å¯ä»¥äº†ä¹ˆï¼Ÿè¿˜æœ‰ä¸šåŠ¡é›†ç¾¤é…ç½®ä¸€è‡´æ€§éœ€è¦è€ƒè™‘åˆ°ï¼Œæ¯”å¦‚ä¸šåŠ¡é›†ç¾¤æŸå°æœºå™¨çªç„¶æŠ½é£ï¼ŒæœªåŠ è½½æœ€æ–°çš„é…ç½®ï¼Œæ‰“åˆ°è¿™å°æœºå™¨çš„è¯·æ±‚å’Œå…¶ä»–æ­£å¸¸åŠ è½½é…ç½®çš„æœºå™¨çš„è¯·æ±‚é€»è¾‘ä¼šæœ‰æ‰€ä¸åŒï¼Œå¯¼è‡´æ•´ä½“æœåŠ¡æ¥å£ä¸æ˜¯å¹‚ç­‰çš„ï¼Œä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µï¼›å¯ä»¥å€Ÿé‰´ä¸€ä¸‹ &lt;a href=&#34;https://github.com/XiaoMi/Gaea/blob/master/docs/config-reloading.md&#34;&gt;gaeaé…ç½®çƒ­åŠ è½½è®¾è®¡ä¸å®ç°&lt;/a&gt;ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®ä¸€è‡´æ€§æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸¤é˜¶æ®µæäº¤çš„æ–¹å¼ï¼Œç”±ä¸šåŠ¡æœåŠ¡ä¾§æä¾›prepareæ¥å£å’Œcommitæ¥å£ï¼›&lt;/p&gt;
&lt;p&gt;å‡†å¤‡é˜¶æ®µï¼šconf-dashboardæ¨¡å—å‘å¸ƒçš„æ—¶å€™è·å–ä¸šåŠ¡æœåŠ¡çš„ipåˆ—è¡¨å¹¶å‘è°ƒç”¨æ¯ä¸ªä¸šåŠ¡æœåŠ¡ipçš„prepareæ¥å£ï¼Œå¼€å§‹è§¦å‘ä¸šåŠ¡æœåŠ¡æœ¬åœ°é…ç½®çš„æ›´æ–°æµç¨‹ï¼Œé¦–å…ˆé€šè¿‡conf-dashboardæ¨¡å—è·å–æœ€æ–°ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±æ— éœ€æ¯”è¾ƒäº†ï¼Œå¦åˆ™ä»è·å–é…ç½®æ¥å£è·å–é…ç½®è¿›è¡Œæ›´æ–°ï¼›æ›´æ–°æµç¨‹ä¸æ˜¯ç›´æ¥æ›¿æ¢çº¿ä¸Šæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªå‡†å¤‡æ–‡ä»¶è¿›è¡Œæäº¤æ—¶æ›¿æ¢ï¼›æ¯ä¸ªprepareæ¥å£åŒæ­¥è°ƒç”¨è¿”å›ç»“æœéƒ½okäº†ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥æäº¤é˜¶æ®µï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¿”å›å¤±è´¥ï¼Œå‘å¸ƒå¤±è´¥ï¼Œå±•ç°å¤±è´¥è¯¦æƒ…ï¼›&lt;/p&gt;
&lt;p&gt;æäº¤é˜¶æ®µï¼šprepareæˆåŠŸåï¼›conf-dashboardæ¨¡å—ç»§ç»­å¹¶å‘è°ƒç”¨çš„commitæ¥å£ï¼Œå¼€å§‹æ–‡ä»¶æ›¿æ¢ï¼ŒåŠ è½½è‡³ç¼“å­˜é…ç½®ç»“æ„ä¸­ï¼›è¿™ä¸ªæ“ä½œæ¯”è¾ƒå¿«ï¼Œéƒ½æäº¤æˆåŠŸä¹‹åï¼Œå‘å¸ƒæˆåŠŸï¼Œå¦åˆ™å‘å¸ƒå¤±è´¥ï¼Œå±•ç°å¤±è´¥è¯¦æƒ…ï¼›&lt;/p&gt;
&lt;p&gt;å¤±è´¥å¤„ç†ï¼šå¦‚æœæŸå°æœºå™¨å‘å¸ƒå¤±è´¥ï¼Œå¯ä»¥æ’æŸ¥ä¸‹å…·ä½“åŸå› ä¹‹å(åŸå› åº”å°½é‡åœ¨prepareå’Œcommitæ¥å£ä¸­è¯¦ç»†ç»™å‡º)ï¼Œçœ‹æ˜¯å¦è·³è¿‡ç»§ç»­å‘å¸ƒè¿˜æ˜¯ä¼šæ»šï¼Œé‡å¤å‘å¸ƒä¸å½±å“ï¼Œæœ‰md5å’Œç‰ˆæœ¬æ¯”è¾ƒï¼›&lt;/p&gt;
&lt;p&gt;tips: å¦‚æœå‘å¸ƒæœºå™¨å¾ˆå¤šï¼Œå¹¶å‘åŠ›åº¦æ ¹æ®conf-dashboardæ¨¡å—éƒ¨ç½²æœºå™¨æ¥å£è´Ÿè½½ï¼Œå¯ä»¥è‡ªé€‚åº”è°ƒæ•´é™ä½ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…œåº•æ£€æŸ¥æ›´æ–°æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®å‘å¸ƒæˆåŠŸåï¼Œè°ƒç”¨ä¸šåŠ¡æœåŠ¡æœºå™¨çš„metaæ¥å£è·å–æœ€æ–°æ›´æ–°æ–‡ä»¶ä¿¡æ¯ï¼Œè¿›è¡Œå…œåº•æ£€æŸ¥ç¡®è®¤ï¼›&lt;/p&gt;
&lt;p&gt;ä¸šåŠ¡æœåŠ¡å¼€å¯å…œåº•å®šæ—¶ä»»åŠ¡è·å–ä»conf-dashboardè·å–é…ç½®ç‰ˆæœ¬ï¼Œé…ç½®ä¿¡æ¯è¿›è¡Œå…œåº•æ›´æ–°, æ¯éš”10ï½30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼›&lt;/p&gt;
&lt;p&gt;tips: è¯·æ±‚conf-dashboardè·å–é…ç½®ä¿¡æ¯çš„æ¥å£éšæœºæ‰“æ•£ï¼Œé˜²æ­¢å¹¶å‘æµé‡å¯¹conf-dashboardæ¨¡å—çš„å½±å“ï¼›&lt;/p&gt;
&lt;p&gt;å®šæ—¶ä»»åŠ¡æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/confmg.drawio.png&#34; alt=&#34;cron-confmg&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ•´ä½“äº¤äº’æ¡†æ¶&#34;&gt;æ•´ä½“äº¤äº’æ¡†æ¶&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/config-arch.drawio.png&#34; alt=&#34;config-arch&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®åº“æ ¸å¿ƒåŠ¨æ€é…ç½®è¡¨è®¾è®¡&#34;&gt;æ•°æ®åº“æ ¸å¿ƒåŠ¨æ€é…ç½®è¡¨è®¾è®¡&lt;/h3&gt;
&lt;p&gt;å½“å‰æœåŠ¡ç‰ˆæœ¬å’Œå½“å‰confç‰ˆæœ¬æ˜¯1å¯¹å¤šçš„åœºæ™¯ï¼Œè€Œå†å²æœåŠ¡å¿«ç…§ç‰ˆæœ¬å’Œå†å²confå¿«ç…§ç‰ˆæœ¬æ˜¯å¤šå¯¹å¤šçš„åœºæ™¯ï¼›&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/config-version.png&#34; alt=&#34;config-version&#34;&gt;&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç±»å‹æšä¸¾è¡¨ service_type&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æšä¸¾å€¼&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;é…ç½®ç±»å‹æšä¸¾è¡¨ conf_type&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æšä¸¾å€¼&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æšä¸¾å€¼ç”±é…ç½®å¹³å°ç»Ÿä¸€åˆ†é…æ”¶æ•›ç®¡ç†&lt;/p&gt;
&lt;p&gt;å½“å‰æœåŠ¡ç‰ˆæœ¬è¡¨ tb_service_cur_ver&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;service_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹ æ¯”å¦‚ï¼š0.æ—  1.liveme 2.livestation&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cluster_name&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡é›†ç¾¤åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cur_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœåŠ¡å½“å‰ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;max_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœ€å¤§ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å½“å‰confç‰ˆæœ¬è¡¨ tb_conf_cur_ver&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cur_service_ver_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;å½“å‰æœåŠ¡ç‰ˆæœ¬ id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;confç±»å‹ï¼Œæ¯”å¦‚ï¼š&lt;!-- raw HTML omitted --&gt;0.æ—  &lt;!-- raw HTML omitted --&gt;1.livemeDSL &lt;!-- raw HTML omitted --&gt;101.livestationAggrDSL 102.livestationSceneDSL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cur_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;confå½“å‰ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;max_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœ€å¤§ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_name&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confåç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_target_path&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confç”Ÿæˆçš„ç›®æ ‡è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_val&lt;/td&gt;
&lt;td&gt;varchar(8192)&lt;/td&gt;
&lt;td&gt;confå½“å‰å†…å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æœåŠ¡ç‰ˆæœ¬ç”¨æˆ·æ“ä½œè®°å½•è¡¨ tb_service_op_record&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;service_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cluster_name&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡é›†ç¾¤åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;check_status&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡é…ç½®å®¡æ ¸çŠ¶æ€: 0.å¾…å®¡æ ¸ 1.å®¡æ ¸ä¸é€šè¿‡ 2.å®¡æ ¸é€šè¿‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;op_uid&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æ“ä½œè€…uid&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;confç‰ˆæœ¬ç”¨æˆ·æ“ä½œè®°å½• tb_conf_op_record&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;service_op_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç‰ˆæœ¬æ“ä½œ id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;confç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_name&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confåç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_target_path&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confç”Ÿæˆçš„ç›®æ ‡è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_val&lt;/td&gt;
&lt;td&gt;varchar(8192)&lt;/td&gt;
&lt;td&gt;confå½“å‰å†…å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;is_del&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æ˜¯å¦åˆ é™¤ï¼Œ0.å¯ç”¨ï¼Œ1.ä¸å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æœåŠ¡å†å²ç‰ˆæœ¬å¿«ç…§è¡¨ tb_service_ver_snapshot&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;service_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cluster_name&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡é›†ç¾¤åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;history_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœåŠ¡å†å²ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;confå†å²ç‰ˆæœ¬å¿«ç…§è¡¨ tb_conf_version_snapshot&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;confç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_name&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confåç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;history_ver&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;confå†å²ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_target_path&lt;/td&gt;
&lt;td&gt;varchar(128)&lt;/td&gt;
&lt;td&gt;confç”Ÿæˆçš„ç›®æ ‡è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_val&lt;/td&gt;
&lt;td&gt;varchar(8192)&lt;/td&gt;
&lt;td&gt;confå†å²å¿«ç…§å†…å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pub_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;å‘å¸ƒæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æœåŠ¡confå†å²ç‰ˆæœ¬å…³è”è¡¨ tb_service_conf_ver_snapshot&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ä¸»é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;service_ver_snapshot_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;æœåŠ¡å†å²ç‰ˆæœ¬å¿«ç…§ id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;conf_ver_snapshot_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;confå†å²ç‰ˆæœ¬å¿«ç…§ id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;update_time&lt;/td&gt;
&lt;td&gt;uint&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;åœºæ™¯æ¨¡æ‹Ÿ&#34;&gt;åœºæ™¯æ¨¡æ‹Ÿ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ–°å¢ç‰ˆæœ¬ä¿å­˜æ›´æ–°åˆ é™¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®¡æ ¸&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å¸ƒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å›æ»š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·å–å½“å‰æœåŠ¡confç‰ˆæœ¬é…ç½®&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç²’åº¦æ•´ä½“ç‰ˆæœ¬æ–‡ä»¶ä¸€æ¬¡æ‹‰å–ä¸‹æ¥ï¼Œè¿™é‡Œæ˜¯æ¥å£å½¢å¼æä¾›ï¼Œ åç»­å¯ä»¥æä¾›å°†å¯ç”¨ç‰ˆæœ¬ä»¥æœåŠ¡ç²’åº¦æ‰“ä¸ªåŒ…æäº¤ï¼›å¦‚æœåç»­æœ‰å¤šæœåŠ¡ä¸€èµ·æ†ç»‘æ‰“åŒ…ï¼Œéœ€è¦è€ƒè™‘ä¸Šçº¿ä¾èµ–é¡ºåºï¼Œæš‚æ—¶ä¸æä¾›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ¥å£&#34;&gt;æ¥å£&lt;/h3&gt;
&lt;p&gt;çº¿ä¸‹å†…ç½‘åŸŸåè®¿é—®éœ€è¦é…ç½®routeræ¨¡å—ä¸­çš„ngx proxyé…ç½®ï¼Œæ–°å¢ä¸€ä¸ªlocation /confdashboard è¿›è¡Œè·¯ç”±è·³è½¬ï¼›æˆ–è€…æŒ‡å®šipç«¯å£è®¿é—®è·¯å¾„ï¼›&lt;/p&gt;
&lt;p&gt;çº¿ä¸Šé€šè¿‡é€šè¿‡æœåŠ¡å‘ç°æ¨¡å—æ¥è·å–confdashboardæœåŠ¡å•å…ƒipåˆ—è¡¨è´Ÿè½½å‡è¡¡è¿›è¡Œè®¿é—®ï¼›å¯ä»¥å¤šæœºæˆ¿éƒ¨ç½²ï¼Œæ ¹æ®ä¸šåŠ¡æœåŠ¡éƒ¨ç½²åœºæ™¯å®šï¼›&lt;/p&gt;
&lt;h4 id=&#34;conf-dashboard-æ¥å£&#34;&gt;conf-dashboard æ¥å£&lt;/h4&gt;
&lt;p&gt;æä¾›ç»™åå°å‰ç«¯çš„CRUDæ¥å£ä¸åœ¨è¿™é‡Œæè¿°ï¼Œé€šè¿‡&lt;a href=&#34;https://github.com/smallnest/gen&#34;&gt;smallnest/gen&lt;/a&gt;ç”ŸæˆRESTfulæ¥å£æä¾›ç»™å‰ç«¯ä½¿ç”¨å°±è¡Œï¼Œä¿®æ”¹æ“ä½œï¼Œæ ¹æ®ä¸åŒçš„conf_typeåŠ è½½ä¸åŒçš„json_schemaè¿›è¡Œæ ¡éªŒï¼Œä»¥åŠå®¡æ ¸ï¼Œå‘å¸ƒæ¥å£ï¼›ä¸»è¦æ˜¯æä¾›ç»™ä¸šåŠ¡æœåŠ¡è°ƒç”¨çš„æ¥å£å®ç°ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;è¯·æ±‚è°ƒç”¨æ–¹å¼ï¼šhttp1.1 POST æˆ–è€… GRPC&lt;/p&gt;
&lt;p&gt;å…¬å…±è¿”å›å‚æ•°ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;å­—æ®µ&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;ç±»å‹&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;errNo&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;int&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;é”™è¯¯å·ï¼Œé»˜è®¤ä¸º0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;errStr&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;string&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;é”™è¯¯æè¿°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;data&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;json&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è¿”å›å“åº”æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è·å–å½“å‰æœåŠ¡é…ç½®æ–‡ä»¶ç‰ˆæœ¬   /confdashboard/v1/getcurversion&lt;/p&gt;
&lt;p&gt;è¯·æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;å‚æ•°æ˜¯å¦å¿…é¡»&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;serviceType&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹:0.æ—  1.liveme 2.livestation&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å“åº”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;curVer&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;å½“å‰ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;maxVer&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;æœ€å¤§ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·å–å½“å‰æœåŠ¡æ–‡ä»¶é…ç½®å†…å®¹   /confdashboard/v1/getcurserverconf&lt;/p&gt;
&lt;p&gt;(æœåŠ¡ç²’åº¦æ•´ä½“ç‰ˆæœ¬æ–‡ä»¶ä¸€æ¬¡æ‹‰å–ä¸‹æ¥ï¼Œè¿™é‡Œæ˜¯æ¥å£å½¢å¼ç»™å‡ºå¯¹åº”é…ç½®æ•°æ®ï¼Œå…œåº•å®šæ—¶è½®è®­è·å–ï¼‰&lt;/p&gt;
&lt;p&gt;è¯·æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;å‚æ•°æ˜¯å¦å¿…é¡»&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;serviceType&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹:0.æ—  1.liveme 2.livestation&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;confName&lt;/td&gt;
&lt;td&gt;å¯é€‰&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡æœ¬åœ°é…ç½®æ–‡ä»¶åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;confTargetPath&lt;/td&gt;
&lt;td&gt;å¯é€‰&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡æœ¬åœ°é…ç½®è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å“åº”dataï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;downloadUrl&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æœåŠ¡é…ç½®æ•´ä½“æ‰“åŒ…åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;confData&lt;/td&gt;
&lt;td&gt;map&lt;!-- raw HTML omitted --&gt;confData&lt;!-- raw HTML omitted --&gt;(map&amp;lt;{confTargetPath}/{confName}&amp;gt;{confData})&lt;/td&gt;
&lt;td&gt;æœåŠ¡é…ç½®åˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;confData&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;version&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶å½“å‰ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;data&lt;/td&gt;
&lt;td&gt;[]byte&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶å½“å‰ç‰ˆæœ¬å†…å®¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸šåŠ¡æœåŠ¡é…ç½®æ›´æ–°ç»“æœæŠ¥å‘Š /confdashboard/v1/reportBizServConf&lt;/p&gt;
&lt;p&gt;è¯·æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;å‚æ•°æ˜¯å¦å¿…é¡»&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;serviceType&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹:0.æ—  1.liveme 2.livestation&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reportInfos&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;/td&gt;
&lt;td&gt;map&lt;!-- raw HTML omitted --&gt;reportInfo&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡æœåŠ¡é…ç½®æ›´æ–°ç»“æœæŠ¥å‘Šåˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;clusterName&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;é›†ç¾¤åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;reportInfo&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;version&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;confFilePath&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;md5sum&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶MD5å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;confUpdateTime&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡é…ç½®æ–‡ä»¶æ›´æ–°æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;updateResultCode&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;0, æ›´æ–°æˆåŠŸï¼Œ1ï¼Œæ›´æ–°å¤±è´¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;updateErrStr&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;æ›´æ–°å¤±è´¥åŸå› &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å“åº”dataï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;conf-agentlib-ä¸šåŠ¡æœåŠ¡æ¥å£&#34;&gt;conf-agent/lib ä¸šåŠ¡æœåŠ¡æ¥å£&lt;/h4&gt;
&lt;p&gt;é€šè¿‡åœ¨ä¸šåŠ¡æœåŠ¡æœºéƒ¨ç½²agent, æˆ–è€…ä½¿ç”¨libåº“å°è£…å‡½æ•°çš„æ–¹å¼ï¼Œæœ€ç»ˆéƒ½æ˜¯éœ€è¦æä¾›è·å–é…ç½®çš„æœåŠ¡æä¾›å¯¹åº”çš„æ¥å£ï¼Œæ¥ä¿è¯æ•´ä½“æœåŠ¡é…ç½®çš„ä¸€è‡´æ€§ï¼Œè¿™é‡Œé‡‡ç”¨libåº“å°è£…å‡½æ•°æä¾›ç»™ä¸šåŠ¡æœåŠ¡å¯åŠ¨æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ–¹å¼ï¼Œæ˜¯å¦å¯åŠ¨å•ç‹¬å¯åŠ¨ç«¯å£æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ˜¯åœ¨ä¸šåŠ¡æœåŠ¡ä¸­å¯åŠ¨ï¼Œå°±ç”¨ä¸šåŠ¡æœåŠ¡çš„ç«¯å£ï¼Œå¦‚æœæ˜¯å•ç‹¬agentæ–¹å¼å¯åŠ¨ï¼Œä½¿ç”¨å•ç‹¬çš„ç«¯å£ï¼›æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è·å–é…ç½®å¼€å§‹å‡†å¤‡æ›¿æ¢å·¥ä½œ prepareæ¥å£ /{serviceType}/localconf/prepare&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æäº¤æœ¬åœ°æ›¿æ¢å·¥ä½œ commitæ¥å£ /{serviceType}/localconf/commit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·å–æœ¬åœ°é…ç½®æ–‡ä»¶å…ƒæ•°æ®ï¼Œæ¯”å¦‚md5,è·¯å¾„,ç‰ˆæœ¬ç­‰ï¼Œmetaæ¥å£ /{serviceType}/localconf/meta&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ–½å·¥&#34;&gt;æ–½å·¥&lt;/h3&gt;
&lt;p&gt;å¯ä»¥è¿›è¡Œæ¨¡å—åˆ’åˆ†ï¼ŒæŒ‰äººåŠ›è¿›è¡Œåˆ†å·¥ï¼Œå¯ä»¥ç”¨Projectæˆ–è€…trelloè¿™äº›å·¥å…·æ¥ç®¡ç†æ•´ä¸ªé¡¹ç›®éœ€æ±‚ï¼Œå¼€å‘ï¼Œæµ‹è¯•ï¼Œä¸Šçº¿å‘¨æœŸï¼›ä¹Ÿå¯ä»¥å†…éƒ¨æ•´åˆjira å’Œ wiki ç­‰å¹³å°å·¥å…·è¿›è¡Œç®¡ç†;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæœ‰ç‚¹åƒå»ºç­‘æ–½å·¥é˜Ÿï¼Œæœ‰äº†è®¾è®¡ç¨¿ï¼Œæ¨æ¼”å‡ éï¼Œæ»¡è¶³æ•´ä½“éœ€æ±‚å’Œç›®æ ‡ï¼›å‰©ä¸‹çš„æ˜¯å»å®æ–½äº†ï¼Œå®æ–½çš„è¯éœ€è¦ï¼Œæ•´ä½“ç³»ç»Ÿæ¶æ„è®¾è®¡çš„å»ºç­‘å·¥ç¨‹å¸ˆğŸ‘·ï¼Œæ‡‚è¿™è¡Œå·¥å…·çš„ä¸“å·¥ğŸ‘·ï¼Œä»¥åŠé¢†é˜ŸåŒ…å·¥å¤´ğŸ‘·ï¼Œå¤§é¡¹ç›®å¯èƒ½è¿˜æœ‰é¡¹ç›®ç›‘å·¥ğŸ‘·â€â™€ï¸ï¼Œç›‘æ§è¿›åº¦ï¼Œä»¥åŠäº¤äº’åçš„è´¨é‡æŠŠæ§å·¥ç¨‹å¸ˆğŸ‘·ï¼›ä¸€èµ·é…åˆæŠŠäº‹å¹²å¥½ï¼Œè®©ç”¨æˆ·å’Œè€æ¿æ»¡æ„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;å‰æœŸä¸šåŠ¡ä¸ºäº†æ»¡è¶³å¿«é€Ÿä¸šåŠ¡è¿­ä»£ï¼Œä¸šåŠ¡åŠ¨æ€é…ç½®å¯èƒ½éƒ½æ˜¯éšç€ä¸šåŠ¡æœåŠ¡ä¸€èµ·ä¸Šçº¿ï¼Œæˆ–è€…é€šè¿‡å•ç‹¬çš„ä»£ç åº“è¿›è¡Œç®¡ç†åˆ†å¼€å•ç‹¬ä¸Šçº¿ï¼›è¿™ä¸ªå¯èƒ½ä¼šå› ä¸ºä»£ç ä¸Šçº¿äº†ï¼Œä½†æ˜¯é…ç½®å¿˜è®°ä¸Šçº¿çš„æƒ…å†µï¼›æˆ–è€…åªéœ€è¦ä¿®æ”¹é…ç½®ä¸Šçº¿ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä¹Ÿéœ€è¦å•ç‹¬éƒ¨ç½²ä¸€æ¬¡ä¸šåŠ¡æœåŠ¡ï¼Œå¦‚æœæ¶‰åŠå¤šä¸ªæœåŠ¡æ¨¡å—ï¼Œä¸èƒ½åŠæ—¶å“åº”äº†ï¼Œä¸å¤ŸKISSï¼›ä¸ºäº†æ»¡è¶³ä¸šåŠ¡é›†ç¾¤é…ç½®åŒ–ç®¡ç†ï¼Œé…ç½®å¹³å°éœ€è¦ç®¡ç†ä¸šåŠ¡åŠ¨æ€é…ç½®æ¥æé«˜äººæ•ˆï¼Œä¿è¯ä¸šåŠ¡é›†ç¾¤ä¸Šçº¿é…ç½®çš„æ•´ä½“ä¸€è‡´ï¼Œé€šè¿‡åå°é¡µé¢æ¥ç®¡ç†é…ç½®å’Œå†å²é…ç½®ï¼Œè¿½è¸ªé…ç½®çš„ä¿®æ”¹æƒ…å†µï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€æ¬¡ä¸Šçº¿çš„é…ç½®ï¼Œå¯ä»¥å…ˆåœ¨æµ‹è¯•ç¯å¢ƒé…ç½®å¹³å°ä¸Šé…ç½®å¥½ï¼Œæµ‹è¯•å¥½ä¹‹åï¼Œåœ¨åˆ°çº¿ä¸Šå¹³å°é…ç½®å‘å¸ƒä¸Šçº¿ï¼Œç„¶ååœ¨éƒ¨ç½²ä¸šåŠ¡æœåŠ¡ä»£ç ï¼›å‘å¸ƒé…ç½®ä¹Ÿéœ€è¦åœ¨çº¿ä¸Šæœªæ¥å…¥æµé‡çš„æœºå™¨ä¸Šï¼Œæµ‹è¯•ä¹‹åæ‰èƒ½ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;qa&#34;&gt;Q&amp;amp;A&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨etcdæ¥ç®¡ç†é…ç½®å‘¢ï¼Ÿå»æ‰mysql, é…ç½®ç›´æ¥å­˜etcdä¸è¡Œä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ˜¯å› ä¸ºmysqlç”¨æ¥æä¾›ç®¡ç†é…ç½®å®ä½“çš„å…³ç³»ï¼Œç”¨äºåå°é¡µé¢ä¿®æ”¹ä½¿ç”¨ï¼›å¦‚æœæ˜¯k8sä¸­çš„åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨etcdæ¥å­˜æ”¾(100Gä»¥ä¸‹çš„æ•°æ®, å¤§å‚å¤šæœºæˆ¿å¤§é›†ç¾¤ä¼šé­”æ”¹etcd)ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä¸šåŠ¡æœåŠ¡éƒ¨ç½²åœ¨Podå®¹å™¨ä¸­, æ€ä¹ˆæ›´æ–°é…ç½®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;agenté€šè¿‡DaemonSetå®¹å™¨åŒ–éƒ¨ç½²,å•ç‹¬å‡çº§, agentä¸ä¸šåŠ¡Podä¹‹é—´é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡æ›´æ–°é…ç½®ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥SideCar Containeræ–¹å¼å°†agentä¸ä¸šåŠ¡Containeréƒ¨ç½²åœ¨åŒä¸€Podä¸­ï¼Œåˆ©ç”¨Podçš„å…±äº«IPCç‰¹æ€§åŠMemory Medium EmptyDir Volumeæ–¹å¼å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡æ›´æ–°é…ç½®ï¼Œéšä¸šåŠ¡å®¹å™¨åŒ–éƒ¨ç½²ä¸Šçº¿ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;agenté€šè¿‡&lt;a href=&#34;https://github.com/openkruise/kruise&#34;&gt;OpenKruise&lt;/a&gt; SidecarSetéƒ¨ç½²åœ¨SideCarå®¹å™¨ä¸­ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;references&#34;&gt;references&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Qihoo360/QConf/wiki&#34;&gt;QConf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.apolloconfig.com/#/zh/design/apollo-design&#34;&gt;apollo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://icyfenix.cn/distribution/connect/service-discovery.html&#34;&gt;å‡¤å‡°æ¶æ„-service-discovery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://time.geekbang.org/column/article/341060&#34;&gt;etcd-watch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://redisbook.readthedocs.io/en/latest/feature/pubsub.html&#34;&gt;redis-pub/sub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;amp;mid=2247490475&amp;amp;idx=2&amp;amp;sn=83e79449b409c363239de1b37b96f8c8&#34;&gt;Service Mesh åœ¨è¶…å¤§è§„æ¨¡åœºæ™¯ä¸‹çš„è½åœ°æŒ‘æˆ˜&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>å…±äº«å†…å­˜ä¸å†…å­˜æ˜ å°„(mmap)</title>
      <link>https://weedge.github.io/%E8%BD%AC%E8%BD%BD/mmap/</link>
      <pubDate>Tue, 16 Nov 2021 11:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/%E8%BD%AC%E8%BD%BD/mmap/</guid>
      
        <description>&lt;h2 id=&#34;åºè¨€&#34;&gt;åºè¨€&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;from: &lt;a href=&#34;https://www.cnblogs.com/huangfuyuan/p/9476951.html&#34;&gt;https://www.cnblogs.com/huangfuyuan/p/9476951.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¦–å…ˆå…³äºå…±äº«å†…å­˜çš„é“¾æ¥ï¼š&lt;a href=&#34;http://blog.csdn.net/qq_26768741/article/details/56014845&#34;&gt;å…±äº«å†…å­˜&lt;/a&gt;ã€‚&lt;strong&gt;é‡Œé¢åŒ…å«äº†åˆ›å»ºå…±äº«å†…å­˜åŒºåŸŸçš„å‡½æ•°ï¼Œä»¥åŠä¸¤ä¸ªè¿›ç¨‹æ€ä¹ˆæŒ‚è½½å…±äº«å†…å­˜é€šä¿¡ï¼Œåˆ†ç¦»ã€é‡Šæ”¾å…±äº«å†…å­˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…±äº«å†…å­˜çš„å¥½å¤„å°±æ˜¯æ•ˆç‡é«˜ï¼Œä¸éœ€è¦å¤ªå¤šæ¬¡çš„è¿›è¡Œæ•°æ®çš„copyã€‚å¯ä»¥ç›´æ¥è¿›è¡Œè¯»å†™å†…å­˜ã€‚æ‰€ä»¥ï¼Œç›¸å¯¹æ¥è¯´åœ¨IPCè¿›ç¨‹é—´é€šä¿¡ä¸‰å¤§ä¸»é¢˜ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¿¡å·é‡ï¼Œå…±äº«å†…å­˜ï¼‰é‡Œé¢ï¼Œå…±äº«å†…å­˜è¦æ¯”æ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨å¤šï¼Œè€Œä¸”æ¶ˆæ¯é˜Ÿåˆ—åªåœ¨æœ‰è¡€ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ï¼›ä½†æ˜¯ï¼Œå…±äº«å†…å­˜ä¸ä¿è¯åŒæ­¥ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·é‡æ¥ä¿è¯å…±äº«å†…å­˜åŒæ­¥ã€‚&lt;strong&gt;Linuxä¸­çš„ä¸¤ç§å…±äº«å†…å­˜&lt;/strong&gt;ã€‚ä¸€ç§æ˜¯æˆ‘ä»¬çš„IPCé€šä¿¡System Vç‰ˆæœ¬çš„å…±äº«å†…å­˜ï¼Œå¦å¤–çš„ä¸€ç§å°±æ˜¯æˆ‘ä»¬ä»Šå¤©æåˆ°çš„å­˜å‚¨æ˜ å°„I/Oï¼ˆmmapå‡½æ•°ï¼‰ï¼Œå½“ç„¶è¿˜æœ‰ä¸€ç§POSIXçš„å…±äº«å†…å­˜ï¼Œå®ƒæ˜¯åœ¨mmapåŸºç¡€ä¹‹ä¸Šæ„å»ºçš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;mmap&#34;&gt;mmap&lt;/h2&gt;
&lt;p&gt;mmap I/Oçš„æè¿°ç¬¦é—´æ¥è¯´æ˜å†…å­˜æ˜ å°„æ˜¯å¯¹æ–‡ä»¶æ“ä½œã€‚å¦å¤–ï¼Œmmapå¦å¤–å¯ä»¥åœ¨æ— äº²ç¼˜çš„è¿›ç¨‹ä¹‹é—´æä¾›å…±äº«å†…å­˜åŒºã€‚è¿™æ ·ï¼Œç±»ä¼¼çš„ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å°±æ˜¯å¯ä»¥è¿›è¡Œäº†é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;Linuxæä¾›äº†å†…å­˜æ˜ å°„å‡½æ•°mmap, å®ƒæŠŠæ–‡ä»¶å†…å®¹æ˜ å°„åˆ°ä¸€æ®µå†…å­˜ä¸Š(å‡†ç¡®è¯´æ˜¯&lt;strong&gt;è™šæ‹Ÿå†…å­˜&lt;/strong&gt;ä¸Šï¼Œè¿è¡Œç€è¿›ç¨‹), &lt;strong&gt;é€šè¿‡å¯¹è¿™æ®µå†…å­˜çš„è¯»å–å’Œä¿®æ”¹, å®ç°å¯¹æ–‡ä»¶çš„è¯»å–å’Œä¿®æ”¹&lt;/strong&gt;ã€‚mmap()ç³»ç»Ÿè°ƒç”¨ä½¿å¾—è¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡æ˜ å°„ä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶å®ç°å…±äº«å†…å­˜ã€‚&lt;strong&gt;æ™®é€šæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´åï¼Œè¿›ç¨‹å¯ä»¥åƒè®¿é—®å†…å­˜çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè®¿é—®ï¼Œä¸éœ€è¦å…¶ä»–å†…æ ¸æ€çš„ç³»ç»Ÿè°ƒç”¨(read,write)å»æ“ä½œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ˜¯è®²è®¾å¤‡æˆ–è€…ç¡¬ç›˜å­˜å‚¨çš„ä¸€å—ç©ºé—´æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œç„¶åæ“ä½œè¿™å—ç‰©ç†å†…å­˜å°±æ˜¯åœ¨æ“ä½œå®é™…çš„ç¡¬ç›˜ç©ºé—´ï¼Œä¸éœ€è¦ç»è¿‡å†…æ ¸æ€ä¼ é€’ã€‚æ¯”å¦‚ä½ çš„ç¡¬ç›˜ä¸Šæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨linuxç³»ç»Ÿæä¾›çš„mmapæ¥å£ï¼Œå°†è¿™ä¸ªæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹ä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™å—ç©ºé—´ä¼šå¯¹åº”ä¸€å—ç‰©ç†å†…å­˜ï¼Œå½“ä½ è¯»å†™è¿™å—ç‰©ç†ç©ºé—´çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨è¯»å–å®é™…çš„ç£ç›˜æ–‡ä»¶ï¼Œå°±æ˜¯è¿™ä¹ˆç›´æ¥é«˜æ•ˆã€‚&lt;strong&gt;é€šå¸¸è¯¸å¦‚å…±äº«åº“çš„åŠ è½½éƒ½æ˜¯é€šè¿‡å†…å­˜æ˜ å°„çš„æ–¹å¼åŠ è½½åˆ°ç‰©ç†å†…å­˜çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;mmapç³»ç»Ÿè°ƒç”¨å¹¶ä¸å®Œå…¨æ˜¯ä¸ºäº†å…±äº«å†…å­˜æ¥è®¾è®¡çš„ï¼Œå®ƒæœ¬èº«æä¾›äº†ä¸åŒäºä¸€èˆ¬å¯¹&lt;strong&gt;æ™®é€šæ–‡ä»¶&lt;/strong&gt;çš„è®¿é—®çš„æ–¹å¼ï¼Œè¿›ç¨‹å¯ä»¥åƒè¯»å†™å†…å­˜ä¸€æ ·å¯¹æ™®é€šæ–‡ä»¶è¿›è¡Œæ“ä½œï¼ˆæ— éœ€ç³»ç»Ÿè°ƒç”¨ï¼‰ï¼ŒIPCçš„å…±äº«å†…å­˜æ˜¯çº¯ç²¹ä¸ºäº†å…±äº«ã€‚&lt;/p&gt;
&lt;h3 id=&#34;mmapç³»ç»Ÿè°ƒç”¨ä»‹ç»&#34;&gt;mmapç³»ç»Ÿè°ƒç”¨ä»‹ç»&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯mmapç³»ç»Ÿè°ƒç”¨çš„æ¥å£ï¼Œmmapå‡½æ•°æˆåŠŸè¿”å›æŒ‡å‘å†…å­˜åŒºåŸŸçš„æŒ‡é’ˆï¼Œå¤±è´¥è¿”å›MAP_FAILEDã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;addrï¼ŒæŸä¸ªç‰¹å®šçš„åœ°å€ä½œä¸ºèµ·å§‹åœ°å€ï¼Œå½“è¢«è®¾ç½®ä¸ºNULLï¼Œæ ‡è¯†ç³»ç»Ÿè‡ªåŠ¨åˆ†é…åœ°å€ã€‚å®å®åœ¨åœ¨çš„ç‰©ç†åŒºåŸŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;lengthè¯´çš„æ˜¯å†…å­˜æ®µçš„é•¿åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;protæ˜¯ç”¨æ¥è®¾å®šå†…å­˜æ®µçš„è®¿é—®æƒé™ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;protå‚æ•°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;PROT_READ&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µå¯è¯»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PROT_WRITE&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µå¯å†™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PROT_EXEC&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µå¯æ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PROT_NONE&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µä¸èƒ½è¢«è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdå‚æ•°æ˜¯ç”¨æ¥è¢«æ˜ å°„æ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚é€šè¿‡openç³»ç»Ÿè°ƒç”¨å¾—åˆ°ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;flagså‚æ•°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;MAP_SHARED&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹é—´å…±äº«å†…å­˜ï¼Œå¯¹è¯¥å†…å­˜æ®µä¿®æ”¹åæ˜ åˆ°æ˜ å°„æ–‡ä»¶ä¸­ã€‚æä¾›äº†POSIXå…±äº«å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAP_PRIVATE&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µä¸ºè°ƒç”¨è¿›ç¨‹æ‰€ç§æœ‰ã€‚å¯¹è¯¥å†…å­˜æ®µçš„ä¿®æ”¹ä¸ä¼šåæ˜ åˆ°æ˜ å°„æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAP_ANNOYMOUS&lt;/td&gt;
&lt;td&gt;è¿™æ®µå†…å­˜ä¸æ˜¯ä»æ–‡ä»¶æ˜ å°„è€Œæ¥çš„ã€‚å†…å®¹è¢«åˆå§‹åŒ–ä¸ºå…¨0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAP_FIXED&lt;/td&gt;
&lt;td&gt;å†…å­˜æ®µå¿…é¡»ä½äºstartå‚æ•°æŒ‡å®šçš„åœ°å€å¤„ï¼Œstartå¿…é¡»æ˜¯é¡µå¤§å°çš„æ•´æ•°å€ï¼ˆ4Kæ•´æ•°å€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAP_HUGETLB&lt;/td&gt;
&lt;td&gt;æŒ‰ç…§å¤§å†…å­˜é¡µé¢æ¥åˆ†é…å†…å­˜ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;offsetè®¾å®šä»ä½•å¤„è¿›è¡Œæ˜ å°„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mmapç”¨äºå…±äº«å†…å­˜çš„æ–¹å¼&#34;&gt;mmapç”¨äºå…±äº«å†…å­˜çš„æ–¹å¼&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡ä»¶è¿›è¡Œæä¾›å†…å­˜æ˜ å°„ï¼Œä¾‹å¦‚ï¼Œopenç³»ç»Ÿè°ƒç”¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åè¿›è¡Œmmapæ“ä½œï¼Œå¾—åˆ°å…±äº«å†…å­˜ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨äºä»»ä½•è¿›ç¨‹ä¹‹é—´ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥ä½¿ç”¨ç‰¹æ®Šæ–‡ä»¶è¿›è¡ŒåŒ¿åå†…å­˜æ˜ å°„ï¼Œè¿™ä¸ªç›¸å¯¹çš„æ˜¯å…·æœ‰è¡€ç¼˜å…³ç³»çš„è¿›ç¨‹ä¹‹é—´ï¼Œå½“çˆ¶è¿›ç¨‹è°ƒç”¨mmapï¼Œç„¶åè¿›è¡Œforkï¼Œè¿™æ ·çˆ¶è¿›ç¨‹åˆ›å»ºçš„å­è¿›ç¨‹ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹åŒ¿åæ˜ å°„åçš„åœ°å€ç©ºé—´ï¼Œè¿™æ ·ï¼Œçˆ¶å­è¿›ç¨‹ä¹‹é—´å°±å¯ä»¥è¿›è¡Œé€šä¿¡äº†ã€‚ç›¸å½“äºæ˜¯mmapçš„è¿”å›åœ°å€æ­¤æ—¶æ˜¯çˆ¶å­è¿›ç¨‹åŒæ—¶æ¥ç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦å¤–&lt;a href=&#34;https://www.cnblogs.com/LubinLew/p/POSIX-shared_memory.html&#34;&gt;POSIXç‰ˆæœ¬çš„å…±äº«å†…å­˜&lt;/a&gt;åº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨äº†mmapã€‚æ‰€ä»¥ï¼Œå…±äº«å†…å­˜åœ¨åœ¨posixä¸Šä¸€å®šç¨‹åº¦ä¸Šå°±æ˜¯æŒ‡çš„å†…å­˜æ˜ å°„äº†&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;mmapå’Œsystem-vå…±äº«å†…å­˜çš„æ¯”è¾ƒ&#34;&gt;mmapå’ŒSystem Vå…±äº«å†…å­˜çš„æ¯”è¾ƒ&lt;/h2&gt;
&lt;h3 id=&#34;system-vç‰ˆæœ¬çš„å…±äº«å†…å­˜ä»¥ä¸‹æˆ‘ä»¬ç»Ÿç§°ä¸ºshm&#34;&gt;System Vç‰ˆæœ¬çš„å…±äº«å†…å­˜ï¼ˆä»¥ä¸‹æˆ‘ä»¬ç»Ÿç§°ä¸ºshmï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/lienhui68/picStore/raw/master/null/20200917180539.png&#34; alt=&#34;https://gitee.com/lienhui68/picStore/raw/master/null/20200917180539.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;mmapç‰ˆæœ¬çš„å…±äº«å†…å­˜&#34;&gt;mmapç‰ˆæœ¬çš„å…±äº«å†…å­˜&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/lienhui68/picStore/raw/master/null/20200917180729.png&#34; alt=&#34;https://gitee.com/lienhui68/picStore/raw/master/null/20200917180729.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;mmapæ˜¯åœ¨ç£ç›˜ä¸Š&lt;strong&gt;å»ºç«‹ä¸€ä¸ªæ–‡ä»¶&lt;/strong&gt;ï¼Œæ¯ä¸ªè¿›ç¨‹åœ°å€ç©ºé—´ä¸­å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´è¿›è¡Œæ˜ å°„ã€‚è€Œshmå…±äº«å†…å­˜ï¼Œæ¯ä¸ªè¿›ç¨‹æœ€ç»ˆä¼š&lt;strong&gt;æ˜ å°„åˆ°åŒä¸€å—ç‰©ç†å†…å­˜&lt;/strong&gt;ã€‚shmä¿å­˜åœ¨ç‰©ç†å†…å­˜ï¼Œè¿™æ ·è¯»å†™çš„é€Ÿåº¦è‚¯å®šè¦æ¯”ç£ç›˜è¦å¿«ï¼Œä½†æ˜¯å­˜å‚¨é‡ä¸æ˜¯ç‰¹åˆ«å¤§ã€‚&lt;/li&gt;
&lt;li&gt;ç›¸å¯¹äºshmæ¥è¯´ï¼Œmmapæ›´åŠ ç®€å•ï¼Œè°ƒç”¨æ›´åŠ æ–¹ä¾¿ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯å¤§å®¶éƒ½å–œæ¬¢ç”¨çš„åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;å¦å¤–mmapæœ‰ä¸€ä¸ªå¥½å¤„æ˜¯å½“æœºå™¨é‡å¯ï¼Œå› ä¸ºmmapæŠŠæ–‡ä»¶ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œè¿™ä¸ªæ–‡ä»¶è¿˜ä¿å­˜äº†æ“ä½œç³»ç»ŸåŒæ­¥çš„æ˜ åƒï¼Œæ‰€ä»¥mmapä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯shmgetåœ¨å†…å­˜é‡Œé¢å°±ä¼šä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;æ€»ä¹‹ï¼Œshmæ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹æ˜ å°„åˆ°æ­¤å¤„ã€‚å†…å­˜æ˜ å°„æ˜¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ˜ å°„åˆ°æ¯ä¸ªè¿›ç¨‹å¼€è¾Ÿçš„ç©ºé—´ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>å·¥å…·ç›’å­-ping/traceroute</title>
      <link>https://weedge.github.io/post/ping/</link>
      <pubDate>Mon, 15 Nov 2021 14:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/ping/</guid>
      
        <description>&lt;h2 id=&#34;åºè¨€&#34;&gt;åºè¨€&lt;/h2&gt;
&lt;p&gt;åœ¨è®¿é—®ç½‘ç»œæ˜¯å¦ok, é€šå¸¸å–œæ¬¢ç”¨ping å‘½ä»¤æ¥è®¿é—®&lt;code&gt;ping www.baidu.com&lt;/code&gt; çœ‹æ˜¯å¦å‡ºç°è¶…æ—¶ï¼›pingåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå¹³å°å®ç°æ–¹å¼å·®ä¸å¤šï¼Œåº•å±‚éƒ½æ˜¯ç”¨ICMPåè®®ï¼Œæ¯æ¬¡å‘ICMP ECHO_REQUEST packet (IPåœ°å€/Host, ttlï¼Œicmp_seqåºåˆ—å·ï¼Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/Round-trip_delay&#34;&gt;RTD/RTT&lt;/a&gt;(å¾€è¿”å»¶æ—¶)è®°å½• ),  è¿è¡Œç»“æŸåç»Ÿè®¡æ¯ä¸ªRTT, æœ€å¤§RTT, æœ€å°RTT, å¹³å‡RTT, &lt;a href=&#34;https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Welford&#34;&gt;æ ‡å‡†åå·®&lt;/a&gt;RTT, å‘é€/æ¥å—packetsæ€»æ•°ï¼Œä¸¢åŒ…ç‡ ç­‰æ•°æ®ï¼Œpingå·¥å…·åœ¨PING(8)ä¸­çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The ping utility uses the ICMP protocol&amp;rsquo;s mandatory ECHO_REQUEST datagram to elicit an ICMP ECHO_RESPONSE from a host or gateway.  ECHO_REQUEST datagrams  (&amp;ldquo;pings&#39;&#39;) have an IP and ICMP header, followed by a &amp;ldquo;struct timeval&#39;&#39; and then an arbitrary number of &amp;ldquo;pad&amp;rdquo; bytes used to fill out the packet.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;icmphttpsenwikipediaorgwikiinternet_control_message_protocol&#34;&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol&#34;&gt;ICMP&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®&lt;/strong&gt;ï¼ˆè‹±è¯­ï¼š&lt;strong&gt;I&lt;/strong&gt;nternet &lt;strong&gt;C&lt;/strong&gt;ontrol &lt;strong&gt;M&lt;/strong&gt;essage &lt;strong&gt;P&lt;/strong&gt;rotocolï¼Œç¼©å†™ï¼š&lt;strong&gt;ICMP&lt;/strong&gt;ï¼‰æ˜¯&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91&#34;&gt;äº’è”ç½‘&lt;/a&gt;åè®®æ—çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ã€‚å®ƒç”¨äº&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE&#34;&gt;ç½‘é™…åè®®&lt;/a&gt;ï¼ˆIPï¼‰ä¸­å‘é€æ§åˆ¶æ¶ˆæ¯ï¼Œæä¾›å¯èƒ½å‘ç”Ÿåœ¨é€šä¿¡ç¯å¢ƒä¸­çš„å„ç§é—®é¢˜åé¦ˆã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œä½¿ç®¡ç†è€…å¯ä»¥å¯¹æ‰€å‘ç”Ÿçš„é—®é¢˜ä½œå‡ºè¯Šæ–­ï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½è§£å†³ï¼›ä½¿ç”¨åœ¨ç½‘ç»œè®¾å¤‡ä¸Šï¼Œæ¯”å¦‚äº¤æ¢æœºï¼Œè·¯ç”±å™¨&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºæ¯›icmpè®¾è®¡åœ¨ç½‘ç»œå±‚å‘¢&#34;&gt;ä¸ºæ¯›ICMPè®¾è®¡åœ¨ç½‘ç»œå±‚å‘¢ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å› ä¸ºéœ€è¦ç›®çš„åœ°å€ip, é“¾è·¯å±‚æ— æ³•é€šè¿‡ip socketç¼–ç¨‹ï¼Œé‚£ä¸ºå•¥ä¸ç”¨é“¾è·¯å±‚çš„MACåœ°å€å‘¢ï¼Ÿå› ä¸ºé“¾è·¯å±‚çš„MACåœ°å€åªåœ¨å±€åŸŸç½‘å”¯ä¸€ï¼Œç”±äº¤æ¢æœºå­¦ä¹ ç¼“å­˜ç­–ç•¥å†³å®š(ä¼šç¼“å­˜MACåœ°å€ï¼Œç”¨äºè·³è½¬)ï¼Œå¦‚æœå¹¿åŸŸç½‘è®¿é—®ä¸åŒå±€åŸŸç½‘ï¼ŒMACåœ°å€å¯ä»¥ä¸å”¯ä¸€(ç½‘ç»œå†å²æ¼”å˜åŸå› )ï¼Œä½†æ˜¯å…¬ç½‘IPåœ°å€æ˜¯å…¨å±€å”¯ä¸€ï¼Œç›¸äº’è½¬åŒ–é€šè¿‡NATè·¯ç”±å™¨(å…·ä½“ä»‹ç»çœ‹wiki: &lt;strong&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Network_address_translation&#34;&gt;Network address translation&lt;/a&gt;&lt;/strong&gt;)ï¼› å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/lib/main/net/NAT.png&#34; alt=&#34;NAT&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨ä¼ è¾“å±‚çš„è¯ï¼Œæ— éœ€ç«¯å£å¤šäº†ä¸€æ¬¡è§£åŒ…ï¼›ICMPä¸&lt;a href=&#34;https://en.wikipedia.org/wiki/Transmission_Control_Protocol&#34;&gt;TCP&lt;/a&gt;ã€&lt;a href=&#34;https://en.wikipedia.org/wiki/User_Datagram_Protocol&#34;&gt;UDP&lt;/a&gt;ç­‰&lt;a href=&#34;https://en.wikipedia.org/wiki/Transport_protocol&#34;&gt;ä¼ è¾“åè®®&lt;/a&gt;ä¸åŒå› ä¸ºå®ƒé€šå¸¸ä¸ç”¨äºåœ¨ç³»ç»Ÿä¹‹é—´äº¤æ¢æ•°æ®ï¼Œä¹Ÿä¸ç»å¸¸è¢«æœ€ç»ˆç”¨æˆ·ç½‘ç»œåº”ç”¨ç¨‹åºä½¿ç”¨ï¼ˆé™¤äº†ä¸€äº›è¯Šæ–­å·¥å…·ï¼Œå¦‚&lt;a href=&#34;https://en.wikipedia.org/wiki/Ping_(networking_utility)&#34;&gt;ping&lt;/a&gt;å’Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/Traceroute&#34;&gt;traceroute&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ICMP ä¾é ipæ¥å®Œæˆå®ƒçš„ä»»åŠ¡ï¼Œå®ƒæ˜¯ipçš„ä¸»è¦éƒ¨åˆ†ã€‚å®ƒä¸ä¼ è¾“åè®®ï¼ˆå¦‚&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE&#34;&gt;TCP&lt;/a&gt;å’Œ&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE&#34;&gt;UDP&lt;/a&gt;ï¼‰æ˜¾è‘—ä¸åŒï¼šå®ƒä¸€èˆ¬ä¸ç”¨äºåœ¨ä¸¤ç‚¹é—´ä¼ è¾“æ•°æ®ã€‚å®ƒé€šå¸¸ä¸ç”±ç½‘ç»œç¨‹åºç›´æ¥ä½¿ç”¨ï¼Œé™¤äº† &lt;a href=&#34;https://zh.wikipedia.org/wiki/Ping&#34;&gt;ping&lt;/a&gt; å’Œ &lt;a href=&#34;https://zh.wikipedia.org/wiki/Traceroute&#34;&gt;traceroute&lt;/a&gt; è¿™ä¸¤ä¸ªç‰¹åˆ«çš„ä¾‹å­ã€‚ &lt;a href=&#34;https://zh.wikipedia.org/wiki/IPv4&#34;&gt;IPv4&lt;/a&gt;ä¸­çš„ICMPè¢«ç§°ä½œICMPv4ï¼Œ&lt;a href=&#34;https://zh.wikipedia.org/wiki/IPv6&#34;&gt;IPv6&lt;/a&gt;ä¸­çš„ICMPåˆ™è¢«ç§°ä½œ&lt;a href=&#34;https://zh.wikipedia.org/wiki/ICMPv6&#34;&gt;ICMPv6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pinghttpsenwikipediaorgwikiping_networking_utility&#34;&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Ping_(networking_utility)&#34;&gt;ping&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Ping (Packet Internet Grope)ï¼Œå› ç‰¹ç½‘åŒ…æ¢ç´¢å™¨ï¼Œç”¨äºæµ‹è¯•ç½‘ç»œè¿æ¥é‡çš„ç¨‹åºã€‚Pingå‘é€ä¸€ä¸ªICMPå›å£°è¯·æ±‚æ¶ˆæ¯ç»™ç›®çš„åœ°å¹¶æŠ¥å‘Šæ˜¯å¦æ”¶åˆ°æ‰€å¸Œæœ›çš„ICMPå›å£°åº”ç­”ï¼›å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/lib/main/net/ping-icmp.png&#34; alt=&#34;ping-icmp&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TTL&lt;/strong&gt;ï¼š ç”Ÿå­˜æ—¶é—´ï¼ŒæŒ‡å®š&lt;!-- raw HTML omitted --&gt;æ•°æ®åŒ…è¢«è·¯ç”±å™¨ä¸¢å¼ƒä¹‹å‰å…è®¸é€šè¿‡çš„ç½‘æ®µæ•°é‡&lt;!-- raw HTML omitted --&gt;ï¼›&lt;!-- raw HTML omitted --&gt;&lt;strong&gt;TTL æ˜¯ç”±å‘é€ä¸»æœºè®¾ç½®çš„ï¼Œå½“å…¶å­˜æ´»æ¬¡æ•°ä¸º0æ—¶ï¼Œè·¯ç”±å™¨ä¾¿ä¼šå–æ¶ˆæ•°æ®åŒ…å¹¶å‘é€ä¸€ä¸ªICMP TTLæ•°æ®åŒ…ç»™åŸæ•°æ®åŒ…çš„å‘å‡ºè€…, ä»¥é˜²æ­¢æ•°æ®åŒ…ä¸æ–­åœ¨ ip äº’è”ç½‘ç»œä¸Šæ°¸ä¸ç»ˆæ­¢åœ°å¾ªç¯, è€Œæ— æ³•é€è¾¾åŠè€—å°½ç½‘ç»œèµ„æº&lt;/strong&gt;&lt;!-- raw HTML omitted --&gt;ã€‚è½¬å‘ ip æ•°æ®åŒ…æ—¶ï¼Œè¦æ±‚è·¯ç”±å™¨è‡³å°‘å°† TTL å‡å° 1ï¼›TTL å­—æ®µå€¼ä¸åŒæ“ä½œç³»ç»Ÿç±»å‹å¯¹åº”çš„å€¼ä¸åŒï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;ping 127.0.0.1&lt;/code&gt; æœ¬åœ°æ¥æŸ¥çœ‹åˆå§‹å€¼,æˆ–è€…&lt;code&gt;sysctl -a |grep ttl &lt;/code&gt;æŸ¥çœ‹å¯¹åº”å€¼(macOS Darwinä¸‹æ˜¯net.inet.ip.ttl, linuxä¸‹æ˜¯net.ipv4.ip_default_ttl)ï¼›å¦‚æœä¸ä¿®æ”¹è¿™äº›å€¼ï¼Œlinuxç³»ç»Ÿä¸€èˆ¬æ˜¯64ï¼Œwindowç³»ç»Ÿä¸€èˆ¬æ˜¯128ã€‚&lt;/p&gt;
&lt;h2 id=&#34;traceroutehttpsenwikipediaorgwikitraceroute&#34;&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Traceroute&#34;&gt;traceroute&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;tracerouteæ˜¯unixç³»ç»Ÿä¸­ï¼Œè¯Šæ–­&lt;a href=&#34;https://en.wikipedia.org/wiki/Computer_network&#34;&gt;è®¡ç®—æœºç½‘ç»œ&lt;/a&gt;çš„å‘½ä»¤ç¨‹åº(windosä¸­å¯¹åº”tracertå‘½ä»¤)ï¼›ç”¨äºæ˜¾ç¤ºå¯èƒ½çš„è·¯çº¿ï¼ˆè·¯å¾„ï¼‰å’Œæµ‹é‡çš„ä¼ é€å»¶è¿Ÿã€‚è·¯ç”±çš„å†å²è®°å½•ä¸ºä»è·¯ç”±ï¼ˆè·¯å¾„ï¼‰ä¸­æ¯ä¸ªè¿ç»­ä¸»æœºï¼ˆè¿œç¨‹èŠ‚ç‚¹ï¼‰æ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„å¾€è¿”æ¬¡æ•°ï¼›æ¯&lt;a href=&#34;https://en.wikipedia.org/wiki/Hop_(networking)&#34;&gt;è·³&lt;/a&gt;å¹³å‡æ—¶é—´çš„æ€»å’Œæ˜¯å»ºç«‹è¿æ¥æ‰€èŠ±è´¹çš„æ€»æ—¶é—´çš„åº¦é‡ï¼›å¦‚æœæ‰€æœ‰ï¼ˆé€šå¸¸æ˜¯ä¸‰ä¸ªï¼‰å‘é€çš„æ•°æ®åŒ…ä¸¢å¤±ä¸¤æ¬¡ä»¥ä¸Šï¼Œè¿æ¥å°±ä¼šä¸¢å¤±å¹¶ä¸”æ— æ³•è¯„ä¼°è·¯ç”±ï¼Œå¦åˆ™ Traceroute ä¼šç»§ç»­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»å«æ–¹é¦–å…ˆå‘å‡º TTL=1 çš„æ•°æ®åŒ…ï¼Œç¬¬ä¸€ä¸ªè·¯ç”±å™¨å°† TTL å‡1å¾—0åå°±ä¸å†ç»§ç»­è½¬å‘æ­¤æ•°æ®åŒ…ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª ICMP è¶…æ—¶æŠ¥æ–‡ï¼Œä¸»å«æ–¹ä»è¶…æ—¶æŠ¥æ–‡ä¸­å³å¯æå–å‡ºæ•°æ®åŒ…æ‰€ç»è¿‡çš„ç¬¬ä¸€ä¸ªç½‘å…³åœ°å€ã€‚ç„¶ååˆå‘å‡ºä¸€ä¸ª TTL=2 çš„ ICMP æ•°æ®åŒ…ï¼Œå¯è·å¾—ç¬¬äºŒä¸ªç½‘å…³åœ°å€ï¼Œä¾æ¬¡é€’å¢ TTL ä¾¿è·å–äº†æ²¿é€”æ‰€æœ‰ç½‘å…³åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ç½‘å…³éƒ½ä¼šå¦‚å®è¿”å› ICMP è¶…æ—¶æŠ¥æ–‡ã€‚å‡ºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œå¤§å¤šæ•°é˜²ç«å¢™ä»¥åŠå¯ç”¨äº†é˜²ç«å¢™åŠŸèƒ½çš„è·¯ç”±å™¨ç¼ºçœé…ç½®ä¸ºä¸è¿”å›å„ç§ ICMP æŠ¥æ–‡ï¼Œå…¶ä½™è·¯ç”±å™¨æˆ–&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E4%BA%A4%E6%8D%A2%E6%9C%BA&#34;&gt;äº¤æ¢æœº&lt;/a&gt;ä¹Ÿå¯è¢«ç®¡ç†å‘˜ä¸»åŠ¨ä¿®æ”¹é…ç½®å˜ä¸ºä¸è¿”å› ICMP æŠ¥æ–‡ã€‚å› æ­¤ Traceroute ç¨‹åºä¸ä¸€å®šèƒ½æ‹¿å…¨æ‰€æœ‰çš„æ²¿é€”ç½‘å…³åœ°å€ã€‚æ‰€ä»¥ï¼Œå½“æŸä¸ª TTL å€¼çš„æ•°æ®åŒ…å¾—ä¸åˆ°å“åº”æ—¶ï¼Œå¹¶ä¸èƒ½åœæ­¢è¿™ä¸€è¿½è¸ªè¿‡ç¨‹ï¼Œç¨‹åºä»ç„¶ä¼šæŠŠ TTL é€’å¢è€Œå‘å‡ºä¸‹ä¸€ä¸ªæ•°æ®åŒ…ã€‚ä¸€ç›´è¾¾åˆ°é»˜è®¤æˆ–ç”¨å‚æ•°æŒ‡å®šçš„è¿½è¸ªé™åˆ¶ï¼ˆmaximum_hopsï¼‰æ‰ç»“æŸè¿½è¸ªï¼ˆæ²¡æœ‰åˆ°è¾¾ç›®æ ‡ip, æ‰€ä»¥æ”¶ä¸åˆ°ç›®æ ‡ipçš„ICMPæŠ¥æ–‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€Œpingå·¥å…·åªè®¡ç®—ä»ç›®çš„åœ°ç‚¹çš„æœ€ç»ˆå¾€è¿”æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ping/tracerouteï¼Œä¸ä¸€å®šç”¨ç½‘ç»œå±‚çš„ICMPåè®®æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨ä¼ è¾“å±‚çš„&lt;a href=&#34;https://en.wikipedia.org/wiki/User_Datagram_Protocol&#34;&gt;UDPåè®®&lt;/a&gt;æ¥å®ç°((å‘é€tcpåè®®æŠ¥æ–‡),é»˜è®¤ä¸»ç›®çš„ä¸»æœºç«¯å£æ˜¯33434å¼€å§‹)ï¼Œè¿™ä¸ªç«¯å£æ˜¯æœ‰è®²ç©¶çš„ï¼›åˆ©ç”¨äº† UDP æ•°æ®åŒ…çš„ traceroute ç¨‹åºåœ¨æ•°æ®åŒ…åˆ°è¾¾çœŸæ­£çš„ç›®çš„ä¸»æœºæ—¶ï¼Œå°±å¯èƒ½å› ä¸ºè¯¥ä¸»æœºæ²¡æœ‰æä¾› &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE&#34;&gt;UDP&lt;/a&gt; æœåŠ¡è€Œç®€å•å°†æ•°æ®åŒ…æŠ›å¼ƒï¼Œå¹¶ä¸è¿”å›ä»»ä½•ä¿¡æ¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œtraceroute æ•…æ„ä½¿ç”¨äº†ä¸€ä¸ªå¤§äº 30000 çš„ç«¯å£å·(å›  UDP åè®®è§„å®šç«¯å£å·å¿…é¡»å°äº 30000)ï¼Œæ‰€ä»¥ç›®æ ‡ä¸»æœºæ”¶åˆ°æ•°æ®åŒ…åå”¯ä¸€èƒ½åšçš„äº‹å°±æ˜¯è¿”å›ä¸€ä¸ªâ€œç«¯å£ä¸å¯è¾¾(ICMP PORT_UNREACHABLE)â€çš„ ICMP æŠ¥æ–‡ï¼Œäºæ˜¯ä¸»å«æ–¹å°±å°†ç«¯å£ä¸å¯è¾¾æŠ¥æ–‡å½“ä½œè·Ÿè¸ªç»“æŸçš„æ ‡å¿—ã€‚&lt;/p&gt;
&lt;p&gt;ç”šè‡³tracerouteè¿˜ç”¨&lt;a href=&#34;https://en.wikipedia.org/wiki/Transmission_Control_Protocol&#34;&gt;TCPåè®®&lt;/a&gt;æ¥å®ç°(å‘é€tcpåè®®åŒ…)ï¼Œè¿™ä¸ªéœ€è¦çœ‹åœºæ™¯ä¸‹ï¼Œéœ€è¦è·å–çš„æµ‹è¯•ç›‘æ§æ•°æ®æ˜¯å“ªäº›ï¼Œæ˜¯å¦æœ‰å¿…è¦å»ºç«‹å¯é è¿æ¥ã€‚æ¯”å¦‚ä¸€äº›traceroute å®ç°ä½¿ç”¨TCP æ•°æ®åŒ…ï¼Œä¾‹å¦‚&lt;em&gt;tcptraceroute&lt;/em&gt;å’Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/Layer_four_traceroute&#34;&gt;ç¬¬å››å±‚traceroute&lt;/a&gt; (LFT)ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒ&lt;code&gt;man traceroute&lt;/code&gt; ä¸­çš„ä»‹ç»ï¼Œä»¥ä¸Šè¯´çš„ï¼Œåœ¨manæ–‡æ¡£é‡Œéƒ½æœ‰ä»‹ç»åˆ°ï¼›&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡&lt;code&gt;traceroute -P ICMP  www.baidu.com&lt;/code&gt; ä½¿ç”¨ICMPåè®®æ¥è¿½è¸ªæ¯ä¸€è·³çš„è·¯ç”±æƒ…å†µï¼›æ”¯æŒICMP, UDP(é»˜è®¤å‘é€æ–¹å¼), TCPåè®®ï¼Œå…·ä½“è§æ–‡æ¡£ï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœæƒ³æŸ¥çœ‹ICMPåè®®åŒ…çš„å†…å®¹å¯ä»¥é€šè¿‡&lt;a href=&#34;https://gitlab.com/wireshark/wireshark/-/wikis/home&#34;&gt;Wireshark/TShark(å‘½ä»¤)&lt;/a&gt;æ¥æŠ“åŒ…ï¼Œä¸»è¦æ˜¯é€šè¿‡&lt;strong&gt;åè®®æŠ¥æ–‡&lt;/strong&gt;ï¼Œæ¥åˆ†æç½‘ç»œé—®é¢˜ï¼›ä½ ä¼šå‘ç°ping å‘½ä»¤ç¨‹åºåªç”¨åˆ°äº†IP/ICMPåè®®(send Type: 8 (Echo (ping) request)ï¼›recv Type: 0 (Echo (ping) reply) from dst ip)ï¼Œ è€Œtraceroute å‘½ä»¤ç¨‹åºä¼šç”¨åˆ°IP/ICMP(send Type: 8 (Echo (ping) request)ï¼›recv Type: 11 (Time-to-live exceeded) code:0 from æ¯ä¸ªè·¯ç”±ï¼Œrecv Type: 0 (Echo (ping) reply) from dst ip), IP/UDPåè®®(å¦‚æœç”¨UDPå‘é€ï¼Œsend udp æ•°æ®æŠ¥æ–‡, recv Type: 11 (Time-to-live exceeded) code:0 from  æ¯ä¸ªè·¯ç”±ï¼Œ recv Type: 3 (Destination unreachable) code:3 from dst ip)ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥åˆ†æå‡ºï¼Œping å’Œ traceroute éƒ½ä½¿ç”¨IP/ICMPåè®®æ—¶ï¼Œtraceroute æ˜¯æ¥æ”¶äº†æ¯ä¸€è·³è·¯ç”±çš„å“åº”è¿›è¡Œå¤„ç†ï¼Œç„¶åå±•ç°çš„æ¯ä¸€è·³ç´¯è®¡çš„æ€»è€—æ—¶ã€‚æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/lib/main/net/traceroute-icmp.png&#34; alt=&#34;traceroute-icmp&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;è½®å­&#34;&gt;è½®å­&lt;/h2&gt;
&lt;p&gt;ä¸ºå•¥è¦ç”¨golangé‡æ–°å†™ä¸€ä¸ªå·¥å…·å‘¢ï¼Ÿ ï¼ˆå·²æœ‰å¼€æºçš„ &lt;a href=&#34;https://github.com/go-ping/ping.git&#34;&gt;go-ping&lt;/a&gt;, æ”¯æŒicmp, udp (icmp.ListenPacket &lt;a href=&#34;https://godoc.org/golang.org/x/net/icmp&#34;&gt;x/net/icmp&lt;/a&gt;) ç›´æ¥æŸ¥çœ‹æºç å§ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¹³æ—¶è™½ç„¶ç”¨ï¼Œä½†æ˜¯å…·ä½“å®ç°æƒ³äº†è§£ä¸‹ï¼Œä¸»è¦æ˜¯&lt;a href=&#34;https://en.wikipedia.org/w/index.php?title=Internet_Control_Message_Protocol&#34;&gt;ICMPåè®®&lt;/a&gt;ä¸­çš„æ§åˆ¶ä¿¡æ¯(&lt;a href=&#34;https://en.wikipedia.org/w/index.php?title=Internet_Control_Message_Protocol#Control_messages&#34;&gt;Control messages&lt;/a&gt;), ä»¥ä¾¿åœ¨æ¬¡åè®®ä¸ŠDIYç½‘ç»œéœ€æ±‚ï¼›&lt;/li&gt;
&lt;li&gt;golangæ˜¯è·¨ç³»ç»Ÿå¹³å°ç¼–è¯‘è¯­è¨€ï¼ŒåŒä¸€ä»½ä»£ç ç¼–è¯‘è¿è¡Œåœ¨ä¸åŒå¹³å°ï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥åšä¸€äº›æ‰©å±•ï¼Œè¿ç”¨åœ¨K8Sçš„ç¼–æ’å®¹å™¨ä¸­æµ‹è¯•ç½‘ç»œç¯å¢ƒï¼›å› ä¸ºicmpå®šä¹‰åœ¨ç½‘ç»œå±‚ï¼Œåªéœ€ipï¼Œæ— éœ€æœåŠ¡ç«¯å£ï¼Œåˆ©ç”¨icmpåè®®åšä¸€äº›æ‰©å±•åŠŸèƒ½ï¼›æ¯”å¦‚æœºå™¨æ˜¯å¦æŒ‚äº†ï¼Œç›®çš„ipæ˜¯å¦ä¸å¯åˆ°è¾¾äº†ï¼Œä»¥åŠåšä¸€äº›ç½‘ç»œå±‚ç›‘æ§ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;reference&#34;&gt;reference&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Ping_(networking_utility)&#34;&gt;PING&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol&#34;&gt;ICMP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.techtarget.com/searchnetworking/definition/time-to-live&#34;&gt;TTL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Network_address_translation&#34;&gt;NAT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=IIicPE38O-s&#34;&gt;PING Command - Troubleshooting&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>ç¼“å­˜æ·˜æ±°ç­–ç•¥-LRU</title>
      <link>https://weedge.github.io/post/lru/</link>
      <pubDate>Mon, 08 Nov 2021 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/lru/</guid>
      
        <description>&lt;h2 id=&#34;åºè¨€&#34;&gt;åºè¨€&lt;/h2&gt;
&lt;p&gt;â€‹	åœ¨è®¡ç®—æœºç¡¬ä»¶ä¸­ç¼“/å†…å­˜è®¾è®¡æ˜¯ç”¨æ¥æœºå™¨å¯åŠ¨çš„æ—¶å€™åŠ è½½ç¨‹åºï¼Œåˆ†é…è¿è¡Œç©ºé—´æ•°æ®ï¼Œåœæœºï¼Œç¼“/å†…å­˜ä¸­çš„æ•°æ®ä¼šä¸¢å¤±ï¼›ç£ç›˜ç”¨æ¥æŒä¹…åŒ–å­˜å‚¨ï¼Œæä¾›æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦æ¯”ç£ç›˜å¿«å¾ˆå¤šï¼Œä»¥ä¸‹æ˜¯&lt;a href=&#34;https://research.google/people/jeff/&#34;&gt;Jeff Dean&lt;/a&gt;  &amp;ldquo;&lt;a href=&#34;http://brenocon.com/dean_perf.html&#34;&gt;Numbers Everyone Should Know&lt;/a&gt;&amp;rdquo; ä¸­æä¾›çš„æ•°æ®(è™½ç„¶è¿‡å»10å¤šå¹´äº†)ï¼Œ è¯»å–1MBæ•°æ®ï¼Œä»å†…å­˜ä¸­è¯»æ¯”ä»ç£ç›˜ä¸­è¯»å–å¿«100+å€ï¼›ä½†æ˜¯ç¼“/å†…å­˜çš„ç©ºé—´æ¯”ç£ç›˜ç©ºé—´å°‘ï¼Œä¸ºäº†åŠ å¿«æ•°æ®çš„è®¿é—®ï¼Œå‡å°‘ç¼“å­˜/ç£ç›˜ioï¼Œå¤§æ¦‚åˆ†ä¸ºä¸‰ç§ï¼š1. å¯ä»¥æå‰å°†æ•°æ®ä»ç£ç›˜åŠ è½½åˆ°å†…/ç¼“å­˜ä¸­(page)ã€2. å†…/ç¼“å­˜missä»ä¸‹å±‚å­˜å‚¨è·å–æ•°æ®(cache,pool,page)ã€3. æ— éœ€åŠ è½½ï¼Œç›´æ¥å†…/ç¼“å­˜evictï¼›å¦‚æœæä¾›ç»™è¿›ç¨‹çš„æœ€å¤§å†…/ç¼“å­˜èµ„æºåˆ°äº†æœ€å¤§é™åˆ¶ï¼Œéœ€è¦å¯¹å­˜å‚¨èµ„æºè¿›è¡Œevictæ“ä½œï¼Œå¸¸ç”¨çš„evictç­–ç•¥å¯ä»¥ä»&lt;a href=&#34;https://en.wikipedia.org/wiki/Cache_replacement_policies&#34;&gt;Cache_replacement_policies&lt;/a&gt;ä¸­äº†è§£ï¼›æœ‰å…³ç‰¹å®šäºåˆ†é¡µçš„è¯¦ç»†ç®—æ³•ï¼Œè¯·å‚é˜…&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm&#34;&gt;é¡µé¢æ›¿æ¢ç®—æ³•&lt;/a&gt;ï¼›æœ‰å…³ç‰¹å®šäº CPU å’Œ RAM ä¹‹é—´ç¼“å­˜çš„è¯¦ç»†ç®—æ³•ï¼Œè¯·å‚é˜…&lt;a href=&#34;https://en.wikipedia.org/wiki/CPU_cache&#34;&gt;CPU ç¼“å­˜&lt;/a&gt;ã€‚è¿™é‡Œä¸»è¦å…³æ³¨LRU evictç›¸å…³ç­–ç•¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;OP(io)&lt;/th&gt;
&lt;th&gt;cost&lt;!-- raw HTML omitted --&gt;ï¼ˆ1s= 10^9ns)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;L1 cache reference è¯»å–CPUçš„ä¸€çº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;0.5 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Branch mispredict(è½¬ç§»ã€åˆ†æ”¯é¢„æµ‹)&lt;/td&gt;
&lt;td&gt;5 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;L2 cache reference è¯»å–CPUçš„äºŒçº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;7 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mutex lock/unlock äº’æ–¥é”\è§£é”&lt;/td&gt;
&lt;td&gt;100 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Main memory reference è¯»å–å†…å­˜æ•°æ®&lt;/td&gt;
&lt;td&gt;100 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Compress 1K bytes with Zippy 1kå­—èŠ‚å‹ç¼©&lt;/td&gt;
&lt;td&gt;10,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Send 2K bytes over 1 Gbps network åœ¨1Gbpsçš„ç½‘ç»œä¸Šå‘é€2kå­—èŠ‚&lt;/td&gt;
&lt;td&gt;20,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Read 1 MB sequentially from memory ä»å†…å­˜é¡ºåºè¯»å–1MB&lt;/td&gt;
&lt;td&gt;250,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Round trip within same datacenter ä»ä¸€ä¸ªæ•°æ®ä¸­å¿ƒå¾€è¿”ä¸€æ¬¡ï¼Œpingä¸€ä¸‹&lt;/td&gt;
&lt;td&gt;500,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Disk seek  ç£ç›˜æœç´¢&lt;/td&gt;
&lt;td&gt;10,000,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Read 1 MB sequentially from network ä»ç½‘ç»œä¸Šé¡ºåºè¯»å–1å…†çš„æ•°æ®&lt;/td&gt;
&lt;td&gt;10,000,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Read 1 MB sequentially from disk ä»ç£ç›˜é‡Œé¢è¯»å‡º1MB&lt;/td&gt;
&lt;td&gt;30,000,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Send packet CA-&amp;gt;Netherlands-&amp;gt;CA ä¸€ä¸ªåŒ…çš„ä¸€æ¬¡è¿œç¨‹è®¿é—®&lt;/td&gt;
&lt;td&gt;150,000,000 ns&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;lruç®—æ³•&#34;&gt;LRUç®—æ³•&lt;/h2&gt;
&lt;p&gt;â€‹	LRU(least recently used)æ˜¯ä¸€ç§ç¼“å­˜ evict ç­–ç•¥ç®—æ³•ï¼šåœ¨ç¼“å­˜æœ‰é™çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰æ–°çš„æ•°æ®éœ€è¦åŠ è½½è¿›ç¼“å­˜ï¼Œåˆ™éœ€è¦å°†æœ€ä¸å¯èƒ½è¢«ç»§ç»­è®¿é—®çš„ç¼“å­˜å‰”é™¤æ‰ã€‚è¿™æ˜¯ä¸€ç§æå‰é¢„åˆ¤å‡è®¾çš„ç®—æ³•ï¼Œå› ä¸ºç¼“å­˜æ˜¯å¦å¯èƒ½è¢«è®¿é—®åˆ°æ²¡æ³•åšé¢„æµ‹çš„ï¼Œæ‰€ä»¥å‡è®¾ &lt;strong&gt;ä¸€ä¸ªkeyç»å¸¸è¢«è®¿é—®ï¼Œé‚£ä¹ˆè¯¥keyçš„idle timeåº”è¯¥æ˜¯æœ€å°çš„ã€‚&lt;/strong&gt; (ä½†è¿™ä¸ªå‡è®¾ä¹Ÿæ˜¯åŸºäºæ¦‚ç‡ï¼Œå¹¶ä¸æ˜¯å……è¦æ¡ä»¶,å¾ˆæ˜æ˜¾,idle timeæœ€å°çš„,ç”šè‡³éƒ½ä¸ä¸€å®šä¼šè¢«å†æ¬¡è®¿é—®åˆ°)ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	LRU çš„å·¥ä½œåŸç†æ˜¯ä¸€ç§æ—¶é—´å±€éƒ¨æ€§åŸç†çš„å‡è®¾ï¼Œåœ¨è¿‡å»çš„å‡ æ¡æŒ‡ä»¤ä¸­ä½¿ç”¨æœ€å¤šçš„é¡µé¢æœ€æœ‰å¯èƒ½åœ¨æ¥ä¸‹æ¥çš„å‡ æ¡æŒ‡ä»¤ä¸­ä¹Ÿè¢«å¤§é‡ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	å®ç°æ–¹å¼å¯ä»¥é‡‡ç”¨wikiä¸­çš„å®ç°ï¼Œæ¯ä¸ªç¼“å­˜itemä¸­æœ‰åºåˆ—å·(æ¯ä¸ªæ–°è®¿é—®çš„å¢é‡ä¸º 1)ï¼Œç¼“å­˜æ»¡äº†å°†åºåˆ—å·æœ€ä½çš„æ›¿æ¢æ‰ï¼Œè¿™ç§å®ç°éœ€è¦æ‰¾åˆ°æœ€ä½çš„è¿›è¡Œæ¯”è¾ƒæ›¿æ¢ï¼›è¿˜æœ‰ç§å®ç°å®ç°æ–¹å¼æ˜¯é€šè¿‡hashMap+åŒå‘é“¾è¡¨çš„æ–¹å¼å®ç°ï¼Œç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œ&lt;a href=&#34;https://leetcode-cn.com/problems/lru-cache/&#34;&gt;leetcodeä¸Šæœ‰è¿™é“é¢˜&lt;/a&gt;ï¼Œä¸€èˆ¬é¢è¯•ä¼šé—®åˆ°ï¼›&lt;/p&gt;
&lt;p&gt;å®é™…å·¥ç¨‹å®ç°ä¸­ï¼Œç”±äºå®ç°æˆæœ¬ï¼Œæ ¹æ®ä½¿ç”¨åœºæ™¯ï¼Œè€ƒè™‘ç©ºé—´åˆ©ç”¨å’Œæ—¶é—´çš„æŠ˜ä¸­ï¼Œä½¿ç”¨çš„&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm#Variants_on_LRU&#34;&gt;LRUç®—æ³•å˜ä½“&lt;/a&gt;ï¼š(ä»¥ä¸‹å®šä¹‰æ¥è‡ªwiki)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm#cite_note-15&#34;&gt;LRU-K&lt;/a&gt; é©±é€è¿‡å»ç¬¬ K æ¬¡æœ€è¿‘è®¿é—®æœ€è¿œçš„é¡µé¢ã€‚ä¾‹å¦‚ï¼ŒLRU-1 åªæ˜¯ LRUï¼Œè€Œ LRU-2 æ ¹æ®å€’æ•°ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶é—´é©±é€é¡µé¢ã€‚LRU-K åœ¨æ—¶é—´ä¸Šçš„å±€éƒ¨æ€§æ–¹é¢å¤§å¤§æ”¹è¿›äº† LRUã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm#cite_note-16&#34;&gt;ARC&lt;/a&gt; ç®—æ³•é€šè¿‡ä¿æŒæœ€è¿‘é©±é€é¡µé¢çš„å†å²å¯LRUï¼Œå¹¶ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥æ›´æ”¹çš„åå¥½è¿‘æœŸæˆ–é¢‘ç¹è®¿é—®ã€‚å®ƒå¯¹é¡ºåºæ‰«æç‰¹åˆ«æœ‰æŠµæŠ—åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm#cite_note-17&#34;&gt;2Q&lt;/a&gt; ç®—æ³•æ”¹è¿›äº† LRU å’Œ LRU/2 ç®—æ³•ã€‚é€šè¿‡å…·æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªç”¨äºçƒ­è·¯å¾„é¡¹ç›®ï¼Œå¦ä¸€ä¸ªç”¨äºæ…¢è·¯å¾„é¡¹ç›®ï¼Œé¡¹ç›®é¦–å…ˆè¢«æ”¾ç½®åœ¨æ…¢è·¯å¾„é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”åœ¨ç¬¬äºŒæ¬¡è®¿é—®æ”¾ç½®åœ¨çƒ­è·¯å¾„é¡¹ç›®ä¸­çš„é¡¹ç›®ä¹‹åï¼›ç”±äºå¯¹æ·»åŠ é¡¹çš„å¼•ç”¨æ¯” LRU å’Œ LRU/2 ç®—æ³•ä¸­çš„ä¿ç•™æ—¶é—´æ›´é•¿ï¼Œå› æ­¤å®ƒå…·æœ‰æ›´å¥½çš„çƒ­è·¯å¾„é˜Ÿåˆ—ï¼Œä»è€Œæé«˜äº†ç¼“å­˜çš„å‘½ä¸­ç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Cache_replacement_policies#Segmented_LRU_(SLRU)&#34;&gt;SLRU&lt;/a&gt; ç¼“å­˜åˆ†ä¸ºä¸¤ä¸ªæ®µï¼Œè¯•ç”¨æ®µå’Œä¿æŠ¤æ®µã€‚æ¯ä¸ªæ®µä¸­çš„è¡ŒæŒ‰ä»æœ€è¿‘è®¿é—®åˆ°æœ€è¿‘æœ€å°‘è®¿é—®çš„é¡ºåºæ’åˆ—ã€‚æ¥è‡ªæœªå‘½ä¸­çš„æ•°æ®è¢«æ·»åŠ åˆ°è¯•ç”¨æ®µæœ€è¿‘è®¿é—®çš„æœ«ç«¯çš„ç¼“å­˜ä¸­ã€‚å‘½ä¸­ä»å®ƒä»¬å½“å‰æ‰€åœ¨çš„ä»»ä½•åœ°æ–¹åˆ é™¤ï¼Œå¹¶æ·»åŠ åˆ°å—ä¿æŠ¤æ®µçš„æœ€è¿‘è®¿é—®ç«¯ã€‚å› æ­¤ï¼Œå—ä¿æŠ¤æ®µä¸­çš„è¡Œè‡³å°‘è¢«è®¿é—®äº†ä¸¤æ¬¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœ¬åœ°ç¼“å­˜ä¸­çš„å®ç°æœºåˆ¶&#34;&gt;æœ¬åœ°ç¼“å­˜ä¸­çš„å®ç°æœºåˆ¶&lt;/h2&gt;
&lt;p&gt;goè¯­è¨€å®ç°çš„æœ¬åœ°ç¼“å­˜ç­–ç•¥ä¸­æœ‰å¼€æºæ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/golang/groupcache&#34;&gt;https://github.com/golang/groupcache&lt;/a&gt;  (LRU)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://github.com/dgryski/go-s4lru&#34;&gt;http://github.com/dgryski/go-s4lru&lt;/a&gt; (S4LRU)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/dgryski/go-arc&#34;&gt;https://github.com/dgryski/go-arc&lt;/a&gt; (ARC)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/hashicorp/golang-lru&#34;&gt;https://github.com/hashicorp/golang-lru&lt;/a&gt; (LRU, ARC, TwoQueue)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/vmihailenco/go-cache-benchmark&#34;&gt;https://github.com/vmihailenco/go-cache-benchmark&lt;/a&gt; å¯¹ä¸åŒçš„cache æ·˜æ±°ç­–ç•¥çš„å¯¹æ¯”ï¼Œå¼•ç”¨ç»“æœï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TinyLFUæœ€é€‚åˆå°‘é‡çš„key(å°‘äº100k)ã€‚TinyLFUå†…å­˜å¼€é”€å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œè°ƒæ•´ã€‚
Clock-proæœ‰æ˜æ˜¾è¾ƒå°çš„å†…å­˜ä½¿ç”¨å¤§é‡çš„key(å½“keyçš„æ•°é‡è¶…è¿‡ 1m)ã€‚
åˆ†æ®µLRUçš„å†…å­˜ä½¿ç”¨é‡æ›´å°ï¼Œä½†å‘½ä¸­ç‡ä¸ä¸€è‡´ã€‚
å¦‚æœä½ éœ€è¦å®ƒæä¾›çš„é¢å¤–åŠŸèƒ½ï¼ŒRistrettoä»ç„¶æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å­˜å‚¨ç»„ä»¶ä¸­çš„å®ç°æœºåˆ¶&#34;&gt;å­˜å‚¨ç»„ä»¶ä¸­çš„å®ç°æœºåˆ¶&lt;/h2&gt;
&lt;h3 id=&#34;redis-dictsdsredisobject-lru-evictç­–ç•¥&#34;&gt;redis Dict(sds,redisObject) LRU evictç­–ç•¥&lt;/h3&gt;
&lt;p&gt;redis æ˜¯ç¼“å­˜æ•°æ®åº“ï¼Œç¼“å­˜ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥æŒ‡å®šæœ€å¤§å†…å­˜ä½¿ç”¨ç©ºé—´ï¼›redisæä¾›è¿‡æœŸæœºåˆ¶ï¼Œç»™keyåˆ¶å®šè¿‡æœŸæ—¶é—´ï¼Œrediså®ç°äº†åˆ é™¤è¿™äº›è¿‡æœŸkeyçš„åˆ é™¤ç­–ç•¥ï¼ˆå®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ï¼‰ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼Œå¯¹äºä¸€äº›keyæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ€»ä¼šåˆ°æœ€å¤§å†…å­˜ä½¿ç”¨ç©ºé—´ï¼Œéœ€è¦å®ç°å†…å­˜æ·˜æ±°å›æ”¶ç­–ç•¥ï¼Œå…¶ä¸­ç­–ç•¥å°±æ˜¯LRU, æ“ä½œå¯¹è±¡åˆ†ä¸ºå…¨éƒ¨key (allkeys-lru) å’Œ è¿‡æœŸkey(volatile-lru)ï¼›è¿™é‡Œæ•´ä½“ä»‹ç»ä¸‹redisç¼“å­˜ç­–ç•¥ï¼Œç„¶åå•ç‹¬ä»‹ç»å¯¹åº”çš„redis LRU evictç­–ç•¥:&lt;/p&gt;
&lt;h4 id=&#34;æœ€å¤§å†…å­˜é…ç½®é€‰é¡¹&#34;&gt;æœ€å¤§å†…å­˜é…ç½®é€‰é¡¹&lt;/h4&gt;
&lt;p&gt;maxmemory é…ç½®é€‰é¡¹ä½¿ç”¨æ¥é…ç½® Redis çš„å­˜å‚¨æ•°æ®æ‰€èƒ½ä½¿ç”¨çš„æœ€å¤§å†…å­˜é™åˆ¶ã€‚å¯ä»¥é€šè¿‡åœ¨å†…ç½®æ–‡ä»¶redis.confä¸­é…ç½®ï¼Œä¹Ÿå¯åœ¨Redisè¿è¡Œæ—¶é€šè¿‡å‘½ä»¤CONFIG SETæ¥é…ç½®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦é…ç½®å†…å­˜ä¸Šé™æ˜¯100Mçš„Redisç¼“å­˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ redis.conf é…ç½®å¦‚ä¸‹ï¼šmaxmemory 100mb&lt;/p&gt;
&lt;p&gt;è®¾ç½® maxmemory ä¸º 0 è¡¨ç¤ºæ²¡æœ‰å†…å­˜é™åˆ¶ã€‚åœ¨ 64-bit ç³»ç»Ÿä¸­ï¼Œé»˜è®¤æ˜¯ 0 æ— é™åˆ¶ï¼Œä½†æ˜¯åœ¨ 32-bit ç³»ç»Ÿä¸­é»˜è®¤æ˜¯ 3GBã€‚å½“å­˜å‚¨æ•°æ®è¾¾åˆ°é™åˆ¶æ—¶ï¼ŒRedis ä¼šæ ¹æ®æƒ…å½¢é€‰æ‹©ä¸åŒç­–ç•¥ï¼Œæˆ–è€…è¿”å›errorsï¼ˆè¿™æ ·ä¼šå¯¼è‡´æµªè´¹æ›´å¤šçš„å†…å­˜ï¼‰ï¼Œæˆ–è€…æ¸…é™¤ä¸€äº›æ—§æ•°æ®å›æ”¶å†…å­˜æ¥æ·»åŠ æ–°æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æƒ°æ€§é‡Šæ”¾çš„ç­–ç•¥&#34;&gt;æƒ°æ€§é‡Šæ”¾çš„ç­–ç•¥&lt;/h4&gt;
&lt;p&gt;åº”ç”¨è¿™ç§ç­–ç•¥çš„åŸå› åœ¨äºå¯¹äºæŸäº›æ•°æ®å¯¹è±¡çš„é‡Šæ”¾éœ€è¦æ¶ˆè€—è¿‡å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœåœ¨&lt;em&gt;Redis&lt;/em&gt;çš„ä¸»çº¿ç¨‹ä¸­é‡‡ç”¨åŒæ­¥çš„æ–¹å¼å»åˆ é™¤ä»¥åŠé‡Šæ”¾è¿™æ ·çš„&lt;em&gt;key-value&lt;/em&gt;æ•°æ®ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ç³»ç»Ÿé•¿æ—¶é—´çš„é˜»å¡åœ¨é‡Šæ”¾æ•°æ®æ“ä½œä¸Šï¼Œè€Œæ— æ³•å¤„ç†å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä»¥æƒ°æ€§é‡Šæ”¾çš„ç­–ç•¥ï¼Œä½¿ç”¨ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œé€šè¿‡å¼‚æ­¥çš„æ–¹å¼æ¥å¯¹æ•°æ®å¯¹è±¡è¿›è¡Œé‡Šæ”¾ï¼Œæ— ç–‘æ˜¯ä¸€ç§è¾ƒä¸ºåˆé€‚çš„é€‰æ‹©ï¼Œå¯é…ç½®ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;redisServer.lazyfree_lazy_evictionï¼š æ˜¯å¦åœ¨æ·˜æ±°æŸä¸ª&lt;em&gt;key&lt;/em&gt;æ—¶ï¼Œä½¿ç”¨æƒ°æ€§é‡Šæ”¾ç­–ç•¥ï¼›è¿™ä¸ªåœ¨å†…å­˜æ·˜æ±°ç­–ç•¥å¼‚æ­¥é‡Šæ”¾ä¼šç”¨åˆ°ï¼›&lt;/li&gt;
&lt;li&gt;redisServer.lazyfree_lazy_expireï¼šæ˜¯å¦åœ¨è¿‡æœŸæŸä¸ª&lt;em&gt;key&lt;/em&gt;æ—¶ï¼Œä½¿ç”¨æƒ°æ€§é‡Šæ”¾ç­–ç•¥;&lt;/li&gt;
&lt;li&gt;redisServer.lazyfree_lazy_server_del: æœåŠ¡å™¨ç«¯åˆ é™¤æŸä¸ª&lt;em&gt;key&lt;/em&gt;æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨æƒ°æ€§é‡Šæ”¾ç­–ç•¥;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è¿‡æœŸåˆ é™¤ç¼“å­˜ç­–ç•¥&#34;&gt;è¿‡æœŸåˆ é™¤ç¼“å­˜ç­–ç•¥&lt;/h4&gt;
&lt;p&gt;åˆ†ä¸ºå®šæœŸåˆ é™¤ï¼Œæƒ°æ€§åˆ é™¤, ä¸¤ç§ç­–ç•¥é…åˆä½¿ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®šæœŸåˆ é™¤&lt;/strong&gt; æŒ‡çš„æ˜¯Redisé»˜è®¤ä¼šæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆé»˜è®¤100msï¼‰å°±ä¼š&lt;!-- raw HTML omitted --&gt;æŠ½å–ä¸€æ‰¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„key&lt;!-- raw HTML omitted --&gt;æ¥æ£€æµ‹æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸå°±åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Redis2.6ç‰ˆæœ¬ä¸­ï¼Œè§„å®šæ¯ç§’è¿è¡Œ10æ¬¡ï¼Œå¤§æ¦‚100msè¿è¡Œä¸€æ¬¡ã€‚åœ¨Redis2.8ç‰ˆæœ¬åï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶redis.conf çš„ &lt;strong&gt;hz&lt;/strong&gt; é€‰é¡¹æ¥è°ƒæ•´æ¯ç§’æ¬¡æ•°(ä¸€èˆ¬ç”¨é»˜è®¤å€¼ï¼Œ è¿‡é«˜ä¼šçš„cpué€ æˆä¸€å®šå‹åŠ›)ã€‚ç”±redis.c/activeExpireCycle å‡½æ•°å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æƒ°æ€§åˆ é™¤&lt;/strong&gt; åœ¨è·å–æŸä¸ªKeyæ—¶Redisä¼šå…ˆæ£€æµ‹ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyæ˜¯å¦è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Ÿå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸï¼Ÿè¿‡æœŸå°±åˆ é™¤ã€‚ç”± db.c/expireIfNeeded å‡½æ•°å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå®šæœŸæŠ½å–ä¸€æ‰¹è¿‡æœŸkeyåˆ é™¤, ä»¥åŠæ²¡æœ‰å¯¹è¿‡æœŸkeyè®¿é—®äº†ï¼Œè¿™æ ·ä¼šå­˜åœ¨å¤§é‡è¿‡æœŸkeyæœªåˆ é™¤å›æ”¶çš„æƒ…å†µï¼Œä¼šå¯¼è‡´å†…å­˜ä½¿ç”¨ç‡å¤§å¤§é™ä½ï¼›æ‰€ä»¥rediså†…éƒ¨æä¾›äº†ä¸åŒçš„å†…å­˜æ·˜æ±°å›æ”¶ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å†…å­˜æ·˜æ±°å›æ”¶ç­–ç•¥&#34;&gt;å†…å­˜æ·˜æ±°å›æ”¶ç­–ç•¥&lt;/h4&gt;
&lt;p&gt;å½“å†…å­˜è¾¾åˆ°é™åˆ¶æ—¶ï¼ŒRedis å…·ä½“çš„å›æ”¶ç­–ç•¥æ˜¯é€šè¿‡ maxmemory-policy é…ç½®é¡¹é…ç½®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹çš„ç­–ç•¥éƒ½æ˜¯å¯ç”¨çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;noenvictionï¼šä¸æ¸…é™¤æ•°æ®ï¼Œåªæ˜¯è¿”å›é”™è¯¯ï¼Œè¿™æ ·ä¼šå¯¼è‡´æµªè´¹æ‰æ›´å¤šçš„å†…å­˜ï¼Œå¯¹å¤§å¤šæ•°å†™å‘½ä»¤ï¼ˆDEL å‘½ä»¤å’Œå…¶ä»–çš„å°‘æ•°å‘½ä»¤ä¾‹å¤–ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;allkeys-lruï¼šä»æ‰€æœ‰çš„æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼Œä»¥ä¾›æ–°æ•°æ®ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼Œä»¥ä¾›æ–°æ•°æ®ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;allkeys-randomï¼šä»æ‰€æœ‰æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ï¼Œä»¥ä¾›æ–°æ•°æ®ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ï¼Œä»¥ä¾›æ–°æ•°æ®ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°ï¼Œä»¥ä¾›æ–°æ•°æ®ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;ä» Redis 4.0 ç‰ˆå¼€å§‹ï¼Œå¼•å…¥äº†æ–°çš„ LFUï¼ˆæœ€è¿‘æœ€ä¸å¸¸ç”¨ï¼‰ç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;volatile-lfuï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰è¿‘ä¼¼ LFU æ•°æ®æ·˜æ±°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;allkeys-lfuï¼šä»æ‰€æœ‰çš„æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰è¿‘ä¼¼ LFU æ•°æ®æ·˜æ±°ã€‚&lt;/p&gt;
&lt;p&gt;LFU ç±»ä¼¼äº LRUï¼šå®ƒä½¿ç”¨ä¸€ä¸ªæ¦‚ç‡è®¡æ•°å™¨ï¼Œç§°ä¸º&lt;a href=&#34;https://en.wikipedia.org/wiki/Approximate_counting_algorithm&#34;&gt;è«é‡Œæ–¯è®¡æ•°å™¨&lt;/a&gt;ï¼Œä»¥ä¾¿ä»…ä½¿ç”¨æ¯ä¸ªå¯¹è±¡çš„å‡ ä½æ¥ä¼°è®¡å¯¹è±¡è®¿é—®é¢‘ç‡ï¼Œå¹¶ç»“åˆè¡°å‡å‘¨æœŸï¼Œä»¥ä¾¿è®¡æ•°å™¨éšç€æ—¶é—´çš„æ¨ç§»è€Œå‡å°‘ï¼šåœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å†å¸Œæœ›å°†keyè§†ä¸ºç»å¸¸è®¿é—®çš„keyï¼Œå³ä½¿å®ƒä»¬è¿‡å»æ˜¯è¿™æ ·ï¼Œä»¥ä¾¿ç®—æ³•å¯ä»¥é€‚åº”è®¿é—®çš„è½¬å˜ã€‚LFUå…·æœ‰å¯è°ƒå‚æ•°:  ï¼ˆè§ï¼š&lt;a href=&#34;http://antirez.com/news/109&#34;&gt;Random notes on improving the Redis LRU algorithm&lt;/a&gt; Least Frequently Used)&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;lfu-log-factor 10 //åœ¨å¤§çº¦ä¸€ç™¾ä¸‡ä¸ªè¯·æ±‚æ—¶ä½¿è®¡æ•°å™¨é¥±å’Œå› å­ï¼Œè®¡æ•°å™¨å¯¹æ•°å› å­ä¼šæ”¹å˜éœ€è¦å¤šå°‘æ¬¡å‘½ä¸­æ‰èƒ½ä½¿é¢‘ç‡è®¡æ•°å™¨é¥±å’Œï¼Œè¿™æ°å¥½åœ¨ 0-255 çš„èŒƒå›´å†…ã€‚ç³»æ•°è¶Šé«˜ï¼Œéœ€è¦è¶Šå¤šçš„è®¿é—®ä»¥è¾¾åˆ°æœ€å¤§å€¼ã€‚ç³»æ•°è¶Šä½ï¼Œä½è®¿é—®è®¡æ•°å™¨çš„åˆ†è¾¨ç‡è¶Šå¥½ï¼Œè§redisç¤ºä¾‹redis.confæ–‡ä»¶
lfu-decay-time 1 //æ¯ä¸€åˆ†é’Ÿè¡°å‡ä¸€æ¬¡è®¡æ•°å™¨ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ cache ä¸­æ²¡æœ‰ç¬¦åˆæ¸…é™¤æ¡ä»¶çš„ key æ—¶ï¼Œå›æ”¶ç­–ç•¥ volatile-lru, volatile-random å’Œvolatile-ttl å°†ä¼šå’Œ ç­–ç•¥ noeviction ä¸€æ ·è¿”å›é”™è¯¯ã€‚é€‰æ‹©æ­£ç¡®çš„å›æ”¶ç­–ç•¥æ˜¯å¾ˆé‡è¦çš„ï¼Œå–å†³äºä½ çš„åº”ç”¨ç¨‹åºçš„è®¿é—®æ¨¡å¼ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶é‡æ–°é…ç½®ç­–ç•¥ï¼Œä½¿ç”¨ INFO è¾“å‡ºæ¥ç›‘æ§ç¼“å­˜å‘½ä¸­å’Œé”™è¿‡çš„æ¬¡æ•°ï¼Œä»¥è°ƒä¼˜ä½ çš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æ™®é€‚ç»éªŒè§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæœŸæœ›ç”¨æˆ·è¯·æ±‚å‘ˆç°å¹‚å¾‹åˆ†å¸ƒ(power-law distribution)ï¼Œä¹Ÿå°±æ˜¯ï¼ŒæœŸæœ›ä¸€éƒ¨åˆ†å­é›†å…ƒç´ è¢«è®¿é—®å¾—è¿œæ¯”å…¶ä»–å…ƒç´ å¤šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨allkeys-lruç­–ç•¥ã€‚åœ¨ä½ ä¸ç¡®å®šæ—¶è¿™æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœŸæœ›æ˜¯å¾ªç¯å‘¨æœŸçš„è®¿é—®ï¼Œæ‰€æœ‰çš„é”®è¢«è¿ç»­æ‰«æï¼Œæˆ–è€…æœŸæœ›è¯·æ±‚ç¬¦åˆå¹³å‡åˆ†å¸ƒ(æ¯ä¸ªå…ƒç´ ä»¥ç›¸åŒçš„æ¦‚ç‡è¢«è®¿é—®)ï¼Œå¯ä»¥ä½¿ç”¨allkeys-randomç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ æœŸæœ›èƒ½è®© Redis é€šè¿‡ä½¿ç”¨ä½ åˆ›å»ºç¼“å­˜å¯¹è±¡çš„æ—¶å€™è®¾ç½®çš„TTLå€¼ï¼Œç¡®å®šå“ªäº›å¯¹è±¡åº”è¯¥æ˜¯è¾ƒå¥½çš„æ¸…é™¤å€™é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨volatile-ttlç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ä½ æƒ³ä½¿ç”¨å•ä¸ªRediså®ä¾‹æ¥å®ç°ç¼“å­˜å’ŒæŒä¹…åŒ–ä¸€äº›é”®ï¼Œallkeys-lruå’Œvolatile-randomç­–ç•¥ä¼šå¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œé€šå¸¸æœ€å¥½æ˜¯è¿è¡Œä¸¤ä¸ªRediså®ä¾‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸ºé”®è®¾ç½®è¿‡æœŸæ—¶é—´éœ€è¦æ¶ˆè€—å†…å­˜ï¼Œæ‰€ä»¥ä½¿ç”¨åƒallkeys-lruè¿™æ ·çš„ç­–ç•¥ä¼šæ›´é«˜æ•ˆï¼Œå› ä¸ºåœ¨å†…å­˜å‹åŠ›ä¸‹æ²¡æœ‰å¿…è¦ä¸ºé”®çš„å›æ”¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å›æ”¶è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç†è§£å›æ”¶è¿‡ç¨‹æ˜¯è¿ä½œæµç¨‹éå¸¸çš„é‡è¦ï¼Œå›æ”¶è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªå®¢æˆ·ç«¯è¿è¡Œä¸€ä¸ªæ–°å‘½ä»¤ï¼Œæ·»åŠ äº†æ–°æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;Redisæ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœå¤§äºmaxmemoryé™åˆ¶ï¼Œæ ¹æ®ç­–ç•¥æ¥å›æ”¶é”®ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªæ–°çš„å‘½ä»¤è¢«æ‰§è¡Œï¼Œå¦‚æ­¤ç­‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬æ·»åŠ æ•°æ®æ—¶é€šè¿‡æ£€æŸ¥ï¼Œç„¶åå›æ”¶é”®ä»¥è¿”å›åˆ°é™åˆ¶ä»¥ä¸‹ï¼Œæ¥è¿ç»­ä¸æ–­çš„ç©¿è¶Šå†…å­˜é™åˆ¶çš„è¾¹ç•Œã€‚å¦‚æœä¸€ä¸ªå‘½ä»¤å¯¼è‡´å¤§é‡çš„å†…å­˜è¢«å ç”¨(æ¯”å¦‚ä¸€ä¸ªå¾ˆå¤§çš„é›†åˆä¿å­˜åˆ°ä¸€ä¸ªæ–°çš„é”®)ï¼Œé‚£ä¹ˆå†…å­˜é™åˆ¶å¾ˆå¿«å°±ä¼šè¢«è¿™ä¸ªæ˜æ˜¾çš„å†…å­˜é‡æ‰€è¶…è¶Šã€‚&lt;/p&gt;
&lt;h4 id=&#34;è¿‘ä¼¼lruç®—æ³•&#34;&gt;è¿‘ä¼¼LRUç®—æ³•&lt;/h4&gt;
&lt;p&gt;Redisæ•´ä½“ä¸Šæ˜¯ä¸€ä¸ªå¤§çš„dictï¼Œå¦‚æœå®ç°ä¸€ä¸ªåŒå‘é“¾è¡¨éœ€è¦åœ¨æ¯ä¸ªkeyä¸Šé¦–å…ˆå¢åŠ ä¸¤ä¸ªæŒ‡é’ˆï¼Œéœ€è¦16ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”é¢å¤–éœ€è¦ä¸€ä¸ªlistç»“æ„ä½“å»å­˜å‚¨è¯¥åŒå‘é“¾è¡¨çš„å¤´å°¾èŠ‚ç‚¹ä¿¡æ¯ã€‚Redisä½œè€…è®¤ä¸ºè¿™æ ·å®ç°ä¸ä»…å†…å­˜å ç”¨å¤ªå¤§ï¼Œè€Œä¸”å¯èƒ½å¯¼è‡´æ€§èƒ½é™ä½ã€‚å…·ä½“è¯¦è§ä½œè€…åšå®¢æ–‡ç« ï¼š&lt;a href=&#34;http://antirez.com/news/109&#34;&gt;Random notes on improving the Redis LRU algorithm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;â€ƒâ€ƒ&lt;strong&gt;Redisä¸ºä»€ä¹ˆä¸ä½¿ç”¨åŸç”ŸLRUç®—æ³•ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸç”ŸLRUç®—æ³•éœ€è¦ åŒå‘é“¾è¡¨ æ¥ç®¡ç†æ•°æ®ï¼Œéœ€è¦&lt;strong&gt;é¢å¤–å†…å­˜&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®è®¿é—®æ—¶æ¶‰åŠ&lt;strong&gt;æ•°æ®ç§»åŠ¨ï¼Œæœ‰æ€§èƒ½æŸè€—&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;Redisç°æœ‰&lt;strong&gt;æ•°æ®ç»“æ„éœ€è¦æ”¹é€ &lt;/strong&gt;ï¼ŒdictEntry, keyæŒ‡å‘sds, valæŒ‡å‘redisObjectï¼ŒdictEntry æ˜¯ä¸ªå•å‘é“¾è¡¨ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Redisçš„LRUç®—æ³•ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„LRUå®ç°ã€‚è¿™æ„å‘³ç€Redisä¸èƒ½é€‰æ‹©æœ€ä½³å€™é€‰é”®æ¥å›æ”¶ï¼Œä¹Ÿå°±æ˜¯æœ€ä¹…æœªè¢«è®¿é—®çš„é‚£äº›é”®ã€‚ç›¸åï¼ŒRedis ä¼šå°è¯•æ‰§è¡Œä¸€ä¸ªè¿‘ä¼¼çš„LRUç®—æ³•ï¼Œé€šè¿‡é‡‡æ ·ä¸€å°éƒ¨åˆ†é”®ï¼Œç„¶ååœ¨é‡‡æ ·é”®ä¸­å›æ”¶æœ€é€‚åˆ(æ‹¥æœ‰æœ€ä¹…è®¿é—®æ—¶é—´)çš„é‚£ä¸ªã€‚ç„¶è€Œï¼Œä»Redis3.0å¼€å§‹ï¼Œç®—æ³•è¢«æ”¹è¿›ä¸ºç»´æŠ¤ä¸€ä¸ªå›æ”¶å€™é€‰é”®æ± ã€‚è¿™æ”¹å–„äº†ç®—æ³•çš„æ€§èƒ½ï¼Œä½¿å¾—æ›´æ¥è¿‘äºçœŸå®çš„LRUç®—æ³•çš„è¡Œä¸ºã€‚Redisçš„LRUç®—æ³•æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼Œä½ å¯ä»¥è°ƒæ•´ç®—æ³•çš„ç²¾åº¦ï¼Œé€šè¿‡æ”¹å˜æ¯æ¬¡å›æ”¶æ—¶æ£€æŸ¥çš„é‡‡æ ·æ•°é‡ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®æŒ‡ä»¤ï¼š&lt;code&gt;maxmemory-samples 5&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Redisæ²¡æœ‰ä½¿ç”¨çœŸå®çš„LRUå®ç°çš„åŸå› ï¼Œæ˜¯å› ä¸ºè¿™ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚ç„¶è€Œï¼Œè¿‘ä¼¼å€¼å¯¹ä½¿ç”¨Redisçš„åº”ç”¨æ¥è¯´åŸºæœ¬ä¸Šä¹Ÿæ˜¯ç­‰ä»·çš„ã€‚æ–‡ç« &lt;a href=&#34;https://redis.io/topics/lru-cache&#34;&gt;Using Redis as an LRU cache&lt;/a&gt;ä¸ºRedisä½¿ç”¨çš„LRUè¿‘ä¼¼å€¼å’ŒçœŸå®LRUä¹‹é—´çš„æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;â€ƒè§¦å‘æ—¶æœºæ˜¯åœ¨redis serveræ‰§è¡Œæ–°çš„å†™å‘½ä»¤æ—¶, å½“ mem_used &amp;gt; maxmemory çš„æ—¶å€™ï¼Œé€šè¿‡ &lt;a href=&#34;https://github.com/redis/redis/blob/c1718f9d862267bc44b2a326cdc8cb1ca5b81a39/src/evict.c#L531:5&#34;&gt;performEvictions&lt;/a&gt; æ–¹æ³•å®Œæˆæ•°æ®æ·˜æ±°(æ‰€çœ‹çš„Redis6.2.6æºç )ã€‚LRUç­–ç•¥æ·˜æ±°æ ¸å¿ƒé€»è¾‘åœ¨ &lt;a href=&#34;https://github.com/redis/redis/blob/c1718f9d862267bc44b2a326cdc8cb1ca5b81a39/src/evict.c#L145:6&#34;&gt;evictionPoolPopulate&lt;/a&gt;ï¼ˆæ·˜æ±°æ•°æ®é›†åˆå¡«å……ï¼‰ æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Redis6.2.6 æ·˜æ±°ç­–ç•¥æ•´ä½“é€»è¾‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://github.com/weedge/lib/blob/main/client/redis/redis-lru.png?raw=true&#34; alt=&#34;redis-lru&#34;&gt;&lt;/p&gt;
&lt;p&gt;keyè®¿é—®å˜æ›´ç­–ç•¥å€¼(ç”¨äºè®¡ç®—idle)ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨Redisçš„dictä¸­æ¯æ¬¡æŒ‰keyè·å–ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨&lt;code&gt;lookupKey&lt;/code&gt;å‡½æ•°ï¼Œå‰ææ˜¯æ²¡æœ‰forkå‡ºæ¥çš„savingå­è¿›ç¨‹(ä¼šè§¦å‘copy on write)
å¦‚æœé…ç½®ä½¿ç”¨äº†LRUæ¨¡å¼,è¯¥å‡½æ•°&lt;code&gt;LRU_CLOCK&lt;/code&gt;ä¼šæ›´æ–°val-&amp;gt;redisObjectä¸­çš„lruå­—æ®µä¸ºå½“å‰ç§’çº§åˆ«çš„æ—¶é—´æˆ³, åœ¨ä¼°ç®—idle timeçš„æ—¶å€™ï¼Œ&lt;code&gt;estimateObjectIdleTime&lt;/code&gt;ä¼šå†æ¬¡è°ƒç”¨&lt;code&gt;LRU_CLOCK&lt;/code&gt;è·å–æ—¶é—´æˆ³å’Œæœ€è¿‘ä¸€æ¬¡val-&amp;gt;redisObjectä¸­çš„lruç›¸å‡è·å–idleï¼›
ä¸ºåé¢çš„æ ·æœ¬æ± ä¸­è·å–bestKeyæ¥æ·˜æ±°åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡æ ·æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;éå†æ•°æ®åº“ï¼Œæ ¹æ®æ·˜æ±°ç­–ç•¥ä»dict(æ²¡æœ‰è¿‡æœŸæ—¶é—´çš„key)è¿˜æ˜¯expires(æœ‰è¿‡æœŸæ—¶é—´çš„key)ä¸­è·å–éšæœº&lt;code&gt;maxmemory_samples&lt;/code&gt;ä¸ªæ ·æœ¬ï¼Œæ”¾å…¥&lt;code&gt;static struct evictionPoolEntry *EvictionPoolLRU&lt;/code&gt; poolæ ·æœ¬æ± ä¸­ã€‚æ ·æœ¬æ± ä¸­çš„æ ·æœ¬idleå€¼ä»ä½åˆ°é«˜æ’å…¥æ’åºï¼Œæ•°æ®æ·˜æ±°ç­–ç•¥æ¯æ¬¡é€‰æ‹©idleæœ€é«˜æ•°æ®è¿›è¡Œæ·˜æ±°é‡Šæ”¾(æ ¹æ®é…ç½®æ˜¯å¦å¼€å¯æƒ°æ€§æ·˜æ±°ç­–ç•¥é‡Šæ”¾å¼‚æ­¥é‡Šæ”¾è¿˜æ˜¯åŒæ­¥é‡Šæ”¾)ï¼›æ ·æœ¬æ± å¤§å°æ˜¯&lt;code&gt;EVPOOL_SIZE 16&lt;/code&gt;ï¼Œæ‰€ä»¥é‡‡é›†æ ·æœ¬è¦æ ¹æ®è‡ªå·±çš„idleå€¼å¤§å°æˆ–æ± ä¸­æ˜¯å¦æœ‰ç©ºä½æ¥ç¡®å®šæ˜¯å¦æˆåŠŸæ’å…¥æ ·æœ¬æ± ä¸­ï¼Œå¦‚æœæ± ä¸­æ²¡æœ‰ç©ºä½ï¼Œæˆ–è€…è¢«æ’å…¥æ ·æœ¬çš„idleå€¼éƒ½å°äºæ± å­ä¸­çš„æ•°æ®ï¼Œé‚£æ’å…¥å°†ä¼šå¤±è´¥ï¼›è¿™æ ·æ ·æœ¬æ± ä¸­ä¸€è‡´å­˜æ”¾idleæœ€å¤§ï¼Œæœ€å¤§å‡ ç‡è¢«æ·˜æ±°çš„key(sds)æ ·æœ¬(é€šè¿‡keyæ‰¾åˆ°dictEntryä¸­çš„val-&amp;gt;redisObject å»é‡Šæ”¾)ã€‚&lt;/p&gt;
&lt;p&gt;Idleè·å–ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯LRUç­–ç•¥ï¼šestimateObjectIdleTime(o)  è·å–redisObject çš„ idle æ—¶é—´ï¼Œä¸€ä¸ªkeyç»å¸¸è¢«è®¿é—®ï¼Œé‚£ä¹ˆè¯¥keyçš„idle timeåº”è¯¥æ˜¯æœ€å°ï¼›
å¦‚æœæ˜¯LFUç­–ç•¥ï¼š255-LFUDecrAndReturn(o) æœ€å¤§ä½¿ç”¨é¢‘ç‡255å‡å»redisObjectçš„ä½¿ç”¨é¢‘ç‡ï¼Œæ‰€ä»¥æœ€å°ä½¿ç”¨é¢‘ç‡ï¼Œidleè¶Šå¤§ï¼›
å¦‚æœæ˜¯å·²è¿‡æœŸä¸­æ·˜æ±°ç­–ç•¥ï¼š ULLONG_MAX - (long)dictGetVal(de);  è¿‡æœŸè¶Šæ—©è¶Šå¥½ï¼›
poolä¸­æŒ‰idleä»å°åˆ°å¤§æ’å…¥æ’åºï¼Œä¾¿äºè·å–bestKey,ç”¨äºåˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;æ·˜æ±°åˆ é™¤ç­–ç•¥ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœå¼€å¯æƒ°æ€§æ·˜æ±°ç­–ç•¥ï¼Œåˆ™ä½¿ç”¨dbAsyncDelete å¼‚æ­¥å›æ”¶åªé‡Šæ”¾key, ä¸ä¼šå¯¹ä¸»çº¿ç¨‹é€ æˆè¿‡å¤§çš„è´Ÿæ‹…ï¼Œå¦åˆ™ä½¿ç”¨dbSyncDeleteåŒæ­¥å›æ”¶ï¼›
å¼‚æ­¥å›æ”¶å¦‚æœé‡Šæ”¾å¯¹è±¡æ•°ç›®&amp;gt;64, å°†å¯¹è±¡åˆ›å»ºjobåŠ å…¥lazy free listï¼›é€šçŸ¥&lt;code&gt;signal type: bio_lazy_free&lt;/code&gt;å›æ”¶å¤„ç†çº¿ç¨‹è¿›è¡Œå›æ”¶ï¼›
è¿™ä¸¤ç§æ“ä½œéƒ½æ˜¯ä¼šå°†keyä»æ•°æ®åº“çš„é”®ç©ºé—´ä¸­ç§»é™¤ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±åœ¨äºï¼Œå¯¹valueæ•°æ®çš„é‡Šæ”¾ï¼Œæ˜¯åŒæ­¥æ“ä½œè¿˜æ˜¯å¼‚æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/redis/redis/blob/79ac57561f268814babe212c9216efe45cfdf937/src/server.c#L5330&#34;&gt;è§¦å‘ä»£ç åœ¨server.cä¸­&lt;/a&gt;ï¼šactiveExpireCycle performEvictions å‡½æ•° åœ¨ &lt;a href=&#34;https://github.com/redis/redis/blob/b71c5849e3e5c040b029c6e25cec2069d70760c1/README.md#serverc&#34;&gt;server.c&lt;/a&gt; readmeä¸­æœ‰ä»‹ç»ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œ&lt;/p&gt;
&lt;h3 id=&#34;mysql80-innodb-page-buffer-pool-lru-evictç­–ç•¥&#34;&gt;Mysql8.0 InnoDB page buffer pool LRU evictç­–ç•¥&lt;/h3&gt;
&lt;h4 id=&#34;é¡µpage&#34;&gt;é¡µPage&lt;/h4&gt;
&lt;p&gt;æ•°æ®åº“çš„æ•°æ®æ˜¯æ”¾åœ¨ç£ç›˜ç©ºé—´ä»¥è¡¨ç©ºé—´å­˜æ”¾çš„ï¼ŒåŠ è½½çš„æ—¶å€™ä»¥é¡µpageä¸ºå•ä½è¿›è¡ŒåŠ è½½ï¼Œé¡µæ˜¯InnoDBå­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªé¡µé»˜è®¤16KBï¼›å¯ä»¥é€šè¿‡å‚æ•°innodb_page_sizeè®¾ç½®(ä¸€ä¸ªé¡µå†…å¿…é¡»å­˜å‚¨2è¡Œè®°å½•ï¼Œå¦åˆ™å°±ä¸æ˜¯B+treeï¼Œè€Œæ˜¯é“¾è¡¨äº†)ï¼Œé¡µé¢ç±»å‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®é¡µï¼ˆB-tree Nodeï¼‰&lt;/p&gt;
&lt;p&gt;undoé¡µï¼ˆundo Log Pageï¼‰&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿé¡µï¼ˆSystem Pageï¼‰&lt;/p&gt;
&lt;p&gt;äº‹åŠ¡æ•°æ®é¡µï¼ˆTransaction system Pageï¼‰&lt;/p&gt;
&lt;p&gt;æ’å…¥ç¼“å†²ä½å›¾é¡µï¼ˆInsert Buffer Pageï¼‰&lt;/p&gt;
&lt;p&gt;æ’å…¥ç¼“å†²ç©ºé—²åˆ—è¡¨é¡µï¼ˆInsert Buffer Free Listï¼‰&lt;/p&gt;
&lt;p&gt;æœªå‹ç¼©çš„äºŒè¿›åˆ¶å¤§å¯¹è±¡é¡µï¼ˆUncompressd BLOB Pageï¼‰&lt;/p&gt;
&lt;p&gt;å‹ç¼©çš„äºŒè¿›åˆ¶å¤§å¯¹è±¡é¡µï¼ˆCompressd BLOB Pageï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://blogstatic.haohtml.com/uploads/2019/08/innodb_engine_struct.png&#34; alt=&#34;innodb_engine_struct&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»InnoDBå­˜å‚¨å¼•æ“çš„é€»è¾‘ç»“æ„çœ‹ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¢«é€»è¾‘åœ°å­˜æ”¾åœ¨ä¸€ä¸ªç©ºé—´å†…ï¼Œç§°ä¸ºè¡¨ç©ºé—´(tablespace)ï¼Œè€Œè¡¨ç©ºé—´ç”±æ®µï¼ˆsengmentï¼‰ã€åŒºï¼ˆextentï¼‰ã€é¡µï¼ˆpageï¼‰ç»„æˆã€‚ åœ¨ä¸€äº›æ–‡æ¡£ä¸­extendåˆç§°å—ï¼ˆblockï¼‰ã€‚è¿™é‡Œæœ‰å‡ ä¸ªæ¦‚å¿µç®€å•ä»‹ç»ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡¨ç©ºé—´ï¼ˆTablespaceï¼‰&lt;/strong&gt; æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œè¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸º&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-system-tablespace.html&#34;&gt;ç³»ç»Ÿè¡¨ç©ºé—´&lt;/a&gt;ã€&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-file-per-table-tablespaces.html&#34;&gt;File-per-table è¡¨ç©ºé—´&lt;/a&gt;ã€&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/general-tablespaces.html&#34;&gt;é€šç”¨è¡¨ç©ºé—´&lt;/a&gt;ã€&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-undo-tablespaces.html&#34;&gt;æ’¤é”€è¡¨ç©ºé—´&lt;/a&gt;ã€&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-temporary-tablespace.html&#34;&gt;ä¸´æ—¶è¡¨ç©ºé—´&lt;/a&gt;ã€‚(è¡¨ç©ºé—´æ–‡ä»¶å¯ä»¥é€šè¿‡xxdè¿›è¡Œåˆ†æ)&lt;/p&gt;
&lt;p&gt;åœ¨ InnoDB ä¸­å­˜åœ¨ä¸¤ç§è¡¨ç©ºé—´çš„ç±»å‹ï¼šå…±äº«è¡¨ç©ºé—´(ä¾‹å¦‚ç³»ç»Ÿè¡¨ç©ºé—´æˆ–é€šç”¨è¡¨ç©ºé—´)å’Œç‹¬ç«‹è¡¨ç©ºé—´(File-per-table è¡¨ç©ºé—´)ã€‚å¦‚æœæ˜¯å…±äº«è¡¨ç©ºé—´å°±æ„å‘³ç€å¤šå¼ è¡¨å…±ç”¨ä¸€ä¸ªè¡¨ç©ºé—´ã€‚å¦‚æœæ˜¯ç‹¬ç«‹è¡¨ç©ºé—´ï¼Œå°±æ„å‘³ç€æ¯å¼ è¡¨æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æ•°æ®å’Œç´¢å¼•ä¿¡æ¯éƒ½ä¼šä¿å­˜åœ¨è‡ªå·±çš„è¡¨ç©ºé—´ä¸­ã€‚ç‹¬ç«‹çš„è¡¨ç©ºé—´å¯ä»¥åœ¨ä¸åŒçš„æ•°æ®åº“ä¹‹é—´è¿›è¡Œè¿ç§»ã€‚ç¦ç”¨&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_file_per_table&#34;&gt;&lt;code&gt;innodb_file_per_table&lt;/code&gt;&lt;/a&gt; ä¼šåœ¨ç³»ç»Ÿè¡¨ç©ºé—´ä¸­åˆ›å»ºè¡¨ã€‚&lt;/p&gt;
&lt;p&gt;mysql8.0 InnoDBå­˜å‚¨å¼•æ“å¯¹ç£ç›˜ç»“æ„ä¸­çš„è¡¨ç©ºé—´æ“ä½œæœ‰äº›æ”¹å˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;8.0ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿè¡¨ç©ºé—´åªæ˜¯æ›´æ”¹ç¼“å†²åŒºçš„å­˜å‚¨åŒºåŸŸï¼›ä»¥å‰ç‰ˆæœ¬æ˜¯InnoDBæ•°æ®å­—å…¸ã€åŒå†™ç¼“å†²åŒºã€æ›´æ”¹ç¼“å†²åŒºå’Œæ’¤æ¶ˆæ—¥å¿—çš„å­˜å‚¨åŒºåŸŸ ã€‚(å¦‚æœè¡¨æ˜¯åœ¨ç³»ç»Ÿè¡¨ç©ºé—´ä¸­åˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªè¡¨æ–‡ä»¶æˆ–é€šç”¨è¡¨ç©ºé—´ä¸­åˆ›å»ºï¼Œåˆ™å®ƒè¿˜å¯èƒ½åŒ…å«è¡¨å’Œç´¢å¼•æ•°æ®)&lt;/li&gt;
&lt;li&gt;åœ¨8.0ä»¥å‰çš„ MySQL ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿè¡¨ç©ºé—´åŒ…å«InnoDBæ•°æ®å­—å…¸mysql.* ã€‚åœ¨ MySQL 8.0 ä¸­InnoDBå°†å…ƒæ•°æ®å­˜å‚¨åœ¨ MySQL æ•°æ®å­—å…¸è¡¨ç©ºé—´ä¸­ï¼Œè¡¨ç»“æ„ç­‰æ•°æ®å­—å…¸å…ƒæ•°æ®éƒ½æ˜¯é€šè¿‡InnoDBæ¥ç®¡ç†(mysql.ibdæˆ–è€…ç‹¬ç«‹è¡¨ç©ºé—´*.ibdæ–‡ä»¶ä¸­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ MySQL 8.0.20 ä¹‹å‰ï¼Œdoublewrite ç¼“å†²åŒºå­˜å‚¨åŒºä½äºInnoDBç³»ç»Ÿè¡¨ç©ºé—´ä¸­ï¼›ä» MySQL 8.0.20 å¼€å§‹ï¼ŒåŒå†™ç¼“å†²åŒºå­˜å‚¨åŒºåŸŸä½äºåŒå†™æ–‡ä»¶ä¸­ã€‚é™„ä¸Šå®˜æ–¹mysql8.0 InnoDBå­˜å‚¨å¼•æ“æ¶æ„å›¾(å¯¹æ¯” &lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-architecture.html&#34;&gt;5.7ç‰ˆæœ¬æ¶æ„&lt;/a&gt;)ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://dev.mysql.com/doc/refman/8.0/en/images/innodb-architecture.png&#34; alt=&#34;innodb-architecture&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ®µï¼ˆSegmentï¼‰&lt;/strong&gt; ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒºç»„æˆï¼ŒåŒºåœ¨æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿ç»­åˆ†é…çš„ç©ºé—´ï¼ˆåœ¨ InnoDB ä¸­æ˜¯è¿ç»­çš„ 64 ä¸ªé¡µï¼‰ï¼Œä¸è¿‡åœ¨æ®µä¸­ä¸è¦æ±‚åŒºä¸åŒºä¹‹é—´æ˜¯ç›¸é‚»çš„ã€‚æ®µæ˜¯æ•°æ®åº“ä¸­çš„åˆ†é…å•ä½ï¼Œä¸åŒç±»å‹çš„æ•°æ®åº“å¯¹è±¡ä»¥ä¸åŒçš„æ®µå½¢å¼å­˜åœ¨ã€‚å½“æˆ‘ä»¬åˆ›å»ºæ•°æ®è¡¨ã€ç´¢å¼•çš„æ—¶å€™ï¼Œå°±ä¼šç›¸åº”åˆ›å»ºå¯¹åº”çš„æ®µï¼Œæ¯”å¦‚åˆ›å»ºä¸€å¼ è¡¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¡¨æ®µï¼Œåˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒºï¼ˆextentï¼‰&lt;/strong&gt; åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªåŒºä¼šåˆ†é… 64 ä¸ªè¿ç»­çš„é¡µã€‚å› ä¸º InnoDB ä¸­çš„é¡µå¤§å°é»˜è®¤æ˜¯ 16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯ 64*16KB=1MBã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹æ¯ä¸ªåŒºå¤§å°éƒ½ä¸º1MBï¼Œä¸ºäº†ä¿è¯é¡µçš„è¿ç»­æ€§ï¼ŒInnoDBå­˜å‚¨å¼•æ“æ¯æ¬¡ä»ç£ç›˜ä¸€æ¬¡ç”³è¯·4-5ä¸ªåŒºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBå­˜å‚¨å¼•æ“çš„é¡µå¤§å°ä¸º16KBï¼Œå³ä¸€ä¸ªåŒºä¸­æœ‰64ä¸ªè¿ç»­çš„é¡µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡µï¼ˆpageï¼‰&lt;/strong&gt; æ˜¯InnoDBå­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªé¡µé»˜è®¤16KBï¼Œé¡µç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogstatic.haohtml.com/uploads/2019/08/1d49c975639e53fe92466f0b1ebe2b2a99672e8b-1024x828.jpeg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Page directory é¡µç›®å½•ç”¨æ¥å­˜å‚¨æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œè¿™äº›åœ°å€åç§»é‡ä¼šæŒ‰ç…§å…ˆåé¡ºåºå­˜å‚¨èµ·æ¥ï¼Œæ¯ç»„çš„åœ°å€åç§»é‡ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒç»„çš„æœ€åä¸€ä¸ªè®°å½•ï¼Œè¿™æ ·æ–¹ä¾¿äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿå®šä½åˆ°è®°å½•ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogstatic.haohtml.com/uploads/2019/08/innodb-page-dir-1024x959.jpg&#34; alt=&#34;page-slot&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡Œï¼ˆrowï¼‰&lt;/strong&gt; InnoDBå­˜å‚¨å¼•æ“æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ï¼Œæ¯ä¸ªé¡µå­˜æ”¾çš„è¡Œè®°å½•ä¹Ÿæ˜¯æœ‰ç¡¬æ€§å®šä¹‰çš„ï¼Œæœ€å¤šå…è®¸å­˜æ”¾16KB/2-200ï¼Œå³7992è¡Œè®°å½•ã€‚&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/innodb-row-format.html&#34;&gt;InnoDB è¡Œæ ¼å¼&lt;/a&gt;æ”¯æŒå››åçš„æ ¼å¼ï¼šREDUNDANTï¼ŒCOMPACTï¼Œ DYNAMICï¼Œå’ŒCOMPRESSEDï¼Œé»˜è®¤DYNAMIC&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;B+ æ ‘æ˜¯å¦‚ä½•è¿›è¡Œè®°å½•æ£€ç´¢çš„ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœé€šè¿‡ B+ æ ‘çš„ç´¢å¼•æŸ¥è¯¢è¡Œè®°å½•ï¼Œé¦–å…ˆæ˜¯ä» B+ æ ‘çš„æ ¹å¼€å§‹ï¼Œé€å±‚æ£€ç´¢ï¼Œç›´åˆ°æ‰¾åˆ°&lt;strong&gt;å¶å­èŠ‚ç‚¹&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°å¯¹åº”çš„&lt;strong&gt;æ•°æ®é¡µ&lt;/strong&gt;ä¸ºæ­¢ï¼Œå¦‚æœæ•°æ®é¡µæ²¡åœ¨ç¼“å†²æ± ä¸­ï¼Œå°†æ•°æ®é¡µåŠ è½½åˆ°å†…å­˜ &lt;strong&gt;ç¼“å†²æ± (buffer pool)&lt;/strong&gt; ä¸­ï¼Œé¡µç›®å½•ä¸­çš„ &lt;strong&gt;æ§½(slot)&lt;/strong&gt; é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼å…ˆæ‰¾åˆ°ä¸€ä¸ªç²—ç•¥çš„&lt;strong&gt;è®°å½•åˆ†ç»„&lt;/strong&gt;ï¼Œç„¶åå†åœ¨åˆ†ç»„ä¸­é€šè¿‡é“¾è¡¨éå†çš„æ–¹å¼æŸ¥æ‰¾&lt;strong&gt;è®°å½•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¼“å†²æ± buffer-pool--lruunzip_lru-é“¾è¡¨&#34;&gt;ç¼“å†²æ± (buffer pool)  LRU/unzip_LRU é“¾è¡¨&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;ç¼“å†²æ± (buffer pool)&lt;/strong&gt; æ˜¯ä¸»å†…å­˜ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œç”¨äºåœ¨ &lt;code&gt;InnoDB&lt;/code&gt;è®¿é—®æ—¶ç¼“å­˜è¡¨å’Œç´¢å¼•æ•°æ®ã€‚ç¼“å†²æ± å…è®¸ç›´æ¥ä»å†…å­˜è®¿é—®ç»å¸¸ä½¿ç”¨çš„æ•°æ®ï¼Œä»è€ŒåŠ å¿«å¤„ç†é€Ÿåº¦ã€‚åœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Šï¼Œå¤šè¾¾ 80% çš„ç‰©ç†å†…å­˜é€šå¸¸åˆ†é…ç»™ç¼“å†²æ± ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹ åœºæ™¯ï¼Œä¸€ä¸ªç›´æ’­é—´idä¸º1çš„è§‚çœ‹äººæ•°ä¸Šç™¾ä¸‡ï¼Œå‡å¦‚è¿è¥åå°éœ€è¦æŸ¥æ‰¾å…¨éƒ¨æ•°æ®ï¼Œï¼ˆè¿™é‡Œå‡è®¾æ²¡æœ‰é€šè¿‡CQRSæ¨¡å¼å°†æ•°æ®æ”¾å…¥ESä¸­ï¼ŒESæŸ¥è¯¢ç¼“å­˜ä¹Ÿç”¨åˆ°äº†LRU, å¯ä»¥å‚è€ƒè¿™ç¯‡&lt;a href=&#34;https://www.easyice.cn/archives/367&#34;&gt;Elasticsearch çš„æŸ¥è¯¢ç¼“å­˜&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;select * from room_student_history where room_id=1  and id&amp;gt;=(select id from room_student_history where order by id limit 1000000,1) order by id limit 1000&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœroom_student_historyä¸­æœ‰å¤§é‡é•¿å°¾ç”¨æˆ·æ•°æ®å¹¶ä¸”è¯»å–ä¹‹åä¸ä¼šç»§ç»­ä½¿ç”¨,åˆ™LRUå¤´éƒ¨ä¼šè¢«å¤§é‡çš„room_student_historyä¸­çš„æ•°æ®å æ®ã€‚è¿™æ ·ä¼šé€ æˆçƒ­ç‚¹æ•°æ®è¢«é€å‡ºç¼“å­˜ä»è€Œå¯¼è‡´å¤§é‡çš„ç£ç›˜io ;&lt;/p&gt;
&lt;p&gt;mysql innodbçš„buffer poolä½¿ç”¨äº†ä¸€ç§æ”¹è¿›çš„LRUç®—æ³•ï¼Œå¤§æ„æ˜¯å°†LRUé“¾è¡¨åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºnewlist,ä¸€éƒ¨åˆ†ä¸ºoldlist,newlistæ˜¯å¤´éƒ¨çƒ­ç‚¹æ•°æ®ï¼Œoldlistæ˜¯éçƒ­ç‚¹æ•°æ®,oldlisté»˜è®¤å æ•´ä¸ªlisté•¿åº¦çš„3/8.å½“åˆæ¬¡åŠ è½½ä¸€ä¸ªpageçš„æ—¶å€™ï¼Œä¼šé¦–å…ˆæ”¾å…¥oldlistçš„å¤´éƒ¨ï¼Œåªæœ‰æ»¡è¶³ä¸€å®šæ¡ä»¶åï¼Œæ‰è¢«ç§»åˆ°new listä¸Šï¼Œä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢é¢„è¯»çš„æ•°æ®é¡µå’Œå…¨è¡¨æ‰«ææ±¡æŸ“buffer poolã€‚è¯¦ç»†ä»‹ç»è§&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/innodb-buffer-pool.html&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://dev.mysql.com/doc/refman/8.0/en/images/innodb-buffer-pool-list.png&#34; alt=&#34;innodb-buffer-pool&#34;&gt;&lt;/p&gt;
&lt;p&gt;é™„macä¸‹æŠŠç©æ“ä½œï¼šï¼ˆå•æœºå®ä¾‹ï¼Œé€šè¿‡brewåˆ‡æ¢ç‰ˆæœ¬æœåŠ¡æŒºæ–¹ä¾¿çš„ï¼›ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®: é«˜å¯ç”¨ï¼Œæ€§èƒ½ä¼˜åŒ–ç¨³å®šç­‰é…ç½®ï¼‰&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;brew install &lt;a href=&#34;mailto:mysql@5.7&#34;&gt;mysql@5.7&lt;/a&gt; //å®‰è£…5.7ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;brew services start &lt;a href=&#34;mailto:mysql@5.7&#34;&gt;mysql@5.7&lt;/a&gt; //å¯åŠ¨5.7ç‰ˆæœ¬mysqld,mysqld_safe&lt;/li&gt;
&lt;li&gt;å»ºè¡¨ï¼ŒæŸ¥çœ‹/usr/local/var/mysql ç›®å½•ä¸‹çš„æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹ç…§ &lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/innodb-architecture.html&#34;&gt;5.7ç‰ˆæœ¬æ¶æ„&lt;/a&gt; æŸ¥çœ‹è¡¨ç©ºé—´æ–‡ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;å†™äº›æ•°æ®ï¼ŒæŸ¥çœ‹ç›¸å…³æ•°æ®æ–‡ä»¶çš„æ•°æ®å˜åŒ–ï¼Œ é€šè¿‡ xxd/hexdump ä»¥åå…­è¿›åˆ¶çš„æ–¹å¼æŸ¥çœ‹è¡¨ç©ºé—´äºŒè¿›åˆ¶æ–‡ä»¶*.ibdç­‰&lt;/li&gt;
&lt;li&gt;brew install mysql //å®‰è£…æœ€æ–°ç‰ˆæœ¬8.0&lt;/li&gt;
&lt;li&gt;brew services stop &lt;a href=&#34;mailto:mysql@5.7&#34;&gt;mysql@5.7&lt;/a&gt;  //åœæ­¢mysql@5.7æœåŠ¡&lt;/li&gt;
&lt;li&gt;brew services start mysql //å¯åŠ¨8.0ç‰ˆæœ¬mysqld,mysqld_safe&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹/usr/local/var/mysql ç›®å½•ä¸‹çš„æ•°æ®æ–‡ä»¶, å¯¹æ¯”5.7ç‰ˆæœ¬çš„æ–‡ä»¶å˜åŒ–ï¼Œæ–°å¢äº†å“ªäº›æ–‡ä»¶åˆ†å¼€ç®¡ç†, ä»¥åŠå¯¹æ•°æ®å­—å…¸çš„å˜åŒ–&lt;/li&gt;
&lt;li&gt;/usr/local/opt/mysql/bin/ibd2sdi (utilities/ibd2sdi.ccæ–‡ä»¶)  æŸ¥çœ‹ibdæ–‡ä»¶ä¸­çš„å­—å…¸åºåˆ—åŒ–ä¿¡æ¯,mysqlbinlog binlog.* æ‰“å°binlo gä¿¡æ¯&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘½ä»¤æ‰§è¡Œshow VARIABLES like &amp;ldquo;%Innodb%&amp;quot;; show status like &amp;ldquo;%Innodb%&amp;quot;; æŸ¥çœ‹Innodbå‚æ•°å’ŒçŠ¶æ€ç»Ÿè®¡ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘½ä»¤æ‰§è¡Œ  SHOW ENGINE INNODB STATUS; æŸ¥çœ‹æ•´ä½“è¿è¡ŒçŠ¶æ€ç›‘æ§æ•°æ®(io,thread, buffer pool memory, SEMAPHORES, TRANSACTIONS,INSERT BUFFER AND ADAPTIVE HASH INDEX,LOG,ROW OPERATIONS)&lt;/li&gt;
&lt;li&gt;ç›¸å…³çš„å‚æ•°å¯ä»¥ä»å®˜ç½‘æŸ¥çœ‹ä»‹ç»&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/server-option-variable-reference.html&#34;&gt;Server Option, System Variable, and Status Variable Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¸‹è½½æºç  &lt;a href=&#34;https://github.com/mysql/mysql-server&#34;&gt;https://github.com/mysql/mysql-server&lt;/a&gt; 8.0 ç‰ˆæœ¬åˆ†æ”¯ï¼Œdownload zipæ–‡ä»¶ï¼Œè§£å‹ï¼Œç¼–è¯‘ï¼Œè¿è¡Œï¼Œgdb debug&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;â€‹	ç¼“/å†…å­˜ioæ¯”ç£ç›˜ioå¿«è®¸å¤šï¼Œä½†æ˜¯ç¼“/å†…å­˜ç©ºé—´æœ‰é™ï¼Œä¸”æ— æ³•æŒä¹…åŒ–ï¼Œæ‰€ä»¥éœ€è¦æä¾›ç¼“/å†…å­˜æ·˜æ±°æœºåˆ¶æ¥ä¿è¯ç¼“/å†…å­˜ä½¿ç”¨å‘½ä¸­ç‡ï¼Œæœ¬æ–‡ä»‹ç»å¸¸ç”¨çš„LRUç®—æ³•ï¼›golangå®ç°çš„å¼€æºæ–¹æ¡ˆï¼Œå¯ä»¥ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œè¿›è¡Œä½¿ç”¨ï¼Œredis ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œé€šè¿‡æŠ½æ ·å°†æ·˜æ±°çš„æ•°æ®æ”¾å…¥å¾…æ·˜æ±°æ•°æ®æ± (evictionPoolEntry) è¿›è¡Œæ·˜æ±°ï¼Œåœ¨ Redis 3.0 ä¸­ä½¿ç”¨ 10 ä¸ªæ ·æœ¬å¤§å°ï¼Œè¯¥è¿‘ä¼¼å€¼éå¸¸æ¥è¿‘ Redis 3.0 çš„åŸå§‹LRUç†è®ºæ€§èƒ½ã€‚mysql éœ€è¦å……åˆ†åˆ©ç”¨ç¼“å­˜æ± èµ„æºï¼Œå‡å°‘ç£ç›˜io, å› ä¸ºåŠ è½½å•å…ƒæ˜¯page, å¦‚æœç¬¬ä¸€æ¬¡åŠ è½½æ”¾å…¥LRUé“¾è¡¨å¤´ï¼Œå¯èƒ½è¿™äº›æ•°æ®ä½¿ç”¨é¢‘ç‡ä¸é«˜ï¼Œå¯¼è‡´ç¼“å­˜æ± å‘½ä¸­ç‡ä½ï¼Œå°†LRUé“¾è¡¨æŒ‰3/8åˆ†æˆold list å’Œnew list , ç¬¬ä¸€æ¬¡åŠ è½½æ”¾å…¥oldListå¤´ï¼Œå†æ¬¡è®¿é—®æ—¶æ‰ä¼šç§»åŠ¨åˆ°newlistã€‚æ ¹æ®æ·˜æ±°çš„ç»“æ„ï¼Œæ ¹æ®æ•°æ®ä½¿ç”¨åœºæ™¯ï¼Œå°†LRUç®—æ³•ä¼˜åŒ–, rediså’Œmysql éƒ½ç”¨åˆ°äº†pool, ä½†æ˜¯æ˜¯ä¸¤ç§åœºæ™¯ï¼Œredisæ˜¯ä¸ºäº†æ·˜æ±°é‡Šæ”¾ä½¿ç”¨æ ·æœ¬pool, æ ·æœ¬æ± ä¸­æ”¾å…¥çš„æ˜¯idleå€¼ï¼Œæ ¹æ®ä¸åŒç­–ç•¥ç®—å‡ºçš„å€¼ï¼Œç”¨æ¥æ·˜æ±°æœ€å¤§çš„idle, æ–¹ä¾¿æ‰©å±•ä¼˜åŒ–ç®—æ³•ï¼› mysql ä¸­çš„poolæ˜¯buffer pool ç¼“å†²æ± ï¼Œä¸»è¦æ˜¯ä¸ºäº†å­˜æ”¾page, page æ˜¯innodbç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œä¸ºäº†å‡å°‘ç£ç›˜io, å°½é‡å‡å°‘ç¼“å­˜miss, å¢åŠ hitç‡ï¼Œæé«˜è¯»å†™æ“ä½œæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;references&#34;&gt;references&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)&#34;&gt;Cache_replacement_policies#Least_recently_used_(LRU)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Adaptive_replacement_cache&#34;&gt;Adaptive_replacement_cache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Page_replacement_algorithm&#34;&gt;Page_replacement_algorithm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://antirez.com/news/109&#34;&gt;Random notes on improving the Redis LRU algorithm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://redis.io/topics/lru-cache&#34;&gt;Using Redis as an LRU cache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://brenocon.com/dean_perf.html&#34;&gt;Numbers Everyone Should Know&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://videolectures.net/wsdm09_dean_cblirs/&#34;&gt;Challenges in Building Large-Scale Information Retrieval Systems&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/innodb-buffer-pool.html&#34;&gt;mysql8.0 innodb-buffer-pool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/dev/mysql-server/latest/buf0lru_8cc.html&#34;&gt;mysql8.0 source code buf0lru.cc File Reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2017/11/05/&#34;&gt;MySQL Â· æºç åˆ†æ Â· InnoDB LRU Liståˆ·è„æ”¹è¿›ä¹‹è·¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2017/05/01/&#34;&gt;MySQL Â· å¼•æ“ç‰¹æ€§ Â· InnoDB Buffer Pool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://mysql.taobao.org/monthly/2021/01/06/&#34;&gt;MySQL Â· æºç é˜…è¯» Â· Innodbå†…å­˜ç®¡ç†è§£æ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/internals/en/&#34;&gt;MySQL Internals Manual&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.mysql.com/doc/refman/8.0/en/server-option-variable-reference.html&#34;&gt;Server Option, System Variable, and Status Variable Reference&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>æœåŠ¡æ”¹é€ ç®€è¿°</title>
      <link>https://weedge.github.io/post/servicetransformation/</link>
      <pubDate>Tue, 26 Oct 2021 22:04:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/servicetransformation/</guid>
      
        <description>&lt;h4 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h4&gt;
&lt;p&gt;éšç€å‰æœŸä¸šåŠ¡è¿­ä»£ä¸æ–­å¢å¤šï¼Œä¼šç•™ä¸‹ä¸€äº›æŠ€æœ¯å€ºåŠ¡ï¼›ç”¨æˆ·ä¸æ–­ç´¯è®¡å¢åŠ ï¼Œæ•´ä½“DAU,MAU,PV/UVçš„ä¸æ–­ä¸Šå‡ï¼Œä¸ºäº†ç¬¦åˆæ ¹æ®ç»„ç»‡ç»“æ„å’Œä¸šåŠ¡éœ€æ±‚æ›´åŠ ç¨³å®šå¥åº·çš„å‘å±•ï¼Œéœ€è¦å¯¹ä¸šåŠ¡æœåŠ¡è¿›è¡Œæ”¹é€ /é‡æ„ï¼›é‡‡ç”¨å›¢é˜Ÿé€‚åˆçš„è¯­è¨€å¼€å‘ï¼Œå°†æœåŠ¡è¿›è¡Œåˆ†å±‚ï¼ŒæŠ½è±¡åº•å±‚æ¨¡å‹ï¼Œåˆ†ç¦»å‡ºä¸å˜/æ˜“å˜ä¸šåŠ¡é€»è¾‘ï¼›ä¸šåŠ¡æ”¹é€ å’ŒåŸºç¡€å»ºè®¾æœåŠ¡å‡çº§ï¼ˆæ•´ä½“ç³»ç»Ÿè®¤çŸ¥çš„æ”¹å˜ï¼‰&lt;/p&gt;
&lt;h4 id=&#34;è¿‡ç¨‹&#34;&gt;è¿‡ç¨‹&lt;/h4&gt;
&lt;p&gt;æ•´ä½“æœåŠ¡åˆ†ä¸º4ä¸ªé˜¶æ®µè¿›è¡Œç®€è¿°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¿«é€Ÿä¸Šçº¿ï¼Œéœ€æ±‚å¤šï¼Œè¿­ä»£å¿«ï¼Œå¼€å‘å›¢é˜Ÿæ•´ä½“ä½¿ç”¨ç†Ÿæ‚‰å¼€å‘æ¡†æ¶ï¼ˆæ•ˆç›Šï¼šå‰æœŸèµ·æ­¥ä½¿ç”¨rdç†Ÿæ‚‰çš„å¼€å‘è„šæœ¬è¯­è¨€ï¼Œæ”¯æŒéœ€æ±‚å¿«é€Ÿè¿­ä»£ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åé¢åŠŸèƒ½å¤ç”¨ï¼Œ å»ºè®¾ä¸šåŠ¡ä¸­å°ï¼Œ ç›´æ’­ä¸­å°ï¼Œäº’åŠ¨ä¸­å°çš„å»ºè®¾ï¼Œä¸­å°çš„è¯·æ±‚å¤§ï¼Œé‡‡ç”¨golangè¿›è¡Œå¼€å‘ï¼Œï¼ˆæ•ˆç›Šï¼šæ•´ä½“æœºå™¨èµ„æºæ¶ˆè€—å‡å°‘, é«˜å³°æœŸæœºå™¨è´Ÿè½½é™ä½)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹æ®ç›´æ’­ä¸šåŠ¡åœºæ™¯ï¼ŒæŠ½è±¡ä¸­å°åº•å±‚æ•°æ®æ¨¡å‹ï¼Œï¼ˆæ•ˆç›Šï¼šå‡å°‘äººåŠ›ï¼Œæé«˜å¤ç”¨ï¼Œå¢åŠ æ•´ä½“ç ”å‘æ•ˆèƒ½ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¼€å‘è¯­è¨€è¿ç§»ï¼Œ æœåŠ¡æ¨¡å‹ä»å¤šè¿›ç¨‹è„šæœ¬å¼±ç±»å‹è¯­è¨€åˆ‡åˆ°å¤šåç¨‹å¼ºç±»å‹è¯­è¨€ï¼Œéœ€è¦é€‚é…æ¥å£&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éœ€è¦æ¢³ç†æ ¸å¿ƒæœåŠ¡æ¥å£å’Œéæ ¸å¿ƒæœåŠ¡æ¥å£ï¼Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡ä¸Šçº¿ï¼Œè¿ç§»è€æ¥å£ï¼Œ éœ€è¦åšæµé‡çš„åˆ‡åˆ†ï¼Œæ–°è€æ¥å£çš„diff , æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸šåŠ¡å±‚é¢åŠ ä¸Šç°åº¦ç­–ç•¥ï¼Œé€šè¿‡ç­–ç•¥é…ç½®ï¼Œå¯¹ä¸åŒçš„ä¸šåŠ¡idè¿›è¡Œå¼‚æ­¥åˆ†æµï¼Œä¸€ä»½è¯·æ±‚æ•°æ®ï¼Œ2ä»½å“åº”æ•°æ®ï¼Œåªè¿”å›è€çš„å“åº”æ•°æ®ï¼Œæ–°è€å“åº”æ•°æ®è¿›è¡Œdiffå¤„ç†ï¼›ä¼˜ç‚¹ï¼šä¸šåŠ¡æ”¹é€ æ–¹è‡ªå·±æŠŠæ§ï¼›ç¼ºç‚¹ï¼šå¯¹ä¸šåŠ¡ä»£ç æœ‰ä¾µå…¥ï¼Œå¦‚æœæ”¹é€ ç°åº¦ç­–ç•¥å¤šçš„è¯ï¼Œä¼šé™ä½ä¸šåŠ¡ä»£ç é€»è¾‘ç¨³å®šæ€§ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨æ–°è€æœåŠ¡ä¹‹ä¸ŠåŠ ä¸€å±‚æ¥å£ä»£ç†å±‚ï¼Œæ¥å£é€‚é…ï¼Œç°åº¦ç­–ç•¥æµé‡åˆ‡åˆ†ï¼Œæ–°è€æ¥å£diffåŠŸèƒ½ ç§»è‡³ æ¥å£ä»£ç†å±‚åšï¼Œç›¸å½“äºæä¾›ä¸€å±‚ç½‘å…³æœåŠ¡æ¥å¤„ç†ï¼›ä¼˜ç‚¹ï¼š å¯¹æ¥å£ç°åº¦è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä¸ä¼šå¯¹ä¸šåŠ¡ä»£ç æœ‰æµ¸å…¥æ“ä½œï¼›ç¼ºç‚¹ï¼šå¤šäº†ä¸€å±‚ä»£ç†å±‚ï¼Œæ¥å£å“åº”æ—¶é—´ä¼šæœ‰æ‰€å¢åŠ ï¼Œéœ€è¦ä¿è¯ä»£ç†å±‚çš„ç¨³å®šæ€§ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸¤ç§æ–¹æ¡ˆéƒ½å¯ä»¥ï¼Œéœ€è¦ç»“åˆç»„ç»‡ç»“æ„æ¥è€ƒè™‘å¼€å‘æŠ€æœ¯æˆæœ¬ï¼Œ æ–¹æ¡ˆä¸€ï¼šä¸éœ€è¦é¢å¤–çš„äººåŠ›æ¥æ”¯æŒç»´æŠ¤ä»£ç†å±‚ï¼›æ–¹æ¡ˆäºŒï¼šéœ€è¦å•ç‹¬çš„å›¢é˜Ÿæˆ–è€…å¼€å‘äººå‘˜æ¥ç»´æŠ¤ä»£ç†å±‚ï¼› å¦‚æœçœ‹æ•´ä½“æ”¶ç›Šçš„è¯ï¼Œåå‘äºç¬¬äºŒç§æ–¹æ¡ˆï¼Œå‰è€…å°±æ˜¯æˆ˜æœ¯ç¼–ç¨‹ï¼Œåè€…å°±æ˜¯æˆ˜ç•¥ç¼–ç¨‹ï¼Œåº”è¯¥ä¾§é‡æˆ˜ç•¥ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯¾ä¸­ç›´æ’­æ˜¯æµé‡çªå‘çš„åœºæ™¯ï¼Œå¯¹äºæœåŠ¡ä¼˜åŒ–æ”¹é€ ï¼ŒæœåŠ¡å‹åŠ›æµ‹è¯•å¿…ä¸å¯å°‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¥å£å‹æµ‹ï¼Œå…³æ³¨qpsï¼Œæ¥å£å“åº”æ—¶é—´ï¼ŒæœåŠ¡ç›‘æ§ï¼Œè´Ÿè½½ç­‰æƒ…å†µï¼›&lt;/li&gt;
&lt;li&gt;å…¨é“¾è·¯å‹ä¾§ï¼Œå…³æ³¨tpsï¼Œæ•´ä½“é“¾è·¯è°ƒç”¨æ¥å£å“åº”æ—¶é—´è€—æ—¶ï¼Œæ€»å“åº”æ—¶é—´è€—æ—¶ï¼Œå„æœåŠ¡ç›‘æ§ï¼Œè´Ÿè½½ç­‰æƒ…å†µï¼›å¹¶ä¸”è¾“å‡ºæµ‹è¯•æŠ¥è¡¨ï¼›ä¸ºäº†ä¸æ±¡æŸ“çº¿ä¸Šæ•°æ®ï¼Œéœ€è¦å¯¹åŸºç¡€å­˜å‚¨ç»„ä»¶ å•ç‹¬éƒ¨ç½²ä¸€å¥—å½±å­ç³»ç»Ÿï¼ŒæœåŠ¡é“¾è·¯ä¸Šéœ€è¦åŠ ä¸Šå‹ä¾§æ ‡ç­¾å‚æ•°ï¼›å¯å‚è€ƒï¼š&lt;a href=&#34;https://help.aliyun.com/document_detail/29337.html&#34;&gt;æ€§èƒ½æµ‹è¯• PTS&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿è¯åˆ‡æµè¿‡ç¨‹ä¸­æœåŠ¡æ¯”è¾ƒç¨³å®šï¼Œè¿›è¡Œå‘¨æœŸæ€§å¼•æµï¼Œåˆ‡æµè§‚å¯Ÿï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ—è·¯å¼•æµdiffï¼Œè¦†ç›–åˆ°ä¸šåŠ¡å…¨åœºæ™¯çš„æƒ…å†µï¼Œdiffåœ¨å¯æ¥å—èŒƒå›´å†…ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥ æµé‡åˆ‡æµ&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ä¿è¯æœåŠ¡ç¨³å®šæ€§ï¼Œä¸å‡ºç°p0,p1,p2äº‹æ•…ï¼Œæµé‡åˆ‡æ¢çš„å‘¨æœŸä¸€èˆ¬æ¯”è¾ƒé•¿ï¼ŒæŒ‰è¦†ç›–åˆ°çš„ä¸šåŠ¡åœºæ™¯å’Œæ•´ä½“æœåŠ¡ç›‘æ§æƒ…å†µè€Œå®šï¼ŒæŒ‰1%ã€2%ã€10%ã€20%ï¼Œ40%ï¼Œ80%æ”¾é‡ï¼›æŸ¥çœ‹å®¢æˆ·ç«¯æ˜¯å¦æœ‰å¼‚å¸¸ä»¥åŠç”¨æˆ·çš„åé¦ˆå·¥å•ï¼Œåˆ‡æµæ”¾é‡é˜¶æ®µdiffè¿˜æ˜¯æ­£å¸¸è¿›è¡Œï¼Œè¿”å›æ˜¯å¦æœ‰é—®é¢˜ï¼Œå­˜æ”¾æ•°æ®æ˜¯å¦ä¸€è‡´ï¼›æ²¡æœ‰é—®é¢˜ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥  çº¿ä¸Šè§‚å¯Ÿ&lt;/li&gt;
&lt;li&gt;çº¿ä¸Šè§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼Œä¼šä»¥æœˆä¸ºå•ä½ï¼Œè§‚å¯Ÿé˜¶æ®µä¸»è¦æœåŠ¡æµé‡æ˜¯æ–°æ”¹é€ çš„æœåŠ¡ï¼Œå¦‚æœå‘ç°æœ‰å¼‚åŠ¨ï¼Œè¿˜å¯ä»¥åˆ‡å›åŸæ¥çš„æœåŠ¡ï¼›å¦‚æœè§‚å¯Ÿé˜¶æ®µæ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸‹æ‰åŸæ¥çš„æœåŠ¡äº†ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡æ”¹é€ è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰æ–°çš„ä¸šåŠ¡éœ€æ±‚è¿›æ¥ï¼Œå¦‚æœæ˜¯å¤§çš„éœ€æ±‚ï¼Œå¼€å‘å‘¨æœŸæ¯”è¾ƒé•¿çš„é¡¹ç›®ï¼Œå¦‚æœæ˜¯ç´§æ€¥é¡¹ç›®ï¼Œåªèƒ½åœ¨åŸæœ‰æœåŠ¡ä¸Šè¿›è¡Œå¼€å‘ï¼Œåç»­åœ¨è¿ç§»è‡³æ–°ç³»ç»Ÿä¸­ï¼›å¯¹äºéç´§æ€¥éœ€æ±‚ï¼Œå¯ä»¥æš‚ç¼“å‹å‹ï¼Œå¯ä»¥ç­‰æ–°æœåŠ¡ä¸Šçº¿ç¨³å®šä¹‹åï¼Œåœ¨ä½¿ç”¨æ–°æœåŠ¡æ¡†æ¶å¼€å‘ï¼Œä¸Šçº¿éƒ¨ç½²ï¼Œä¸»è¦çœ‹éœ€æ±‚ä¸­æ˜¯å¦éœ€è¦ä¿®æ”¹è€æ¥å£ï¼Œè¿˜æ˜¯ç›´æ¥æä¾›æ–°æ¥å£å°±å¯ä»¥æ»¡è¶³ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®¹å™¨åŒ–æ”¹é€ ï¼Œä¸Šäº‘ï¼ˆæ•ˆç›Šï¼šæ•´ä½“æµ‹è¯•ï¼Œçº¿ä¸Šç¯èŠ‚ä¿æŒä¸€è‡´ï¼ŒèŠ‚çº¦å¼€å‘æµ‹è¯•æ—¶é—´ï¼›çº¿ä¸ŠæœåŠ¡æ²»ç†é€šè¿‡K8S+Istio,è¿›è¡Œç½‘æ ¼åŒ–æ²»ç†, ä»¥å‰éƒ¨ç½²åœ¨ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºä¸Šï¼Œæ··éƒ¨çš„æƒ…å†µï¼Œèµ„æºåˆ†é…å’Œéš”ç¦»ä¸åˆç†ï¼Œè¿ç§»åï¼Œå¯ä»¥å……åˆ†åˆç†åˆ©ç”¨å®¿ä¸»ç‰©ç†æœº/è™šæ‹Ÿæœºèµ„æºï¼Œéš”ç¦»ï¼Œå¼¹æ€§æ‰©ç¼©å®¹ï¼Œéƒ¨ç½²ä¸Šçº¿å‰ææ¡ä»¶æ˜¯éœ€è¦ä¿è¯K8Så¯ç”¨æ€§ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯¹ä¸åŒè¯­è¨€æœåŠ¡è¿›è¡Œå®¹å™¨åŒ–æ”¹é€ ï¼Œæœ‰ä¸åŒä¸šåŠ¡éƒ¨é—¨æ¨è¿›(ä¸»è¦æ˜¯é¡¹ç›®æ„å»ºæ‰“åŒ…æˆé•œåƒï¼Œdockerçš„è¯éœ€è¦ç¼–å†™Dockerfile)ï¼ŒåŸºç¡€çš„èµ„æºç®¡ç†ç”±devopsæä¾›CI(gitlab ci)/CDå¹³å°æ•´åˆä¸Šçº¿(å¯ä»¥éƒ¨ç½²ç‰©ç†æœº/è™šæ‹Ÿæœº/éƒ¨ç½²(kubectl/istioctl)å®¹å™¨ä¸Šäº‘)&lt;/li&gt;
&lt;li&gt;åœ¨è¿ç§»è‡³å®¹å™¨äº‘(Kubernetes é›†ç¾¤ä¸­çš„åº”ç”¨)çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ°ä¸€éƒ¨åˆ†æœåŠ¡å®¹å™¨åŒ–éƒ¨ç½²ä¸Šçº¿ï¼Œä¸€éƒ¨åˆ†è¿˜æ˜¯éƒ¨ç½²åœ¨ç‰©ç†æœº/è™šæ‹Ÿæœºä¸Šï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’è®¿é—®ï¼Œå®¹å™¨äº‘-&amp;gt;å®¹å™¨äº‘ï¼Œå®¹å™¨äº‘-&amp;gt;ç‰©ç†æœº/è™šæ‹Ÿæœºï¼Œ ç‰©ç†æœº/è™šæ‹Ÿæœº-&amp;gt;å®¹å™¨äº‘ï¼Œéœ€è¦ä¸šåŠ¡æ¢³ç†å‡ºæœåŠ¡ä¹‹é—´çš„è°ƒç”¨å…³ç³»ï¼Œç„¶åå¯¹3ç§æœåŠ¡è°ƒç”¨æƒ…å†µè¿›è¡Œæ”¹é€ ï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨sidecaræ¨¡å¼è¿›è¡Œæµé‡è¾“å…¥è¾“å‡º&lt;/li&gt;
&lt;li&gt;é€šè¿‡K8Sæ¥ç¼–æ’æœåŠ¡ï¼Œä¼šå‡ºç°æœåŠ¡æ²»ç†çš„é—®é¢˜ï¼Œéœ€è¦å¯è§†åŒ–ï¼Œç›‘æ§ï¼Œè¿½æŸ¥å®šä½é—®é¢˜ç­‰ç›¸å…³å¹³å°æ¥æ•´åˆï¼Œå¯¹åº”çš„è§„èŒƒå’Œå¼€æºå·¥å…·æ•´åˆè¿›æ¥ï¼Œlog: é‡‡é›†æ—¥å¿—ï¼Œå­˜å‚¨æ—¥å¿—(çƒ­/å†·)ï¼ŒæŸ¥æ‰¾æ—¥å¿—ï¼›metric: ç›‘æ§æ•°æ®é‡‡é›†ï¼Œç›‘æ§æŒ‡æ ‡ï¼Œç›‘æ§çœ‹æ¿/å¤§ç›˜ï¼›trace: æœåŠ¡è¯·æ±‚è®¿é—®é“¾è·¯è¿½è¸ªï¼ŒæœåŠ¡è°ƒç”¨å“åº”æ—¶é—´ï¼Œæ•´ä½“å“åº”æ—¶é—´ï¼›ä»¥åŠk8sæœ¬èº«è°ƒåº¦èŠ‚ç‚¹ä¸­podèµ„æºç›‘æ§&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²è‡³å®¹å™¨äº‘åçš„æ•´ä½“æµ‹è¯•ï¼Œæ¥å£å‹ä¾§ï¼Œæ•´ä½“é“¾è·¯å‹ä¾§&lt;/li&gt;
&lt;li&gt;ä¸Šçº¿åçš„åˆ‡æµæ–¹æ¡ˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;éšç€ä¸šåŠ¡çš„å‘å±•ï¼ŒæœåŠ¡ä¸æ–­è¿­ä»£æ”¹é€ ï¼Œæ¶‰åŠåˆ°ä¸šåŠ¡å±‚é¢æŠ½è±¡æ”¹é€ ï¼Œä»¥åŠåŸºç¡€å¹³å°æœåŠ¡çš„å‡çº§ï¼›æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†æ»¡è¶³æ—¥ç›Šå¢é•¿çš„éœ€æ±‚ï¼Œç¼©çŸ­éœ€æ±‚å‘å¸ƒåˆ°ä¸Šçº¿çš„å‘¨æœŸï¼Œå¤ç”¨ï¼Œå‡å°‘è¿­ä»£å¯¹æœåŠ¡æ•´ä½“ç¨³å®šæ€§çš„å½±å“ã€‚&lt;/p&gt;
&lt;h4 id=&#34;references&#34;&gt;References&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://jimmysong.io/kubernetes-handbook/practice/service-discovery-and-loadbalancing.html&#34;&gt;k8s-service-discovery-and-loadbalancing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.servicemesher.com/istio-handbook/practice/integration-registry.html&#34;&gt;istioé›†æˆæœåŠ¡æ³¨å†Œä¸­å¿ƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.servicemesher.com/istio-handbook/concepts/sidecar-injection.html&#34;&gt;Sidecar æ¨¡å¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhaohuabing.com/post/2019-10-21-pilot-discovery-code-analysis/&#34;&gt;Istio Pilot ç»„ä»¶ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>å·¥ç¨‹å¸ˆå…­å¤§æ„è¯†</title>
      <link>https://weedge.github.io/post/rd/</link>
      <pubDate>Sat, 02 Oct 2021 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/rd/</guid>
      
        <description>&lt;h2 id=&#34;1æ—¶é—´æ„è¯†&#34;&gt;&lt;strong&gt;1.æ—¶é—´æ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    æ—¶é—´æ„è¯†çš„ç»ˆæç›®æ ‡æ˜¯æŒ‰æ—¶ä¿è´¨çš„å®Œæˆå·¥ä½œã€‚æ—¶é—´æ˜¯ä¸€ç§å®è´µçš„èµ„æºï¼Œç”±äºæ¯å¤©å·¥ä½œæ—¶é—´çš„æœ‰é™çš„è€Œéœ€è¦å¤„ç†äº‹æƒ…æ˜¯å¤æ‚å¤šå˜æ€§çš„ï¼Œä¸ºäº†æŒ‰æ—¶ä¿è´¨çš„å®Œæˆå·¥ä½œï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æœ‰æå¼ºçš„æ—¶é—´æ„è¯†ï¼Œä½¿ç”¨ç§‘å­¦çš„æ—¶é—´ç®¡ç†ç­–ç•¥ã€‚æ€»çš„æ¥è¯´ï¼Œæ—¶é—´ç®¡ç†å°±æ˜¯è®©æˆ‘ä»¬æ›´æœ‰è®¡åˆ’çš„çŸ¥é“éœ€è¦åšä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆï¼Œè€Œæ—¶é—´ç®¡ç†çš„éš¾ç‚¹ä¸ºï¼šäº‹æƒ…å…·æœ‰çªå‘æ€§ã€å®Œæˆæ—¶é—´éš¾ä»¥é¢„ç®—æ€§ã€æ‰§è¡ŒåŠ›å’Œé¢„æœŸä¸ç¬¦åˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;11åšæ˜ç¡®è®¡åˆ’&#34;&gt;1.1åšæ˜ç¡®è®¡åˆ’&lt;/h3&gt;
&lt;p&gt;â€‹    èŠ±ä¸€å®šçš„æ—¶é—´ä¸“é—¨åšè®¡åˆ’ï¼Œç²¾ç¡®åˆ°å°æ—¶ï¼Œç£¨åˆ€ä¸è¯¯ç æå·¥ã€‚ä¸ºäº†åšå‡ºç²¾ç¡®çš„è®¡åˆ’ï¼Œæé«˜æ—¶é—´çš„åˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸ªäººæ—¶é—´å’Œä»»åŠ¡å®‰æ’åˆ†å—åŒ–ï¼Œè®©åŒæ€§è´¨çš„ä»»åŠ¡éƒ¨é—¨åˆ†é…åŒä¸€æ®µæ—¶é—´æ¥å¤„ç†ï¼Œè®©é›¶ç¢çš„æ—¶é—´å¤„ç†ç»†ç¢çš„é—®é¢˜ï¼Œé«˜æ•ˆç‡çš„æ—¶é—´åšå¤§å—é‡è¦å›°éš¾çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;12èƒ½å°½å¿«å®Œæˆå°±å°½å¿«å®Œæˆç»™ä»¥çªå‘äº‹æƒ…ä¸€å®šé¢„ç®—ä½™åœ°&#34;&gt;1.2èƒ½å°½å¿«å®Œæˆå°±å°½å¿«å®Œæˆï¼Œç»™ä»¥çªå‘äº‹æƒ…ä¸€å®šé¢„ç®—ä½™åœ°&lt;/h3&gt;
&lt;p&gt;â€‹    å³ä½¿æ¯å¤©è®¡åˆ’çš„æ¸…æ¸…æ¥šæ¥šçš„å·¥ä½œå®‰æ’ï¼Œè¿˜æ˜¯å¾ˆå¤§å¯èƒ½å‡ºç°çªå‘äº‹æƒ…æ‰“ä¹±è®¡åˆ’ï¼Œå› ä¸ºæˆ‘ä»¬çš„å·¥ä½œæ€§è´¨å°±æ˜¯è¿™æ ·çš„ï¼Œéœ€è¦éšæ—¶å¾…å‘½è§£å†³çªå‘çš„é—®é¢˜ï¼Œå¹¶ä¸”å¾ˆå¤šäº‹æƒ…æ˜¯éš¾ä»¥å‡†ç¡®é¢„ç®—å®Œæˆæ—¶é—´çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¿«çš„å®Œæˆä»»åŠ¡è€Œä¸æ˜¯æ‹–åˆ°æœ€åç”šè‡³æ‹–åˆ°æ˜å¤©ï¼Œè¿™æ ·æ‰èƒ½æœ€å¤§é™åº¦çš„ç•™ç»™æœªçŸ¥å¯èƒ½çš„å¤„ç†ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;â€‹    ç°åœ¨çš„ç¤¾ä¼šå¤„äºäº’è”ç½‘äº§ä¸šé«˜é€Ÿå‘å±•æ—¶æœŸï¼Œåˆ°å¤„å……æ»¡ç€æœºé‡ï¼Œä½†æ˜¯ä¸ç®¡å¯¹ä¼ä¸šè¿˜å¯¹ä¸ªäººæ¥è¯´åˆéƒ½é¢é¢†ç€æå¤§çš„ç«äº‰æŒ‘æˆ˜ã€‚æƒ³è¦åœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ç”Ÿå­˜å¹¶ä¸”å‰è¿›ï¼Œéœ€è¦æˆ‘ä»¬å…·æœ‰äº‰åˆ†å¤ºç§’çš„æ„è¯†ï¼Œä»Šå¤©è½åä¸€æ­¥ï¼Œå°±éœ€è¦æ— æ•°å¤©çš„åŠ é€Ÿæ‰èƒ½è¿½ä¸Šåˆ«äººï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œèº«ä¸ºå›¢é˜Ÿçš„ä¸€å‘˜ï¼Œå¾ˆå¯èƒ½å› ä¸ºè‡ªå·±çš„ä¸€ç‚¹æ‡ˆæ€ è€Œæ‹–æ…¢å›¢é˜Ÿçš„è„šæ­¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;13æ€»ç»“æé«˜é”»ç‚¼åšæ¯…çš„æ€§æ ¼æé«˜æ‰§è¡ŒåŠ›åº¦&#34;&gt;1.3æ€»ç»“æé«˜ï¼Œé”»ç‚¼åšæ¯…çš„æ€§æ ¼ï¼Œæé«˜æ‰§è¡ŒåŠ›åº¦&lt;/h3&gt;
&lt;p&gt;â€‹    é™¤äº†äº‹æƒ…æœ¬èº«çš„å¤šå˜æ€§å’Œç«äº‰çš„æ¿€çƒˆæ€§ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯æˆ‘ä»¬é€šå¸¸ä¼šé«˜ä¼°è‡ªå·±çš„æ‰§è¡ŒåŠ›ï¼Œè¿™éœ€è¦æˆ‘ä»¬æˆ‘ä»¬è¿›è¡Œè‡ªæˆ‘ç®¡ç†è‡ªæˆ‘çº¦æŸï¼ŒåŸ¹å…»åšæ¯…çš„æ€§æ ¼ï¼Œå…·æœ‰å¾ˆå¼ºçš„è´£ä»»å¿ƒï¼Œé«˜æ•ˆç‡çš„æ‰§è¡ŒåŠ›ï¼Œä¸»åŠ¨çš„å‘åˆ«äººæ±‡æŠ¥è¿›åº¦ï¼Œæ ‘ç«‹èµ·ä¸€ä¸ªè®©è‡ªå·±å’Œåˆ«äººéƒ½ä¿¡å¾—è¿‡çš„å½¢è±¡ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸æ–­çš„æ€»ç»“æé«˜è®¡åˆ’çš„å‡†ç¡®æ€§ï¼Œçœ‹æ¸…è‡ªå·±ï¼Œçœ‹æ¸…é—®é¢˜ï¼Œå°†è‡ªå·±å’Œé—®é¢˜å‡†ç¡®çš„åœ¨æ—¶é—´ç»´åº¦ä¸Šæ¥å¯¹åº”èµ·æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2è´¨é‡æ„è¯†&#34;&gt;&lt;strong&gt;2.è´¨é‡æ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    æ—¶é—´æ˜¯å®è´µçš„èµ„æºï¼Œä½†æ˜¯ä¸èƒ½ä¸ºäº†èŠ‚çœæ—¶é—´è€Œé™ä½è´¨é‡ï¼Œæ—¶é—´æ˜¯ç”¨æ¥ä½¿ç”¨çš„ï¼ŒçœŸæ­£çš„èŠ‚çœæ—¶é—´å°±æ˜¯åˆç†é«˜æ•ˆçš„ä½¿ç”¨æ—¶é—´ã€‚æ¬²é€Ÿåˆ™ä¸è¾¾ï¼Œåœ¨å¤æ‚åºå¤§çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ¯ä¸€ä¸ªå°å°çš„è´¨é‡é—®é¢˜ï¼Œéƒ½å¯èƒ½å¯¼è‡´å·¨å¤§çš„ç¾éš¾ï¼Œæ¯”å¦‚æœ‰å¯èƒ½è¿™ä¸ªç¾éš¾åªæ˜¯å› ä¸ºæŸä¸€ä¸ªè¿›åˆ¶è½¬æ¢ç²¾åº¦æŸå¤±å¼•èµ·çš„ã€‚å¦‚ä½•ä¿è¯è´¨é‡ï¼Œéœ€è¦ä¸ªäººçš„è´£ä»»å¿ƒã€éœ€è¦å›¢é˜Ÿçš„æ­£ç¡®æ–‡åŒ–æ°›å›´ã€éœ€è¦ç§‘å­¦çš„è´¨é‡ä¿è¯æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;â€‹    é¦–å…ˆéœ€è¦æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªä¿è¯è´¨é‡çš„è´£ä»»å¿ƒï¼Œæ¯ä¸€ä¸ªäººéƒ½è¦å¯¹è´¨é‡è´Ÿè´£ï¼Œè¦æœ‰å±…å®‰æ€å±çš„æ„è¯†ï¼Œä¸èƒ½é»˜è®¤æ²¡é—®é¢˜ï¼Œè€Œæ˜¯è¦åå¤æ ¸å¯¹è‡ªå·±çš„å·¥ä½œï¼Œä¸è¦ç­‰ç€åˆ«äººæ¥å‘ç°è‡ªå·±çš„é—®é¢˜ï¼Œä¸è¦ä¾èµ–æµç¨‹ï¼Œæ¯”å¦‚å¼€å‘ä¸èƒ½ä¾èµ–æµ‹è¯•ï¼Œæµ‹è¯•åªæ˜¯æœ€åçš„è´¨é‡æ£€æŸ¥è€Œå·²ï¼Œè€Œä¸æ˜¯ä¿è¯ï¼Œè€Œä¸”å±€é™æ€§å°ï¼Œå³ä½¿æµ‹è¯•å‡ºé—®é¢˜ï¼Œä¿®æ”¹ä¹Ÿæ˜¯è´¹æ—¶è´¹åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;â€‹    ç„¶åå°±æ˜¯æœ‰ä¸€å¥—ç§‘å­¦çš„è´¨é‡ä¿è¯æµç¨‹ï¼Œæ¯”å¦‚éœ€æ±‚çš„å®¡æ ¸ã€å¼€å‘çš„æµ‹è¯•ã€ä¸Šçº¿è¿‡ç¨‹è¯„å®¡ç­‰ï¼Œè´¨é‡ä¿è¯å·¥ä½œå­˜åœ¨äºæ¯ä¸€ä¸ªç¯èŠ‚ï¼Œæ—©å‘ç°æ—©è§£å†³ï¼Œå› ä¸ºè¶Šåˆ°åé¢æŒ½æ•‘çš„ä»£ä»·è¶Šå¤§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3æ²Ÿé€šæ„è¯†&#34;&gt;&lt;strong&gt;3.æ²Ÿé€šæ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    æ²Ÿé€šçš„æœ¬è´¨å°±æ˜¯ï¼Œäº†è§£ä»–äººçš„éœ€è¦ï¼Œè¡¨è¾¾è‡ªå·±çš„éœ€è¦ï¼Œæ²Ÿé€šæ˜¯é¡¹ç›®æˆåŠŸçš„é‡è¦æŠ€å·§ä¹‹ä¸€ã€‚æ²Ÿé€šæ— å¤„ä¸åœ¨ï¼ŒåŒ…æ‹¬ï¼šæ–‡æ¡£ã€é‚®ä»¶ã€åˆåŒï¼Œæ›´ç›´æ¥ç‚¹çš„å°±æ˜¯ç”µè¯ã€å£å¤´ã€‚å¯¹äºå¼€å‘è€Œè¨€ï¼Œä»£ç æœ¬èº«å°±æ˜¯ç”¨äºæ²Ÿé€šï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¸¥æ ¼è¦æ±‚ä»£ç è§„èŒƒï¼Œè¦æ„è¯†åˆ°ä»£ç æ˜¯è¦ç”¨äºæ²Ÿé€šçš„ï¼Œè®©äººä¸€çœ‹å°±æ‡‚çš„æ‰æ˜¯å¥½ä»£ç ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31æ²Ÿé€šçš„æ€åº¦&#34;&gt;3.1æ²Ÿé€šçš„æ€åº¦&lt;/h3&gt;
&lt;p&gt;â€‹    æ²Ÿé€šä¸­çš„åŒå‘æ˜¯ä»£è¡¨å„è‡ªè§’è‰²çš„æ²Ÿé€šï¼Œè€Œä¸æ˜¯ä¸ªäººé—´çš„æ²Ÿé€šï¼Œä¹Ÿæ˜¯é€šå¸¸æˆ‘ä»¬è¯´çš„ å¯¹äº‹ä¸å¯¹äºº ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ²Ÿé€šä¸­ä¸è¦å¿˜è®°è‡ªå·±çš„èŒä¸šè§’è‰²ï¼Œä¹Ÿä¸è¦å¿½è§†å¯¹æ–¹çš„èŒä¸šè§’è‰²ã€‚åœ¨æ²Ÿé€šä¸­æˆ‘ä»¬è¦å…¬å¼€å’Œå¦è¯šåœ°è¡¨è¾¾è‡ªå·±çš„æ„è§ï¼ŒåŒæ—¶è¦æœ‰å°Šé‡åˆ«äººçš„æƒåˆ©çš„æ€åº¦ï¼Œå¤šç”¨æè¿°æ€§è¯­å¥ï¼Œå°‘ç”¨åˆ¤æ–­æ€§è¯­å¥ï¼Œè¦æœ‰ç§¯æçš„æ€åº¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;32ä¸»åŠ¨æ²Ÿé€š&#34;&gt;3.2ä¸»åŠ¨æ²Ÿé€š&lt;/h3&gt;
&lt;p&gt;â€‹    çœ‹é—®é¢˜çš„è§’åº¦ä¸åŒï¼Œçœ‹æ³•å’Œè§‚ç‚¹ä¼šä¸ä¸€è‡´ï¼Œæˆ‘ä»¬æ— æ³•å¯„å¸Œæœ›äºå¯¹æ–¹ä¸»åŠ¨æ¥æ‰¾æˆ‘ä»¬æ²Ÿé€šï¼Œæ‰€ä»¥ä¸ºäº†å¾—åˆ°å¥½çš„ç»“æœï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨å»æ²Ÿé€šã€‚æ‰€ä»¥è¦åšå¥½ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰åšå¥½æ²Ÿé€šå‰çš„å‡†å¤‡ï¼Œæƒ³å¥½è¦è¡¨è¿°çš„é—®é¢˜å’Œæƒ³çŸ¥é“çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æŠŠæ¡æ²Ÿé€šæ—¶æœºï¼Œè¦åœ¨é€‚å½“çš„æ—¶é—´ã€åœ°ç‚¹ï¼ŒåŒæ—¶è€ƒè™‘å¥½æ²Ÿé€šå¯¹è±¡çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰é€‰æ‹©å¥½æ²Ÿé€šæ–¹å¼ï¼Œæ ¹æ®æ²Ÿé€šç´§æ€¥ç¨‹åº¦ï¼Œå…·ä½“é—®é¢˜çš„ä¸åŒï¼Œé€‰æ‹©åˆé€‚çš„æ²Ÿé€šæ–¹å¼ï¼Œå¦‚ï¼šé¢è°ˆã€ç”µè¯ã€ä¹¦é¢ï¼ˆå«å³æ—¶é€šè®¯å·¥å…·ï¼‰ç­‰&lt;/p&gt;
&lt;h2 id=&#34;4å›¢é˜Ÿæ„è¯†&#34;&gt;&lt;strong&gt;4.å›¢é˜Ÿæ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    è¦å®ç°ç›®æ ‡ï¼Œæœ€é‡è¦çš„å°±æ˜¯å›¢é˜Ÿï¼Œæˆ‘ä»¬è®©è‡ªå·±å˜å¾—ä¼˜ç§€çš„æœ¬è´¨ä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿä¸ºå›¢é˜Ÿåšæ›´å¤§çš„è´¡çŒ®ï¼Œé€šè¿‡å›¢é˜Ÿå®ç°ä¸ªäººï¼Œä¹Ÿé€šè¿‡ä¸ªäººè´¡çŒ®å›¢é˜Ÿã€‚å¬è¯´è¿™æ ·ä¸€å¥è¯ï¼Œä¸€ä¸ªä¸­å›½äººæ˜¯ä¸€æ¡é¾™ï¼Œä¸€ç¾¤ä¸­å›½äººæ˜¯ä¸€ç¾¤è™«ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨å›½å¤–äººçœ¼ä¸­ç¼ºå°‘å›¢é˜Ÿçš„æ„è¯†ã€‚å¯¹äºå›¢é˜Ÿæˆ‘ä»¬è¦æœ‰ä»¥ä¸‹æ„è¯†ï¼š&lt;/p&gt;
&lt;h3 id=&#34;41é›†ä½“è£èª‰æ„Ÿ&#34;&gt;4.1é›†ä½“è£èª‰æ„Ÿ&lt;/h3&gt;
&lt;p&gt;â€‹    è¦æœ‰é›†ä½“è£èª‰æ„Ÿï¼Œå‡¡äº‹çœ‹å¤§å±€ï¼Œæ¯ä¸ªäººéƒ½æ˜¯å›¢é˜Ÿçš„ä¸€ä»½å­ï¼Œä¸èƒ½æœ‰æ‰“é…±æ²¹çš„å¿ƒæ€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;42å»ºç«‹å®Œå–„çš„è§„åˆ™&#34;&gt;4.2å»ºç«‹å®Œå–„çš„è§„åˆ™&lt;/h3&gt;
&lt;p&gt;â€‹    æ²¡æœ‰è§„çŸ©ï¼Œä¸ä»¥æˆæ–¹åœ†ï¼Œæ²¡æœ‰æ²¡æœ‰çºªå¾‹çš„å†›é˜Ÿï¼Œä¸å¯èƒ½æ‰“èƒœä»—ã€‚å¯¹äºç ”å‘å›¢é˜Ÿï¼Œç»Ÿä¸€çš„è§„åˆ™å¯ä»¥æœ‰æ•ˆçš„å‡ä½æ²Ÿé€šæˆæœ¬ï¼Œé›†åˆæ•´ä¸ªå›¢é˜Ÿçš„æ™ºæ…§ï¼Œé™ä½é”™è¯¯çš„å¯èƒ½æ€§ï¼Œè§„åˆ™è¦ä¸æ–­æ€»ç»“ï¼Œä¸æ–­ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;43å›¢ç»“äº’è¿›&#34;&gt;4.3å›¢ç»“äº’è¿›&lt;/h3&gt;
&lt;p&gt;â€‹    å›¢é˜Ÿä¹‹é—´è¦äº’ç›¸ä¿¡ä»»ï¼Œä¹äºä¸ºåˆ«äººæä¾›å¸®åŠ©ï¼Œä¹äºå’Œå–„äºä»å…¶ä»–åŒäº‹é‚£é‡Œè·å¾—å¸®åŠ©ï¼Œäº’ç›¸å­¦ä¹ å…±åŒè¿›æ­¥ã€‚å¼€è¯šå¸ƒå…¬ã€ç›¸äº’å°Šé‡ã€ç›¸äº’ç†è§£ï¼Œå¤šç«™åœ¨å¯¹æ–¹çš„ç«‹åœºä¸Šè€ƒè™‘ï¼Œå¯¹äº‹ä¸å¯¹äººã€‚å›¢é˜Ÿæ„è¯†ä¸ç­‰äºå“¥ä»¬ä¹‰æ°”ã€æ‹‰å¸®ç»“æ´¾ï¼Œä¹Ÿä¸ç­‰äºå¥½å¥½å…ˆç”Ÿï¼Œå»ºç«‹ä¼˜ç§€çš„å›¢é˜Ÿæ°›å›´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;44å»ºç«‹å¼ºæ²Ÿé€š&#34;&gt;4.4å»ºç«‹å¼ºæ²Ÿé€š&lt;/h3&gt;
&lt;p&gt;â€‹    å›¢é˜Ÿè¦å¼ºè°ƒæ²Ÿé€šæ„è¯†ï¼Œä»¥å„ç§æ–¹å¼å»ºç«‹èµ·æˆå‘˜ä¹‹é—´çš„è”ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5è¿›å–æ„è¯†&#34;&gt;&lt;strong&gt;5.è¿›å–æ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    è¦æœ‰ç†æƒ³ï¼Œæœ‰è¿›å–å¿ƒï¼Œä¸æ–­çš„è¿½æ±‚æ›´é«˜çš„ç›®æ ‡ã€‚åœ¨æ¿€çƒˆç«äº‰çš„ç¯å¢ƒï¼Œè¦æœ‰å¿§æ‚£æ„è¯†ï¼Œä¸æ–­è¿›æ­¥ï¼Œå¦åˆ™è¿Ÿæ—©è¦æ·˜æ±°ã€‚è€Œè¿›å–æ„è¯†æœ€ç»ˆè¦çš„æ˜¯å®¢æœè‡ªå·±çš„å¿ƒæ€ï¼Œâ€œç ´å±±ä¸­è´¼æ˜“ï¼Œç ´å¿ƒä¸­è´¼éš¾â€ï¼Œ&lt;strong&gt;å¯¹è‡ªå·±çš„è¦æ±‚æ¯”åˆ«äººå¯¹è‡ªå·±çš„è¦æ±‚æ›´ä¸¥æ ¼&lt;/strong&gt; ï¼Œå®¢æœè‡ªå·±çš„å†…å¿ƒï¼ŒåŠ å¼ºè®¡åˆ’æ€§å’Œæ‰§è¡ŒåŠ›ï¼Œè¿™æ˜¯è§äºæ‰€æœ‰èƒ½å¿«é€Ÿæˆé•¿çš„ä¼˜ç§€å·¥ç¨‹å¸ˆæ‰€å…±æœ‰ç‰¹è´¨ï¼Œè€Œæ°æ°æ˜¯é‚£äº›ä¸é€‚åº”ä¸€ä¸ªé«˜é€Ÿæˆé•¿çš„å›¢é˜Ÿè€Œè¢«æ·˜æ±°æ‰çš„å·¥ç¨‹å¸ˆèº«ä¸Šæ‰€æœ€ç¼ºä¹çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;â€‹    è¦æœªé›¨ç»¸ç¼ªï¼Œä¹Ÿè¦å®¹å¿å¤±è´¥ã€‚è¿›å–æ˜¯ä¸ºäº†æœªé›¨ç»¸ç¼ªï¼Œä½†æ˜¯è¿›å–ä¸ä»£è¡¨ä¸ä¼šå¤±è´¥ï¼Œè€Œæ˜¯æŒ‡èƒ½åœ¨å¤±è´¥é¢å‰å‹‡äºå‰–æã€å‹‡äºæ‰¿æ‹…è´£ä»»ï¼Œåˆèƒ½è‡ªæˆ‘æ€»ç»“ç»éªŒæ•™è®­ã€ä¿æŒè‡ªå·±çš„è¿›å–å¿ƒã€‚ Â¡&lt;/p&gt;
&lt;h2 id=&#34;6æ±‚å®æ„è¯†&#34;&gt;&lt;strong&gt;6.æ±‚å®æ„è¯†&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;â€‹    å®äº‹æ±‚æ˜¯ï¼Œæ˜¯ã€Šæ¯›æ³½ä¸œæ€æƒ³ã€‹çš„ç²¾é«“ä¹‹ä¸€ï¼Œä¹Ÿæ­£æ˜¯å®äº‹æ±‚æ˜¯ï¼Œä¸æè™šçš„ï¼Œæ‰èƒ½æœ‰é«˜é€Ÿå‘å±•çš„ä¸­å›½çš„ä»Šå¤©ã€‚åœ¨å®é™…é¡¹ç›®ä¸­è¦æ³¨é‡äº‹å®ï¼Œåå¯¹å¼„è™šä½œå‡ï¼Œå¤§èƒ†çš„å‡è®¾å°å¿ƒåœ°æ±‚è¯ï¼Œä¸€åˆ‡ä»¥æ•°æ®è¯´è¯ï¼Œç”¨å‡†ç¡®çš„æ•°å­—å’Œäº‹å®æ¥è®ºè¯ï¼Œä¸èƒ½åªæœ‰è‡†æµ‹çš„ç»“è®ºã€‚&lt;/p&gt;
&lt;p&gt;â€‹    ä»¥é‡åŒ–æŒ‡æ ‡ä½œä¸ºåˆ¤æ–­çš„ä¾æ®ï¼Œå®é™…æ•°æ®ä¸ºç‹ï¼Œæ²¡æœ‰é‡åŒ–ï¼Œå°±æ²¡æœ‰ç»©æ•ˆï¼Œé€šè¿‡è¿™äº›æŒ‡æ ‡è¡¡é‡è‡ªå·±çš„æˆé•¿å’Œè¿›æ­¥ï¼Œé€šè¿‡è¿™äº›æŒ‡æ ‡çŸ¥é“å·¥ä½œçš„æ–¹å‘å’Œé‡ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å·¥ç¨‹å¸ˆï¼Œæ˜¯ä»å¤æ‚çš„éœ€æ±‚ä¸­ï¼Œ&lt;strong&gt;å®šä¹‰é—®é¢˜&lt;/strong&gt;ï¼Œè§£å†³é—®é¢˜ï¼Œç»™å‡ºå…·ä½“æ–¹æ¡ˆè€Œç”Ÿçš„å·¥ç§ï¼Œä¸èƒ½å•å…µä½œæˆ˜ï¼Œéœ€è¦é€šè¿‡é«˜æ•ˆçš„å·¥å…·è¿›è¡Œæ­¦è£…ï¼Œå¯¹å¤æ‚é‡å¤é€šç”¨çš„åœºæ™¯è¿›è¡Œæ²‰æ·€ä¸‹ç§»ï¼Œæ–¹ä¾¿å…¶ä»–å·¥ç¨‹å¸ˆä½¿ç”¨ï¼Œæ‰€è°“å¼€æºï¼›åœ¨ä¸æ–­æŒ–å‘å¡«å‘ä¸­ï¼Œè§£å†³ç‰¹å®šä»»åŠ¡ï¼Œé”»ç‚¼å‡ºçš®å®è€æ“çš„éš¾å¾—å“æ ¼ï¼Œéœ€æ±‚è™æˆ‘åƒç™¾éï¼Œæˆ‘å¯¹éœ€æ±‚å¦‚åˆæ‹ï¼›æ²¡æœ‰éœ€æ±‚ä½•æ¥æ¶æ„è½åœ°å‘¢ï¼Œä½•æ¥é‡åŒ–æŒ‡æ ‡ï¼Œå‡å€¼åŠ è–ªå‘¢ï½&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>ç»„ç»‡å¼•æ“</title>
      <link>https://weedge.github.io/post/zborg/</link>
      <pubDate>Sun, 05 Sep 2021 21:04:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/zborg/</guid>
      
        <description>&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯ï¼š&lt;/h2&gt;
&lt;p&gt;æ•™å­¦ç›´æ’­é—´åœºæ™¯å¤šæ ·æ€§ï¼ŒæŒ‰å¹´é¾„æ®µåŒºåˆ†è¾…å¯¼åå°è§’è‰²ï¼Œæ„æˆæ•´ä¸ªæ•™å­¦è¯¾ä¸­ç›´æ’­å’Œäº’åŠ¨çš„å¤šæ ·æ€§ï¼Œä¸ºäº†å¿«é€Ÿæ”¯æŒä¸šåŠ¡å‘å±•ï¼Œå¯¼è‡´åç«¯æœåŠ¡æ¥å£è¿‡å¤šï¼Œä¸æ˜“ç»´æŠ¤ï¼Œç»Ÿä¸€ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ¥è¾…å¯¼ä¾§åå°çš„åœºæ™¯ï¼š&lt;/strong&gt; è¾…å¯¼ä¾§ä¸åŒçš„è¾…å¯¼è¿è¥åå°ï¼Œæ¯”å¦‚ï¼šä½å¹¼è¾…å¯¼ï¼Œç­ä¸»ä»»(ç­è¯¾)ï¼Œç£å­¦æœåŠ¡ï¼Œ0è½¬åŒ–ç£å­¦æœåŠ¡ç­‰ï¼Œåç»­å¯èƒ½è¿˜æœ‰å°é¹¿ç¼–ç¨‹ï¼Œå¤§å¸ˆç´ å…»è¯¾å¯¹åº”çš„è¾…å¯¼ä¾§ï¼›è¾…å¯¼ä¾§ä¼šåˆ†ç­å»å¸¦å­¦ç”Ÿï¼Œä¸åŒçš„è¾…å¯¼ä¾§ä¼šæœ‰å•ç‹¬çš„è¯¾ä¸­ä¸šåŠ¡æœåŠ¡æ¥å¯¹æ¥è¾…å¯¼åå°çš„æ¥å£ï¼Œè¯¾ä¸­ç†è§£ä¸åŒçš„ä¸šåŠ¡ç»„ç»‡å½¢æ€ï¼Œä»£ç é€»è¾‘å’Œå­˜æ”¾æ•°æ®å†—ä½™ï¼Œä¸æ–¹ä¾¿ç»´æŠ¤ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡å‰å°å¯¹æ¥ç›´æ’­æ¥å£åœºæ™¯&lt;/strong&gt;ï¼šç›´æ’­ä¸šåŠ¡æœåŠ¡å¤šæ ·ï¼›æŒ‰ç…§è¯¾ç¨‹ç±»å‹åˆ†ä¸ºä¸“é¢˜è¯¾ï¼Œç­è¯¾ï¼ŒçŸ­è®­ç­ï¼Œç´ å…»è¯¾ï¼Œç¼–ç¨‹è¯¾ç­‰ï¼›ç›´æ’­æœåŠ¡ï¼šç­ä¸»ä»»å‡ºé•œï¼ˆè¯¾å‰ï¼Œè¯¾ä¸­ï¼Œè¯¾åï¼‰ï¼Œå°ç­ï¼Œå°ç»„ï¼Œå¤§ç­ï¼Œè‡ªä¹ å®¤ç­‰ï¼›æœåŠ¡çš„å¤šæ ·æ€§ï¼Œå¯¼è‡´ä¸šåŠ¡æ¥å£ç¹çï¼Œå‰æœŸå¿«é€Ÿå¼€å‘ä¸Šçº¿ï¼Œé’ˆå¯¹æ¯ä¸ªç›´æ’­æœåŠ¡ä¸šåŠ¡åœºæ™¯å•ç‹¬æä¾›æ¥å£ï¼Œ å¸¦æ¥çš„é—®é¢˜ä¸æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ç»´æŠ¤ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯¾ä¸­äº’åŠ¨ä¸­å°äº’åŠ¨èŠå¤©åœºæ™¯ï¼š&lt;/strong&gt; å¤§ç­ï¼Œå°ç­ï¼Œå°ç»„ç›´æ’­é—´åœºæ™¯ä¾èµ–å”®å–å’Œè¾…å¯¼ä¾§çš„ç»„ç»‡ç»“æ„è¿›è¡ŒèŠå¤©ï¼Œç­”é¢˜ï¼Œé¼“åŠ±ï¼ŒPKï¼Œå‘çº¢åŒ…ç­‰äº’åŠ¨ï¼›å¯¼è‡´è¯¾å‰éœ€è¦å¯¹è¿™äº›ç»„ç»‡ç»“æ„æŒ‰ç…§ä¸åŒç›´æ’­åœºæ™¯+ä¸åŒè¾…å¯¼ä¾§æ•°æ®è¿›è¡Œæå‰é¢„çƒ­å¤„ç†ï¼Œé€»è¾‘é‡å¤ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;è®¾è®¡ç›®æ ‡&#34;&gt;è®¾è®¡ç›®æ ‡ï¼š&lt;/h2&gt;
&lt;p&gt;éœ€è¦ä¸€ä¸ªæ‰¿ä¸Šå¯ä¸‹çš„æ¨¡å—æ¥è¿æ¥è¾…å¯¼ä¾§æ”¯æ’‘è¯¾ä¸­ç›´æ’­/å›æ”¾äº’åŠ¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯¹ä¸åŒä¸šåŠ¡ç›´æ’­åœºæ™¯è¿›è¡Œæ”¶æ•›ï¼Œå‡å°‘é‡å¤å¼€å‘ï¼›&lt;/li&gt;
&lt;li&gt;éš”ç¦»åº•å±‚ä¸šåŠ¡åå°è¾…å¯¼ä¾§ï¼Œå”®å–ä¾§æ•°æ®ï¼Œç»Ÿä¸€æ¥å…¥è¾…å¯¼/å”®å–ä¾§å…¨é‡æ•°æ®ï¼Œä»¥åŠå¼‚åŠ¨ï¼Œå‡å°‘æ•°æ®å†—ä½™ï¼›&lt;/li&gt;
&lt;li&gt;éš”ç¦»åº•å±‚ä¸šåŠ¡æ•°æ®ï¼ŒæŠ½è±¡ç›´æ’­ä¸­å°æ•°æ®æ¨¡å‹ï¼Œä¸­å°é¢å‘è¿™ä¸ªæ•°æ®æ¨¡å‹è¿›è¡Œç¼–ç¨‹ï¼Œæä¾›åŸå­åŒ–æ¥å£ï¼›&lt;/li&gt;
&lt;li&gt;å½“å¤©ä¸Šè¯¾è¯¾å‰é¢„çƒ­æ•°æ®éœ€è¦åœ¨0-6ç‚¹å°½é‡å…¨éƒ¨é¢„çƒ­å®Œæˆï¼›é¢„çƒ­åŠ é€Ÿï¼Œé¢„çƒ­åçš„æ•°æ®æ£€æŸ¥ï¼›&lt;/li&gt;
&lt;li&gt;å¤ç”¨ä¸­å°æ•°æ®æ¨¡å‹å·²æ”¯æŒçš„ç›´æ’­åœºæ™¯èƒ½åŠ›ï¼Œæä¾›saasåŒ–æœåŠ¡ï¼Œå‰å°ä½¿ç”¨ä¸­å°å®šä¹‰çš„dslï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œç»„è£…ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼›&lt;/li&gt;
&lt;li&gt;æä¾›å¯é…ç½®åå°ï¼Œç®¡ç†æœåŠ¡æ¥å£ï¼›&lt;/li&gt;
&lt;li&gt;å°†è¯»å†™ioæœ€å°åŒ–ï¼Œæé«˜åŸå­åŒ–æ¥å£å“åº”æ—¶é—´RT&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŸåˆ™ï¼š é«˜å†…èšä½è€¦åˆã€ç©ºé—´æ¢æ—¶é—´&lt;/p&gt;
&lt;h2 id=&#34;æ•°æ®æ¨¡å‹&#34;&gt;æ•°æ®æ¨¡å‹ï¼š&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªç« èŠ‚ä¼šæœ‰å¤šä¸ªç›´æ’­é—´ï¼Œæ¯”å¦‚è¾…å¯¼è€å¸ˆå‡ºé•œ(è¯¾å‰ï¼Œè¯¾ä¸­ï¼Œè¯¾å)ï¼Œæœ€å¤š3n+1ä¸ªç›´æ’­é—´ï¼Œnä¸ºè¯¾ç¨‹ç« èŠ‚ä¸‹çš„è¾…å¯¼è€å¸ˆæ•°ç›®ï¼ŒliveRoom&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸åŒç›´æ’­é—´ï¼Œå¯¹åº”ä¸åŒçš„ç›´æ’­é—´ä¸šåŠ¡æµç¨‹:  bizType&lt;/p&gt;
&lt;p&gt;ä¸‰åˆ†å±ç›´æ’­é—´ï¼Œè¿›å…¥æ•™å®¤â†’ç­¾åˆ°â†’ç›´æ’­/äº’åŠ¨â†’ç¦»å¼€(åˆ‡ç›´æ’­é—´)&lt;/p&gt;
&lt;p&gt;å°ç»„ç›´æ’­é—´ï¼Œè¿›å…¥æ•™å®¤â†’è¯¾ä»¶ä¸‹è½½â†’åˆ†ç»„â†’ç­¾åˆ°â†’ç›´æ’­/äº’åŠ¨â†’ç¦»å¼€(åˆ‡ç›´æ’­é—´)&lt;/p&gt;
&lt;p&gt;å°ç­ç›´æ’­é—´ï¼Œè¿›å…¥ç›´æ’­é—´â†’ è¯¾ä»¶ä¸‹è½½â†’ åˆ†ç­â†’ ç›´æ’­/äº’åŠ¨â†’ç¦»å¼€(åˆ‡ç›´æ’­é—´)&lt;/p&gt;
&lt;p&gt;è‡ªä¹ å®¤ç›´æ’­é—´ï¼Œè¿›å…¥ç›´æ’­é—´â†’ ç­¾åˆ°â†’ç›´æ’­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸åŒç›´æ’­é—´ï¼Œå¯¹åº”ä¸åŒçš„æµåª’ä½“æ¨æ‹‰æµæ–¹æ¡ˆï¼šstreamPolicy&lt;/p&gt;
&lt;p&gt;ä¸‰åˆ†å±ç›´æ’­é—´ï¼Œrtmp + é•¿é“¾æ¥&lt;/p&gt;
&lt;p&gt;å°ç»„ç›´æ’­é—´ï¼Œrtc + é•¿é“¾æ¥&lt;/p&gt;
&lt;p&gt;å°ç­ç›´æ’­é—´ï¼Œrtc + é•¿é“¾æ¥&lt;/p&gt;
&lt;p&gt;è‡ªä¹ å®¤ç›´æ’­é—´ï¼Œrtmp + é•¿é“¾æ¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸åŒç»„ç»‡å…³ç³»å¯¹åº”èŠå¤©äº’åŠ¨å¹¿æ’­ç»Ÿè®¡ç»´åº¦ï¼ŒæŠ½è±¡ç»„ç»‡ç»“æ„ï¼šorgPolicy, orgTree(node)&lt;/p&gt;
&lt;p&gt;ä¸€è¯¾ä¸‰åˆ†å±ï¼š/è¯¾ç¨‹ç« èŠ‚,  æ— ç­ä¸»ä»»ï¼Œå…¨å‘˜äº’åŠ¨ï¼›è¯¾ä¸­è‡ªåŠ¨ç”Ÿæˆï¼›&lt;/p&gt;
&lt;p&gt;å°è‹±å°æ•°å°è¯­æ–‡å°ç»„ç›´æ’­é—´ï¼Œ/è¯¾ç¨‹ç« èŠ‚/è¾…å¯¼è€å¸ˆ/{é˜Ÿ/å°ç»„}ï¼Œ  è¾…å¯¼è€å¸ˆï¼š ä½å¹¼è¾…å¯¼ï¼Œç­ä¸»ä»»(ç­è¯¾)ï¼Œç£å­¦æœåŠ¡ï¼Œ0è½¬åŒ–ç£å­¦æœåŠ¡ç­‰ï¼Œ é˜Ÿ/å°ç»„ç”±è¯¾ä¸­å­¦ç”Ÿé€‰ç»„è‡ªåŠ¨ç”Ÿæˆï¼›ä½å¹¼è¾…å¯¼ï¼Œç­ä¸»ä»»ï¼Œç£å­¦æœåŠ¡ï¼Œ0è½¬åŒ–ç£å­¦æœåŠ¡æä¾›æ•°æ®ï¼›&lt;/p&gt;
&lt;p&gt;ç­ä¸»ä»»å°ç­ç›´æ’­é—´ï¼Œ/è¯¾ç¨‹ç« èŠ‚/è¾…å¯¼è€å¸ˆ/å°ç­ï¼Œè¾…å¯¼è€å¸ˆï¼š ä½å¹¼è¾…å¯¼ï¼Œç­ä¸»ä»»(ç­è¯¾)ï¼Œå°ç­ç”±è¾…å¯¼ä¾§è¯¾å‰æ’çŒç­ç”Ÿæˆï¼›ä½å¹¼è¾…å¯¼ï¼Œç­ä¸»ä»»æœåŠ¡æä¾›æ•°æ®ï¼›&lt;/p&gt;
&lt;p&gt;çŸ­è®­ç­ï¼Œ/è¯¾ç¨‹ç« èŠ‚/ç£å­¦LPC/å¾®ä¿¡ç¾¤ï¼Œå¾®ä¿¡ç¾¤æœ‰ç£å­¦è€å¸ˆè¯¾å‰æ’çŒç­ç”Ÿäº§ï¼Œç£å­¦æœåŠ¡æä¾›æ•°æ®ï¼›&lt;/p&gt;
&lt;p&gt;0è½¬åŒ–æœåŠ¡ï¼Œ/è¯¾ç¨‹ç« èŠ‚/ç£å­¦LPC , 0è½¬åŒ–ç£å­¦æœåŠ¡æä¾›æ•°æ®ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;lessonPolicy: (bizType,streamPolicy,orgPolicy)&lt;/p&gt;
&lt;p&gt;åŸåˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›´æ’­ä¸­å°è§£è€¦ä¸šåŠ¡å±æ€§ï¼Œæ”¯æŒæŠ½è±¡ä¸šåŠ¡åœºæ™¯ï¼Œä½œä¸ºåº•å±‚ç›´æ’­èƒ½åŠ›è¾“å‡ºï¼›&lt;/li&gt;
&lt;li&gt;å¯å¤ç”¨ï¼Œç›´æ’­åŠŸèƒ½ï¼Œæ€§èƒ½ï¼Œç¨³å®šæ€§çš„å¤ç”¨ï¼›æ¯”å¦‚ä¸‰åˆ†å±ï¼Œç­è¯¾ï¼Œå°ç»„ï¼Œä¼ªç›´æ’­ç­‰ä¸åŒç»´åº¦ä¸šåŠ¡å±æ€§è§£è€¦å‰ç½®åˆ°é¢„çƒ­é˜¶æ®µï¼›&lt;/li&gt;
&lt;li&gt;å¯æ‰©å±•ï¼Œç›´æ’­æ•°æ®æ¨¡å‹å±æ€§å¦‚æœ‰æ–°å¢ï¼Œä¸ä¼šå½±å“åŸæœ‰å±æ€§ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ•°æ®é‡&#34;&gt;æ•°æ®é‡ï¼š&lt;/h2&gt;
&lt;p&gt;1å¤©æœ€é«˜å³°2wèŠ‚è¯¾ï¼Œæ€»æŠ¥åå­¦ç”Ÿæ•°é‡600w+ï¼Œ åœ¨çº¿å­¦ç”Ÿ100w+ ï¼Œ è¯¾ä¸­è¿›å…¥ä¸Šè¯¾é¡µé¢qps 120w+&lt;/p&gt;
&lt;p&gt;å¤„ç†æ•°æ®é‡ï¼šæŒ‰ä¸€ä¸ªè¯¾ç¨‹ç« èŠ‚æ¥è®¡ç®—ï¼Œæœ€å¤§çš„æŠ¥åå­¦ç”Ÿæ•°ç›®3w+  å®é™…æµ‹è¯•ç”¨60w+ çš„æŠ¥åå­¦ç”Ÿï¼Œé¢„çƒ­å¤§æ¦‚45å¤šåˆ†é’Ÿ&lt;/p&gt;
&lt;p&gt;3w çš„æŠ¥åå­¦ç”Ÿï¼Œ å°ç»„ç›´æ’­é—´ï¼Œç­ä¸»ä»»å‡ºé•œï¼Œä¸€ä¸ªç­ä¸»ä»»æœ€å¤šå¸¦500å­¦ç”Ÿï¼Œé¢„çƒ­å¤§æ¦‚ 1åˆ†é’Ÿ30å¤šç§’&lt;/p&gt;
&lt;p&gt;ç­–ç•¥æ•°æ®ï¼š ä¸€ä¸ªç« èŠ‚å¯¹åº”ä¸€ä¸ªç­–ç•¥ï¼Œä¸€ä¸ªç­–ç•¥å¯ä»¥ç»™å¤šä¸ªç« èŠ‚ä½¿ç”¨ï¼Œ&lt;/p&gt;
&lt;p&gt;policy (id,conf,desc,name)&lt;/p&gt;
&lt;p&gt;lessonPolicy (keyId,keyType,bizType,partition,policyId)&lt;/p&gt;
&lt;p&gt;ç›´æ’­é—´æ•°é‡ï¼š 3n+1 (næ˜¯ç­ä¸»ä»»æ•°ç›®ï¼Œå‡ºé•œåœºæ™¯ï¼‰ æœ€å¤š181ä¸ªç›´æ’­é—´ 180*8*5(id,roomId,virturalRoomId,rootId,bizId,roomType,teacherUid,startTime,endTime,status) = 7.2KB&lt;/p&gt;
&lt;p&gt;ç»„ç»‡èŠ‚ç‚¹æ•°é‡ï¼š3w/6=5000ä¸ªå°ç»„èŠ‚ç‚¹ï¼Œ5000/6 = 800å¤šä¸ªé˜ŸèŠ‚ç‚¹ï¼Œ60ä¸ªè¾…å¯¼è€å¸ˆèŠ‚ç‚¹ï¼Œæ€»å…±6000ä¸ªç»„ç»‡èŠ‚ç‚¹ï¼Œ 6000*8*7(id, nodeId,parentId,rootId,virturalNodeId,sourceId,path) =328KB&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·æ•°é‡ï¼š 3w+  æ¯ä¸ªç­ä¸»ä»»æœ€å¤šå¸¦500ä¸ªå­¦ç”Ÿï¼Œ  3w/500 = 60  ä¸ªç­ä¸»ä»»ï¼Œæœ€å¤š 181 ä¸ªç›´æ’­é—´ï¼Œ 180*500 + 3w =12wæ¡ç›´æ’­é—´ç”¨æˆ·æ•°æ®ï¼Œ æŒ‰ç›´æ’­é—´ç»´åº¦åç¨‹ä»»åŠ¡åˆ†æ‰¹å¤„ç†; 12w*8*4(id,uid,nodeId,roomId) =3.7MB&lt;/p&gt;
&lt;p&gt;ä¸€å¤©å¤§æ¦‚æ€»å…± 2w * 4M =  78GBæ•°æ®å¯èƒ½éœ€è¦è¯¾å‰é¢„çƒ­ ï¼ˆä»¥ä¸€å¤©æœ€å¤§2wèŠ‚è¯¾ç¨‹ç« èŠ‚ï¼Œæ¯ä¸ªç« èŠ‚æŠ¥åäººæ•°3wè®¡ç®—, æŠ¥åå­¦ç”Ÿ2w*3w =6äº¿ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;ä¾èµ–ä¸­é—´ä»¶åŸºç¡€æœåŠ¡&#34;&gt;ä¾èµ–ä¸­é—´ä»¶åŸºç¡€æœåŠ¡&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;redis (stored k/vå­˜å‚¨ï¼‰  å‰æœŸæ˜¯å“¨å…µæ¨¡å¼æ¶æ„ï¼Œ åæœŸé‡‡ç”¨proxyæ¨¡å¼æ¶æ„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DB(mysql ) ä¸»ä»æ¶æ„ï¼Œæœªä½¿ç”¨proxyæ•°æ®åº“ä¸­é—´ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MQ(NMQ, RocketMQ) æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‰æœŸç”¨çš„NMQ  æ¶ˆæ¯ä»¥pushçš„æ–¹å¼å‘é€çš„æ¶ˆè´¹æ–¹ï¼Œé€šè¿‡groupKeyæ¥ä¿è¯æœ‰åºï¼Œä»¥åŠæ¶ˆæ¯ç§¯å‹æŠ¥è­¦ï¼Œæ— é™é‡è¯•ï¼Œæ¶ˆè´¹æ–¹æ¥ä¿è¯å¹‚ç­‰&lt;/p&gt;
&lt;p&gt;RMQæ˜¯ä¸ºäº†å…¼å®¹NMQ , å¯¹rocketMQè¿›è¡Œæ¥å°è£…ï¼Œ æ¶ˆæ¯ç”Ÿæˆä¾§æä¾›proxy, å…¼å®¹nmqproxyï¼›æ¶ˆè´¹ä¾§rocketMQæ˜¯pullé•¿è½®è®­æ–¹å¼ï¼Œä¸ºäº†å…¼å®¹NMQçš„pushæ–¹å¼ï¼Œæä¾›pusheræ¨¡å—ï¼›æ•°æ®å­˜æ”¾ç”¨rocketMQçš„broker&lt;/p&gt;
&lt;p&gt;rocketMQ : &lt;a href=&#34;https://github.com/apache/rocketmq/tree/master/docs/cn&#34;&gt;https://github.com/apache/rocketmq/tree/master/docs/cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;kafka : &lt;a href=&#34;https://kafka.apachecn.org/intro.html&#34;&gt;https://kafka.apachecn.org/intro.html&lt;/a&gt; é•¿é“¾æ¥å¿ƒè·³æ‰“ç‚¹æ•°æ® â†’ kafka â†’ è®¡ç®—å¼•æ“&lt;/p&gt;
&lt;h2 id=&#34;æµç¨‹&#34;&gt;æµç¨‹&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®å¯¹æ¥æ–¹&#34;&gt;&lt;strong&gt;æ•°æ®å¯¹æ¥æ–¹&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;é¢„çƒ­æ¨¡å—æ¥å…¥è¾…å¯¼ä¾§ä¸‰æ–¹æ•°æ®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç­ä¸»ä»»ä¾§ï¼ˆå°ç­ï¼Œè¾…å¯¼è€å¸ˆï¼šç­ä¸»ä»»ï¼‰&lt;/li&gt;
&lt;li&gt;ç£å­¦æœåŠ¡ä¾§ï¼ˆå¾®ä¿¡æœåŠ¡ï¼Œè¾…å¯¼è€å¸ˆï¼šç£å­¦ï¼‰&lt;/li&gt;
&lt;li&gt;0è½¬åŒ–ç£å­¦æœåŠ¡ä¾§ï¼ˆæ‹‰æ–°è½¬åŒ–ï¼Œè¾…å¯¼è€å¸ˆï¼š0è½¬åŒ–ç£å­¦ï¼‰&lt;/li&gt;
&lt;li&gt;ä½å¹¼æœåŠ¡ä¾§ï¼ˆå°ç­ï¼Œè¾…å¯¼è€å¸ˆï¼šç­ä¸»ä»»ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åœºæ™¯ç›´æ’­é—´ç»´åº¦&#34;&gt;&lt;strong&gt;åœºæ™¯ï¼ˆç›´æ’­é—´ç»´åº¦ï¼‰&lt;/strong&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ªç« èŠ‚é‡Œä¸€ä¸ªä¸»ç›´æ’­é—´ä¸€ä¸ªç»„ç»‡æ ‘ ï¼ˆéå‡ºå¢ƒï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªç« èŠ‚é‡Œå¤šä¸ªä¸»ç›´æ’­é—´ä¸€ä¸ªç»„ç»‡æ ‘ ï¼ˆå‡ºå¢ƒï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªç« èŠ‚é‡Œå¤šä¸ªä¸»ç›´æ’­é—´å¯¹åº”å¤šä¸ªä»ç›´æ’­é—´å¤šä¸ªç»„ç»‡æ ‘ ï¼ˆæ—å¬+å‡ºå¢ƒï¼‰&lt;/li&gt;
&lt;li&gt;å¤šä¸ªç« èŠ‚æƒ…å†µéƒ½è½¬åŒ–æˆä¸€ä¸ªç« èŠ‚ä¸‹çš„ç›´æ’­é—´æƒ…å†µ ï¼ˆå…±äº«ï¼‰&lt;/li&gt;
&lt;li&gt;è·Ÿè¯¾åœºæ™¯ï¼šä¸€ä¸ªç« èŠ‚å¯èƒ½ç»™ä¸åŒçš„è¾…å¯¼ä¾§åœ¨ä½¿ç”¨ï¼Œè¾…å¯¼å¹³å°çš„æ•°æ®æºä¸åŒï¼Œä¸€ä¸ªç»„ç»‡æ ‘å¯¹åº”å¤šä¸ªä¸šåŠ¡ç»„ç»‡ï¼Œä¸€ä¸ªç›´æ’­é—´ä¸»è®²æ¨æµï¼Œå¤šä¸ªè¾…å¯¼ä¾§åå°æ‹‰æµç›‘æ§&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æµç¨‹-1&#34;&gt;æµç¨‹&lt;/h3&gt;
&lt;p&gt;å®šä¹‰è§„èŒƒè¾…å¯¼ä¾§æ•°æ®æ¥å…¥ â†’ ä¸Šè¯¾è¯¾ç¨‹ç« èŠ‚ç»‘å®šå¯¹åº”ç­–ç•¥(å¦‚ä¸æ»¡è¶³ï¼Œæ–°å¢æ”¯æŒï¼‰â†’ åˆ†å‘ä»»åŠ¡å‰ç½®é¢„çƒ­ â†’ ç”Ÿæˆä¸­å°ç†è§£çš„å±æ€§ (liveRoom,lessonPolicy,orgTree ç­‰)  â†’ç›´æ’­ä¸­å°é¢å‘è¿™äº›å±æ€§ç¼–ç¨‹ï¼Œæä¾›åŸå­åŒ–è¯»å†™æ¥å£&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/%E7%9B%B4%E6%92%AD%E4%B8%AD%E5%8F%B0-%E7%BB%84%E7%BB%87%E5%BC%95%E6%93%8E%E6%B5%81%E7%A8%8B%E6%A1%86%E6%A1%86%E6%96%BD%E5%B7%A5%E5%9B%BE.jpg&#34; alt=&#34;ç›´æ’­ä¸­å°-ç»„ç»‡å¼•æ“æµç¨‹æ¡†æ¡†æ–½å·¥å›¾.jpg&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç­–ç•¥è§„åˆ™å¹³å°policy&#34;&gt;ç­–ç•¥è§„åˆ™å¹³å°policyï¼š&lt;/h2&gt;
&lt;p&gt;ç”¨äºä¸åŒçš„ä¸šåŠ¡ç›´æ’­é—´ç±»å‹ç»‘å®šç»„ç»‡ç­–ç•¥ï¼Œå¼€å‘æä¾›ç»™è¿è¥äº§å“å›¢é˜Ÿä½¿ç”¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¨æ‹‰æµç­–ç•¥ï¼ˆrtc(udp),rtmp(tcp)+CDN å»¶è¿Ÿè¾ƒé«˜ï¼Œä»·æ ¼ä½ï¼› å­¦ç”Ÿï¼Œè€å¸ˆå°ç»„ç›´æ’­é—´äº’åŠ¨åœºæ™¯ç”¨çš„rtc, ä¸€è¯¾(ä¸‰åˆ†å±)ç›´æ’­é—´ç”¨çš„rtmp; è¾…å¯¼è·Ÿè¯¾åå°ï¼Œç›‘æ§åå°ç”¨çš„rtmpï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ç›´æ’­é—´ç­–ç•¥(ç­ä¸»ä»»è¯¾å‰/è¯¾ä¸­/è¯¾åå‡ºé•œç›´æ’­é—´ï¼Œä¸»è®²ç›´æ’­é—´)ï¼›&lt;/li&gt;
&lt;li&gt;äº’åŠ¨ç»„ç»‡ç­–ç•¥ï¼ˆåŸºäºç»„ç»‡æ ‘ï¼Œå­¦ç”Ÿï¼Œç­ä¸»ä»»ï¼Œè€å¸ˆ é€šè¿‡é•¿é“¾æ¥çš„èŠå¤©å¹¿æ’­æ¨¡å¼ï¼‰;&lt;/li&gt;
&lt;li&gt;é¢„çƒ­ç­–ç•¥ï¼ˆæç®€ï¼Œç®€å•ï¼Œå…¨éƒ¨é¢„çƒ­ï¼‰;&lt;/li&gt;
&lt;li&gt;é¢„çƒ­æ—¶é—´è®¡ç®—é¢„çƒ­æ—¶é•¿(æ ¹æ®ç›´æ’­é—´æ•°ï¼Œç»„ç»‡èŠ‚ç‚¹æ•°ï¼Œç”¨æˆ·æ•°ï¼Œè®¡ç®—é¢„çƒ­æ—¶é•¿ï¼‰ï¼›ç”¨äºåˆ†å±‚æ—¶é—´è½®æ¥ç›‘æ§é¢„çƒ­ä»»åŠ¡è¶…æ—¶æŠ¥è­¦&lt;/li&gt;
&lt;li&gt;ç¼“å­˜è®¾è®¡ä¸­ç›´æ’­é—´çš„å­¦ç”Ÿé›†åˆå’Œåœ¨çº¿å­¦ç”Ÿé›†åˆ zset åˆ†ç‰‡ç­–ç•¥ï¼ˆæ ¹æ®è¯¾ç¨‹æŠ¥åäººæ•°å’Œå•†å“åº“å­˜æ•°è°ƒæƒç›¸åŠ è·å–ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®æºå®šä¹‰ï¼ˆè¾…å¯¼ä¾§æ•°æ®ï¼šä½å¹¼ï¼Œ0è½¬åŒ–ç£å­¦ï¼Œç£å­¦ï¼Œç­ä¸»ä»»ç­‰ï¼Œå”®å–ä¾§æ•°æ®ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¼‚åŠ¨æ•°æ®é€šçŸ¥å®šä¹‰ (å­¦ç”Ÿæ›´æ¢ç­ä¸»ä»»/å°ç­ï¼Œè€å¸ˆæ›´æ¢ï¼Œè¯¾ç¨‹ç« èŠ‚ä¸Šè¯¾æ—¶é—´æ›´æ”¹ï¼Œè¯¾ç¨‹ç« èŠ‚é‡å¼€ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»„ç»‡æ•°æ®ç”Ÿæˆå¼•æ“core&#34;&gt;ç»„ç»‡æ•°æ®ç”Ÿæˆå¼•æ“coreï¼š&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¼“å­˜è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;ç­–ç•¥ç¼“å­˜/æœ¬åœ°ç¼“å­˜ï¼Œç»„ç»‡æ ‘ç¼“å­˜ï¼Œç›´æ’­é—´ç¼“å­˜ï¼Œå­¦ç”Ÿç¼“å­˜ï¼Œé¢„çƒ­ä»»åŠ¡ç¼“å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®åº“æ•°æ®è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;ä¸šåŠ¡ç­–ç•¥è¡¨ï¼Œç»„ç»‡èŠ‚ç‚¹è¡¨ï¼Œç›´æ’­é—´è¡¨ï¼Œå­¦ç”Ÿè¡¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›´æ’­ä¸­å°ç»„ç»‡å¼•æ“è¯¾ä¸­æ•°æ®æ¥å£è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;ç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œäº¤äº’çš„æ•°æ®é€šè¿‡write-behind æ¨¡å¼å†™å…¥&lt;/p&gt;
&lt;p&gt;è·å–ç»„ç»‡æ ‘èŠ‚ç‚¹ä¿¡æ¯ï¼ŒèŠ‚ç‚¹åŸå§‹èŠ‚ç‚¹ä¿¡æ¯ï¼Œå­èŠ‚ç‚¹ä¿¡æ¯ï¼Œå­¦ç”Ÿæ‰€åœ¨ç›´æ’­é—´èŠ‚ç‚¹ï¼Œé€‰ç»„/ä½ç½®&lt;/p&gt;
&lt;p&gt;è·å–ä¸šåŠ¡è¯¾ç¨‹ç« èŠ‚ä¸šåŠ¡idçš„ç›´æ’­é—´ä¿¡æ¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›´æ’­ä¸­å°ç»„ç»‡å¼•æ“å›æ”¾æ•°æ®æ¥å£è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;æ¥å£æ•°æ®ç¼“å­˜ï¼Œcache-aside æ¨¡å¼è¯»å–ï¼Œè¯¾åå›æ”¾æ•°æ®éƒ½æ˜¯è¯»çš„åœºæ™¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—topic æ¶ˆæ¯ä½“è®¾è®¡ ï¼šå¼‚æ­¥è½åº“ï¼Œä¸ºäº†åŒæ­¥db,  åŒæ­¥dbé€»è¾‘å¹‚ç­‰ï¼Œé™ä½dbçš„å†™å‹åŠ›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç›´æ’­é—´ï¼Œç»„ç»‡èŠ‚ç‚¹ï¼Œå­¦ç”Ÿæ•°æ®&lt;/p&gt;
&lt;p&gt;å†…éƒ¨ä¼˜åŒ–è®¾è®¡ï¼šï¼ˆåŸåˆ™ï¼šå°½é‡å‡å°‘è¯»å†™io, è¾¾åˆ°æœ€ä¼˜è§£ï¼‰&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;å¼‚æ­¥ç¼“å†²bufferæ•°æ®æ‰¹é‡å‘é€é˜Ÿåˆ—å…¥åº“ï¼Œå‡å°‘ç½‘ç»œioï¼Œé™ä½dbçš„å†™å‹åŠ›&lt;/li&gt;
&lt;li&gt;è¯¾ä¸­è€å¸ˆçš„è¯¾ä»¶ä¿¡ä»¤è®°å½•ï¼Œzsetå­˜ç¼“å­˜ï¼Œå­¦ç”Ÿé«˜å¹¶å‘åœºæ™¯è·å–ç›´æ’­é—´ä¿¡ä»¤è®°å½•ï¼Œé€šè¿‡æœ¬åœ°ç¼“å­˜æ¥å‡å°‘å¯¹zset å¤§keyæ•°æ®è¯»å–å‹åŠ›&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡æ± åŒ–ï¼Œå¹¶å‘æ‰¹é‡å¤„ç†ä»»åŠ¡ï¼Œæé«˜ååç›¸åº”é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶å¯¹è±¡æ± åŒ–ï¼Œé«˜å¹¶å‘ååå‡å°‘gc&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é…ç½®å¹³å°conf-dashboard&#34;&gt;é…ç½®å¹³å°conf-dashboardï¼š&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;é¢„çƒ­æµç¨‹ DSL pipeline é…ç½®,&lt;/li&gt;
&lt;li&gt;ä¾èµ–ç¼“å­˜å’Œæ•°æ®é…ç½® ï¼Œ&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡é…ç½®ï¼Œ&lt;/li&gt;
&lt;li&gt;é¢„çƒ­æŠ¥è­¦é€šçŸ¥é…ç½®,&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é¢„çƒ­æ•°æ®ç›‘æ§å¹³å°monitor-dashboard&#34;&gt;é¢„çƒ­æ•°æ®ç›‘æ§å¹³å°monitor-dashboard:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æä¾›æ‰‹åŠ¨è§¦å‘é¢„çƒ­å’Œé¢„çƒ­æ•°æ®æ£€æŸ¥ï¼›&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹é¢„çƒ­å¥½çš„ç›´æ’­é—´ï¼Œç»„ç»‡æ ‘ï¼Œå­¦ç”Ÿæ‰€åœ¨ç›´æ’­é—´çš„ç»„ç»‡èŠ‚ç‚¹ä¿¡æ¯ï¼Œä»¥åŠè¯¾ä¸­ç›´æ’­é—´å¼€å§‹ç»“æŸæ—¶é—´ï¼Œç›´æ’­é—´çŠ¶æ€ï¼Œå­¦ç”Ÿåœ¨çº¿çŠ¶æ€ï¼ŒèŠå¤©çŠ¶æ€ï¼ˆç¦è¨€/å¯èŠå¤©), åˆ†ç»„ä¿¡æ¯ï¼Œåˆ°è¯¾æ—¶é—´&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¼€å‘å·¥å…·&#34;&gt;å¼€å‘å·¥å…·&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;çº¿ä¸Š/çº¿ä¸‹é¢„çƒ­é€šçŸ¥ç¾¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢„çƒ­æŠ¥è­¦é€šçŸ¥ç¾¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢„çƒ­å›å½’diffæ£€æŸ¥å·¥å…·&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/%E9%A2%84%E7%83%AD%E6%A3%80%E6%9F%A5.jpg&#34; alt=&#34;é¢„çƒ­æ£€æŸ¥&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/preload-diff.png&#34; alt=&#34;preload-diff&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å®¹é”™å¤„ç†&#34;&gt;å®¹é”™å¤„ç†&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åˆ†å¸ƒå¼ä»»åŠ¡å¤„ç†ï¼Œå¦‚æœä¸€ä¸ªæœºå™¨æŒ‚äº†ä¸å½±å“ä»»åŠ¡å¤„ç†ï¼Œfailoveræœºåˆ¶&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡æ‰§è¡Œå¤±è´¥ä¼šå³æŠ¥è­¦æœºåˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨å¤„ç†é‡æ–°é¢„çƒ­ï¼Œè¿˜æœ‰è‡ªåŠ¨è½®è®­æ£€æŸ¥é¢„çƒ­æ˜¯å¦æˆåŠŸæœºåˆ¶ï¼Œå¦‚æœé¢„çƒ­å¤±è´¥ï¼Œä¼šåœ¨ä¸‹ä¸ªè½®è®­å‘¨æœŸå‡ºå‘é¢„çƒ­ï¼Œ è½®è®­å‘¨æœŸå¯è°ƒï¼Œé»˜è®¤æ˜¯10åˆ†é’Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;qa&#34;&gt;Q&amp;amp;A&lt;/h2&gt;
&lt;p&gt;Qï¼šè¯¾å‰é¢„çƒ­ç›´æ’­é—´æ•°æ®ä¸ºä»€ä¹ˆé€‰æ‹©å…ˆå†™ç¼“å­˜ï¼Œç„¶ååœ¨é€šè¿‡mqå¼‚æ­¥è½dbå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Aï¼š å› ä¸ºé¢„çƒ­çš„è¿‡ç¨‹æ˜¯å¼‚æ­¥å¤šå°æœºå™¨å•æœºè¿›ç¨‹å¹¶è¡Œé¢„çƒ­ï¼Œè¿›ç¨‹ä¸­é€šè¿‡åç¨‹å¹¶å‘å¤„ç†æµç¨‹é¢„çƒ­ï¼Œä¸ºäº†é¢„çƒ­æé€Ÿï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœç›´æ¥å†™db, ç„¶ååœ¨æ›´æ–°ç¼“å­˜ï¼Œå› ä¸ºmysqlæ˜¯ä¸»ä»æ¶æ„ï¼Œé¢„çƒ­æ˜¯å†™å¤šè¯»å¤šåœºæ™¯ï¼Œ å†™å¤šæ˜¯å› ä¸ºé¢„çƒ­æ•°æ®åˆå§‹å†™å…¥æ•°æ®åº“ï¼Œè¯»å¤šæ˜¯å› ä¸ºæ•°æ®å…¥åº“ä¹‹åï¼Œä¼šé€šçŸ¥æ¥å£ç¼“å­˜æ¨¡å—å»è¯·æ±‚è¯»dbæ¥å£ç¼“å­˜æ•°æ®(æ¥å£æ•°æ®ä¸ºç©ºï¼Œä¸ä¼šå­˜å‚¨ï¼Œéƒ½ä¸ºinsertæ“ä½œæˆåŠŸä¹‹åï¼Œæ‰é€šçŸ¥æ¥å£ç¼“å­˜æ¨¡å—ï¼Œä¸ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µ)ï¼›è¯»è¯·æ±‚å¯ä»¥é€šè¿‡å¤šä¸ªä»æ¥åˆ†æ‹…ï¼Œä½†æ˜¯å†™çš„è¯éƒ½æ˜¯åœ¨ä¸»ä¸Šï¼Œåˆ†åº“åˆ†è¡¨éƒ½æ˜¯åœ¨å•å®ä¾‹ä¸Š, å•æœºæŠ—å¤§é‡å†™è¯·æ±‚ä¼šæˆä¸ºæ•´ä½“é¢„çƒ­çš„ç“¶é¢ˆï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœç›´æ¥å†™å…¥ç¼“å­˜ï¼Œç„¶åmqå¼‚æ­¥è½db çš„å½¢å¼å¯ä»¥å……åˆ†åˆ©ç”¨ç¼“å­˜æ¯”ç£ç›˜è¯»å†™ioé€Ÿåº¦å¿«çš„ä¼˜åŠ¿ï¼Œç¼“å­˜çš„å®ä¾‹éƒ¨ç½²æ˜¯ä»¥proxyçš„å½¢å¼åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå¯ä»¥å¯¹slotåˆ†ç‰‡è¿›è¡Œè¯»å†™ æ‰©å®¹ï¼Œåˆ†æ•£è¯»å†™å‹åŠ›ï¼›ä¸ä¼šæˆä¸ºé¢„çƒ­çš„ç“¶é¢ˆï¼›ï¼ˆä»¥å‰æ˜¯æ— ä¸­å¿ƒåŒ–çš„å½¢å¼é€šè¿‡ä¸šåŠ¡ä½¿ç”¨æ–¹ä¸€è‡´æ€§hash æ¥è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜slotåˆ†ç‰‡, åé¢æ”¹æˆproxyä¸­å¿ƒåŒ–çš„æ–¹å¼ï¼Œç»Ÿä¸€ç®¡ç†æ–¹ä¾¿è¿ç»´ï¼Œä¸šåŠ¡ä½¿ç”¨æ–¹ç›´æ¥é€šè¿‡redisåè®®è¯·æ±‚ï¼Œæ— éœ€å…³å¿ƒåˆ†ç‰‡æ“ä½œï¼‰&lt;/p&gt;
&lt;p&gt;é€šè¿‡mqå¼‚æ­¥è½dbï¼Œmqæ˜¯é€šè¿‡pushçš„æ–¹å¼ç›´æ¥å‘ç»™åç«¯æ¥å£å…¥åº“çš„ï¼Œé™ä½mqçš„pushçš„å¹¶å‘çª—å£ï¼Œå¯ä»¥å‡å°‘pushé¢‘ç‡ï¼Œé™ä½åç«¯æ¥å£çš„è¯·æ±‚é‡ï¼Œä½†æ˜¯ä¼šæ¶ˆè´¹å˜æ…¢ï¼Œä¸ºäº†åŠ å¿«æ“ä½œï¼Œå¯¹å‘é€ç»™mqçš„æ•°æ®è¿›è¡Œbuffer å¤„ç†ï¼Œæ‰¹é‡å‘é€ï¼Œé€šè¿‡åç«¯æ¥å£æ‰¹é‡å†™å…¥æ•°æ®åº“ï¼Œå‡å°‘ç½‘ç»œi/o, æé«˜å†™å…¥ååé‡ï¼›&lt;/p&gt;
&lt;p&gt;Q: é¢„çƒ­è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ä¸Šçº¿ï¼Œé¢„çƒ­ä¸­æ–­äº†ï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Aï¼š åœ¨é¢„çƒ­çš„æ—¶å€™ä¼šä¸ŠæŠ¥é¢„çƒ­çš„å¯åŠ¨çŠ¶æ€ï¼Œ æ—è·¯è„šæœ¬æ¯åŠå°æ—¶ä¼šæ£€æŸ¥ä¸€æ¬¡é¢„çƒ­çš„å¯åŠ¨çŠ¶æ€ï¼Œå¦‚æœä¸€ç›´å¤„äºè¿è¡Œä¸­ï¼Œåˆ™æŠ¥è­¦ï¼Œæ ¹æ®é˜ˆå€¼åˆ¤æ–­(æ¯”å¦‚æŠ¥åäººæ•°ä¼°ç®—å¤„é¢„çƒ­æ—¶é—´ï¼ŒæŠ¥è­¦æ¬¡æ•°) è§¦å‘è‡ªåŠ¨é¢„çƒ­é‡æ–°é¢„çƒ­ä¸Šï¼›é¢„çƒ­ç›‘æ§åå°ä¹Ÿæä¾›äº†æ‰‹åŠ¨è§¦å‘é¢„çƒ­ï¼›&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ²¡æœ‰åƒæ•°æ®åº“é‚£æ ·ä½¿ç”¨WALæœºåˆ¶ï¼ˆè¿›ç¨‹crashåï¼Œç¼“å­˜ä¸­çš„æ•°æ®æ²¡æœ‰äº†ï¼Œå¯ä»¥é€šè¿‡WALæ—¥å¿—æ‰¾å›ï¼‰ï¼Œä¸šåŠ¡åœºæ™¯å¯ä»¥å›æº¯æ•°æ®ï¼ŒæŒ‰ç« èŠ‚æˆ–è€…ç›´æ’­é—´é‡æ–°é¢„çƒ­&lt;/p&gt;
&lt;p&gt;Q: ç»„ç»‡æ ‘çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Aï¼š å°†ä¸šåŠ¡ç»„ç»‡å…³ç³»è¿›è¡Œè§£å¶ï¼Œå¦‚æœæ¥å…¥å…¶ä»–ä¸šåŠ¡ç»„ç»‡å…³ç³»ï¼Œåªéœ€è¦æä¾›åŸå§‹æ•°æ®ï¼Œå°±å¯ä»¥æœåŠ¡ç”¨è¯¾ä¸­çš„ç»„ç»‡å…³ç³»èƒ½åŠ›ï¼Œæä¾›è¯¾ä¸­ç»„ç»‡å…³ç³»ä¸‹çš„ç›´æ’­äº’åŠ¨ï¼›è¯¾ä¸­ç»„ç»‡æ ‘æ˜¯å¯ä»¥åŠ¨æ€æ‰©å±•çš„ï¼Œæ»¡è¶³è¯¾ä¸­æŠ¥åäººæ•°çªå¢çš„æƒ…å†µï¼›&lt;/p&gt;
&lt;p&gt;Q: åç»­ä¼šæä¾›ç”¨æˆ·ç»´åº¦çš„ç»„ç»‡æ ‘æ“ä½œæ¥å£å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Aï¼š ç°åœ¨æ˜¯é€šè¿‡é‡‡é›†å…¶ä»–å¹³å°çš„ç»„ç»‡æ•°æ®è¿›è¡Œä¸€ä»½è½¬åŒ–ç”Ÿæˆæä¾›ç»™è¯¾ä¸­ç›´æ’­äº’åŠ¨ä½¿ç”¨çš„ç»„ç»‡æ ‘ï¼Œåç»­æä¾›ç›¸å…³çš„åŸºç¡€è¯»å†™æ¥å£æ¥åˆå§‹/æ›´æ”¹é¢„çƒ­æ•°æ®ï¼Œä½¿ç”¨æ–¹åªéœ€è¦åœ¨æ„é€ ä¸šåŠ¡ç»„ç»‡ç»“æ„çš„æ—¶å€™è°ƒç”¨å†™å…¥ç¼“å­˜&lt;/p&gt;
&lt;p&gt;Q: ç°åœ¨ä¸šåŠ¡æ•°æ®é‡æœ‰å¤šå¤§ï¼Ÿ&lt;/p&gt;
&lt;p&gt;A: ç³»ç»Ÿæ˜¯æŒ‰ç…§æœ€å¤§é‡ä¼°ç®—çš„ï¼Œä¸€å¤©å¤§æ¦‚æ€»å…± 2w * 4M =  78GBæ•°æ®å¯èƒ½éœ€è¦è¯¾å‰é¢„çƒ­ ï¼ˆæŠ¥åå­¦ç”Ÿ2w*3w =6äº¿ï¼‰&lt;/p&gt;
&lt;p&gt;Q: æ˜¯å¦è€ƒè™‘ç”¨å·¥ä½œæµä»»åŠ¡è°ƒåº¦çš„æ–¹å¼å¤„ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;A: æ­£åœ¨è€ƒè™‘ä¸­ï¼Œç°åœ¨æ–¹å¼æ˜¯åå°ç»‘å®šå¥½é¢„çƒ­ç­–ç•¥ï¼ŒæŠŠç­–ç•¥å‘åˆ°æ¶ˆæ¯é˜Ÿåˆ—é‡Œï¼Œç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è´Ÿè½½å‡è¡¡æ¨é€ç»™é¢„çƒ­ä»»åŠ¡æ‰§è¡Œï¼›&lt;/p&gt;
&lt;p&gt;åé¢ä¼šä¼˜åŒ–æˆå·¥ä½œæµä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ï¼Œå°†æ•´ä¸ªé¢„çƒ­æµç¨‹æ‹†åˆ†æˆå¯å•ç‹¬æ‰§è¡Œçš„ä»»åŠ¡ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªDAGå·¥ä½œæµï¼Œé€šè¿‡ä»»åŠ¡è°ƒåº¦æ¨¡å—ï¼Œåˆ†å‘åˆ°é¢„çƒ­æ‰§è¡Œæœºå™¨ä¸Šæ‰§è¡Œï¼Œå…¥åº¦ä¸º0çš„ä»»åŠ¡å¼€å§‹å¯åŠ¨æ‰§è¡Œ&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>ç½‘ç»œæ¨¡å‹</title>
      <link>https://weedge.github.io/post/poller/</link>
      <pubDate>Thu, 02 Sep 2021 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/poller/</guid>
      
        <description>&lt;p&gt;çœ‹äº†ä¸€äº›å¼€æºçš„ç½‘ç»œI/Oæ¨¡å‹æ¡†æ¶åº“ï¼Œå°è¯•ç€æŒ‰ç…§ç†è§£ç®€å•å®ç°ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ç½‘ç»œI/Oæ¨¡å‹æ¡†æ¶ï¼Œç±»ä¼¼nettyçš„reactoræ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;Nettyçš„NIOæ¨¡å‹æ˜¯Reactorååº”å †æ¨¡å‹ï¼ˆReactorç›¸å½“äºæœ‰åˆ†å‘åŠŸèƒ½çš„å¤šè·¯å¤ç”¨å™¨Selectorï¼‰ã€‚æ¯ä¸€ä¸ªè¿æ¥å¯¹åº”ä¸€ä¸ªChannelï¼ˆå¤šè·¯æŒ‡å¤šä¸ªChannelï¼Œå¤ç”¨æŒ‡å¤šä¸ªè¿æ¥å¤ç”¨äº†ä¸€ä¸ªçº¿ç¨‹æˆ–å°‘é‡çº¿ç¨‹ï¼Œåœ¨NettyæŒ‡EventLoopï¼‰ï¼Œä¸€ä¸ªChannelå¯¹åº”å”¯ä¸€çš„ChannelPipelineï¼Œå¤šä¸ªHandlerä¸²è¡Œçš„åŠ å…¥åˆ°Pipelineä¸­ï¼Œæ¯ä¸ªHandlerå…³è”å”¯ä¸€çš„ChannelHandlerContextã€‚&lt;/p&gt;
&lt;p&gt;Reactor æ¨¡å¼çš„åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Server ç«¯å®Œæˆåœ¨ &lt;code&gt;bind&amp;amp;listen&lt;/code&gt; ä¹‹åï¼Œå°† listenfd æ³¨å†Œåˆ° epollfd ä¸­ï¼Œæœ€åè¿›å…¥ event-loop äº‹ä»¶å¾ªç¯ã€‚å¾ªç¯è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ &lt;code&gt;select/poll/epoll_wait&lt;/code&gt; é˜»å¡ç­‰å¾…ï¼Œè‹¥æœ‰åœ¨ listenfd ä¸Šçš„æ–°è¿æ¥äº‹ä»¶åˆ™è§£é™¤é˜»å¡è¿”å›ï¼Œå¹¶è°ƒç”¨ &lt;code&gt;socket.accept&lt;/code&gt; æ¥æ”¶æ–°è¿æ¥ connfdï¼Œå¹¶å°† connfd åŠ å…¥åˆ° epollfd çš„ I/O å¤ç”¨ï¼ˆç›‘å¬ï¼‰é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å½“ connfd ä¸Šå‘ç”Ÿå¯è¯»/å¯å†™äº‹ä»¶ä¹Ÿä¼šè§£é™¤ &lt;code&gt;select/poll/epoll_wait&lt;/code&gt; çš„é˜»å¡ç­‰å¾…ï¼Œç„¶åè¿›è¡Œ I/O è¯»å†™æ“ä½œï¼Œè¿™é‡Œè¯»å†™ I/O éƒ½æ˜¯éé˜»å¡ I/Oï¼Œè¿™æ ·æ‰ä¸ä¼šé˜»å¡ event-loop çš„ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚ç„¶è€Œï¼Œè¿™æ ·å®¹æ˜“å‰²è£‚ä¸šåŠ¡é€»è¾‘ï¼Œä¸æ˜“ç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ &lt;code&gt;read&lt;/code&gt; è¯»å–æ•°æ®ä¹‹åè¿›è¡Œè§£ç å¹¶æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å·¥ä½œçº¿ç¨‹å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;å·¥ä½œçº¿ç¨‹å¤„ç†å®Œæ•°æ®ä¹‹åï¼Œè¿”å›åˆ° event-loop çº¿ç¨‹ï¼Œç”±è¿™ä¸ªçº¿ç¨‹è´Ÿè´£è°ƒç”¨ &lt;code&gt;write&lt;/code&gt; æŠŠæ•°æ®å†™å› clientã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒè¿™äº›ç½‘ç»œæ¨¡å‹ï¼Œé‡‡ç”¨golangå°è£…çš„åº•å±‚epoll/kqueueç³»ç»Ÿè°ƒç”¨æ–¹æ³•ï¼Œæ”¯æŒtcpåè®®ï¼Œå®ç°ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ç½‘ç»œæ¨¡å‹ï¼Œæ¡†æ¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/im/main/go-epoll.png&#34; alt=&#34;go-epoll.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç å®ç°ï¼š&lt;a href=&#34;https://github.com/weedge/lib/tree/main/poller&#34;&gt;https://github.com/weedge/lib/tree/main/poller&lt;/a&gt;  (å¯¹ä¸€ä¸ªå¼€æºåº“è¿›è¡Œçš„æ”¹é€ ï¼Œcodecç¼–è§£ç å™¨å¾…å®Œå–„)&lt;/p&gt;
&lt;h4 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/panjf2000/gnet&#34;&gt;gnet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cloudwego/netpoll&#34;&gt;netpoll&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/tidwall/evio&#34;&gt;evio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/AlexStocks/getty&#34;&gt;getty&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/netty/netty&#34;&gt;netty&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/xinali/articles/issues/57&#34;&gt;Linuxç½‘ç»œç¼–ç¨‹æ¨¡å‹&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>æ•™å­¦ç›´æ’­æ¦‚æ‹¬</title>
      <link>https://weedge.github.io/post/jxzb/</link>
      <pubDate>Wed, 01 Sep 2021 22:04:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/jxzb/</guid>
      
        <description>&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯ï¼š&lt;/h2&gt;
&lt;p&gt;ä¸åŒäºå¸¸è§„çš„ä¸»æ’­äº’åŠ¨ç›´æ’­ï¼›æ•™å­¦ç›´æ’­ï¼Œé¢å‘k12äººç¾¤ï¼Œ&lt;/p&gt;
&lt;p&gt;å‰æœŸä¼šæœ‰è¯¾å‰çš„å‡†å¤‡å·¥ä½œæ¯”å¦‚è¯¾ç¨‹åˆ›å»ºï¼Œå­¦ç”Ÿè´­ä¹°æ•°æ®ï¼Œè€å¸ˆè¯¾ä»¶ï¼Œè¯•å·é¢˜ç›®çš„å‡†å¤‡ï¼›&lt;/p&gt;
&lt;p&gt;åŒå¸ˆæ¨¡å¼ï¼šå­¦ç”Ÿä¼šåˆ†é…ç»™ä¸åŒçš„è¾…å¯¼è€å¸ˆï¼Œè¾…å¯¼è€å¸ˆä¼šå¯¹å­¦ç”Ÿè¿›è¡Œåˆ†ç­å¤„ç†ï¼Œè¯¾ä¸­ä¹Ÿä¼šæœ‰å­¦ç”Ÿé€‰ç»„ä¸Šè¯¾äº’åŠ¨çš„åœºæ™¯ï¼Œè¾…å¯¼è€å¸ˆä¹Ÿå¯ä»¥ç»™å­¦ç”Ÿä¸Šè¯¾ï¼Œä¹Ÿä¼šåœ¨åå°è¿›è¡Œè·Ÿè¯¾ï¼Œç›‘ç£å­¦ç”Ÿä¸Šè¯¾ï¼›&lt;/p&gt;
&lt;p&gt;ç›¸å¯¹äºå¸¸è§„çš„ä¸»æ’­äº’åŠ¨ï¼Œä¼šæ¨¡æ‹Ÿçº¿ä¸‹ä¸Šè¯¾çš„åœºæ™¯åˆ°çº¿ä¸Šè¯¾ä¸­ç›´æ’­ï¼Œå½¢æˆä¸€å¥—çº¿ä¸Šæ•™å­¦ç›´æ’­é—´åœºæ™¯æ¨¡å¼&lt;/p&gt;
&lt;h2 id=&#34;ä¸šåŠ¡å‘å±•&#34;&gt;ä¸šåŠ¡å‘å±•ï¼š&lt;/h2&gt;
&lt;p&gt;è¯¾ä¸­ç›´æ’­æ˜¯æŒ‰ç« èŠ‚ç»´åº¦è¿›è¡Œç›´æ’­äº¤äº’çš„ï¼Œä¸€ä¸ªç« èŠ‚ä¸€ä¸ªç›´æ’­é—´ï¼›&lt;/p&gt;
&lt;p&gt;éšç€ä¸šåŠ¡å‘å±•ï¼Œå‡ºç°äº†ä¸€ä¸ªç« èŠ‚å¤šä¸ªä¸åŒç›´æ’­é—´çš„åœºæ™¯ï¼ˆå‡ºé•œï¼‰ï¼Œå¤šä¸ªç« èŠ‚å…±äº«ä¸€ä¸ªç« èŠ‚ç›´æ’­é—´çš„åœºæ™¯(å…±äº«ç›´æ’­é—´ï¼‰ï¼› ä¸€ä¸ªç« èŠ‚æœ‰2ä¸ªç›¸åŒè¯¾ä¸­ä¸»è®²ç›´æ’­é—´çš„åœºæ™¯ï¼ˆæ—å¬ï¼‰; åé¢æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¡ç”Ÿå‡ºå…¶ä»–ç»„åˆç©æ³•ï¼›&lt;/p&gt;
&lt;h2 id=&#34;ä¸Šè¯¾ä¸šåŠ¡æµç¨‹ä»‹ç»&#34;&gt;ä¸Šè¯¾ä¸šåŠ¡æµç¨‹ä»‹ç»ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å”®å–ä¾§å»ºè¯¾&lt;/strong&gt;ï¼šå”®å–è€å¸ˆåœ¨å”®å–åå°æ–°å»ºè¯¾ç¨‹ç« èŠ‚ï¼Œå®šä¹‰è¯¾ç¨‹ç« èŠ‚çš„å±æ€§ï¼Œå½¢æˆå”®å–å•†å“ä¸Šæ¶ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å­¦ç”Ÿä¾§è´­ä¹°æŠ¥å&lt;/strong&gt;ï¼šå­¦ç”Ÿåœ¨å”®å–é¡µé¢å¯ä»¥è´­ä¹°è¯¾ç¨‹ç« èŠ‚ä¸Šè¯¾ï¼Œæˆ–è€…0å…ƒè¯¾æ‰«äºŒç»´ç ç›´æ¥è´­ä¹°æŠ¥åä¸Šè¯¾ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¾…å¯¼ä¾§&lt;/strong&gt;ï¼š æ ¹æ®ä¸Šè¯¾ç”¨æˆ·çš„å¹´é¾„æ®µè¿›è¡Œåˆ†ç±»ï¼šä½å¹¼ï¼Œç­ä¸»ä»»ï¼Œç£å­¦ï¼Œ0è½¬åŒ–ç£å­¦ï¼›å¯¹æŠ¥åçš„ç”¨æˆ·è¯¾å‰æ’çŒç­ï¼Œä»¥å¤§ç­/å°ç­/å°ç»„çš„ç»„ç»‡å½¢å¼ä¸Šè¯¾ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ•™å­¦ç›´æ’­è¯¾å‰é¢„çƒ­ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†å½“å¤©è¯¾å‰å‡†å¤‡çš„è¯¾ä»¶ï¼Œè¯•å·é¢˜ç›®ï¼Œè¯¾ç¨‹ç« èŠ‚è€å¸ˆè¾…å¯¼ç›¸å…³çš„ç­‰éçŠ¶æ€éæ˜“å˜æ¥å£æ•°æ®åœ¨ä¸Šè¯¾ä¹‹å‰é¢„çƒ­è‡³ç¼“å­˜ä¸­ï¼›å› ä¸ºè¯¾ä¸­ä¸Šè¯¾æ˜¯çªå‘æµé‡åœºæ™¯ï¼Œå‡å°‘å¯¹åå°æ¥å£dbçš„å¹¶å‘å‹åŠ›ï¼› å¯¹è¯¾ä¸­ä¸ä¼šå˜çš„æ¥å£æ•°æ®å¯ä»¥åŠ ä¸Šæœ¬åœ°ç¼“å­˜ï¼Œæé«˜ç›¸åº”ååæ•ˆç‡ï¼›(è¯»å¤šå†™å°‘åœºæ™¯æ¥å£ï¼Œcache-asideæ¨¡å¼ï¼‰&lt;/li&gt;
&lt;li&gt;è¯¾å‰å¯¹è¯¾ä¸­å¼‚åŠ¨æ˜“å˜æ•°æ®éœ€è¦ç›´æ’­é—´ç¼“å­˜ï¼Œä¸šåŠ¡ç»„ç»‡ç¼“å­˜ç­‰åˆå§‹åŒ–ç¼“å­˜æ•°æ®ï¼›æä¾›ç»™è¯¾ä¸­äº’åŠ¨åœºæ™¯ä½¿ç”¨ï¼›åé¢é€šè¿‡ä¸šåŠ¡ç­–ç•¥ç»‘å®šï¼ŒæŠŠä¸šåŠ¡ç»„ç»‡æ•°æ®æŠ½è±¡ä¸€ä¸ªè¯¾ä¸­ç†è§£çš„æ•°æ®æ¨¡å‹ï¼Œç›´æ’­é—´ç¼“å­˜ï¼Œ ç»„ç»‡æ ‘èŠ‚ç‚¹ç¼“å­˜ï¼Œå­¦ç”Ÿæ‰€åœ¨ç›´æ’­é—´èŠ‚ç‚¹ç¼“å­˜ç­‰åˆå§‹æ•°æ®ï¼›ï¼ˆåŸºäºè¿™ä¸ªè¯¾ä¸­ç¼“å­˜æ•°æ®æ¨¡å‹ï¼Œè¿›è¡Œç¼–ç ï¼Œéš”ç¦»ä¸šåŠ¡å±æ€§ï¼‰&lt;/li&gt;
&lt;li&gt;å¯¹äºå¼‚åŠ¨çŠ¶æ€æ˜“å˜æ›´æ–°é¢‘ç¹çš„æ¥å£ç›´æ¥è¯¾ä¸­ç¼“å­˜äº¤äº’ï¼Œå¼‚æ­¥è½ç›˜ï¼Œé™ä½ç›¸åº”å»¶è¿Ÿå‡å°‘å¯¹åå°æ¥å£çš„è¯»å†™å‹åŠ›ï¼›ï¼ˆå†™å¤šé¢‘ç¹åœºæ™¯æ¥å£ï¼Œwrite-behindæ¨¡å¼ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ•™å­¦ç›´æ’­è¯¾ä¸­äº’åŠ¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸åŒç”¨æˆ·è§’è‰²ç›´æ’­é“¾è·¯
&lt;ol&gt;
&lt;li&gt;è€å¸ˆç«¯ï¼šåˆå§‹åŒ–ç›´æ’­é—´(é…ç½®åŠ è½½ï¼Œä¸åŒçš„äº’åŠ¨ui, äº’åŠ¨åŠŸèƒ½æ˜¯å¦å¯ç”¨ï¼Œæµåª’ä½“appid/token)â†’ åŠ è½½è¯¾ä»¶(cocosèµ„æº) â†’è¿›å…¥ç›´æ’­é—´ â†’ é€šè¿‡æµåª’ä½“æ¨æµæ‹‰æµ/è¿éº¦/é€šè¿‡é•¿é“¾æ¥å‘é€èŠå¤©æ¶ˆæ¯å’Œä¿¡ä»¤â†’äº’åŠ¨ï¼ˆå‘é¢˜ç›®/ç­”æ¡ˆ/çº¢åŒ…/å¥–åŠ±ï¼‰â†’ åˆ‡æ¢ç›´æ’­é—´(è¾…å¯¼å‡ºé•œ)/ç»“æŸç›´æ’­&lt;/li&gt;
&lt;li&gt;å­¦ç”Ÿç«¯ï¼šåˆå§‹åŒ–ç›´æ’­é—´(é…ç½®åŠ è½½ï¼Œæµåª’ä½“appid/token, æµç¨‹é…ç½®)â†’åŠ è½½èµ„æº(cocosäº’åŠ¨èµ„æºåŒ…/aiæ¨¡å‹èµ„æºåŒ…)â†’ç­¾åˆ°/åˆ†ç»„â†’è¿›å…¥ç›´æ’­é—´â†’é€šè¿‡æµåª’ä½“æ‹‰æµæ¨æµ/è¿éº¦/é€šè¿‡é•¿é“¾æ¥å‘é€èŠå¤©æ¶ˆæ¯â†’äº’åŠ¨ï¼ˆå‘é¢˜ç›®/ç­”æ¡ˆ/çº¢åŒ…/å¥–åŠ±/pkï¼‰â†’ é€€å‡ºç›´æ’­é—´&lt;/li&gt;
&lt;li&gt;è¾…å¯¼è·Ÿè¯¾åå°ï¼šè¿›å…¥è·Ÿè¯¾åå°â†’ è¿›å…¥ç›´æ’­é—´â†’é€šè¿‡æµåª’ä½“æ‹‰æµ/é€šè¿‡é•¿é“¾æ¥å‘é€èŠå¤©æ¶ˆæ¯â†’å¤„ç†æŠ¥è­¦/é®ç›–/é‰´é»„/æ ‡è®°â†’ç›´æ’­ç»“æŸè·å–è®¡ç®—å¥½çš„å­¦ç”Ÿåˆ°è¯¾æ—¶é•¿ï¼Œä½œç­”ç‡ï¼Œå‡ºå‹¤ç‡ï¼Œå®Œè¯¾ç‡ç­‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;äº’åŠ¨ä¾èµ–é•¿é“¾æ¥ï¼Œç­”é¢˜ï¼Œpkç­‰åœºæ™¯ï¼Œéƒ½æœ‰å¼€å§‹åˆ°ç»“æŸçš„è¿‡ç¨‹ï¼Œå¯¹æ¯ä¸ªäº’åŠ¨åœºæ™¯ç”¨äº’åŠ¨idæ¥ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œæ¶‰åŠé‡‘é¢çš„äº’åŠ¨ï¼Œéœ€è¦è€ƒè™‘é»‘äº§çš„å½±å“ï¼Œéœ€è¦å¯¹ç­”æ¡ˆåŠ å¯†ï¼Œä»¥åŠé‡‘é¢çš„æå‰è®¡ç®—é¢„çƒ­å’Œé˜²æ­¢å¤šå‘å°‘å‘ï¼Œäº’åŠ¨è¯»å†™æ¥å£å°½é‡ç»†åŒ–ï¼Œé˜²æ­¢è¯»å†™ioå¤šåœ¨åŒä¸€ä¸ªæ¥å£ä¸­ï¼›å°½é‡æŠŠè®¡ç®—æ”¾åœ¨ç”¨æˆ·ç«¯æ¥å¤„ç†ï¼Œ æ¯”å¦‚ ç­”é¢˜æ˜¯å¦æˆåŠŸï¼Œpkæ˜¯å¦èµ¢äº†ç­‰ï¼Œåˆ†æ•£æœåŠ¡ç«¯æµé‡å‹åŠ›ï¼›(åŸåˆ™ï¼šç»Ÿä¸€ç®¡ç†äº’åŠ¨ç±»å‹ï¼Œå¯é…ç½®åŒ–ï¼Œç»†åŒ–io, è®¡ç®—å‰ç½®,åˆ†æµ)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ•™å­¦ç›´æ’­è¯¾åå›æ”¾ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å»ºè¯¾åç›´æ¥æ ¹æ®ç»‘å®šçš„ç­–ç•¥ç›´æ¥ç”Ÿæˆç›´æ’­é—´ï¼Œæä¾›å›æ”¾æ•°æ®ï¼Œæ¯”å¦‚ç´ å…»è¯¾ï¼Œä¼ªç›´æ’­&lt;/li&gt;
&lt;li&gt;è¯¾ä¸­çš„å›æ”¾æ•°æ®ï¼Œä¼šæœ‰ç›´æ’­é—´å’Œç”¨æˆ·äº’åŠ¨æœ€ç»ˆçŠ¶æ€æ•°æ®è½åº“&lt;/li&gt;
&lt;li&gt;å›æ”¾æ•°æ®æ˜¯ä¸ä¼šæ›´æ”¹ï¼Œè¯»å¤šå†™éå¸¸å°‘çš„åœºæ™¯ï¼Œç¼“å­˜ç›´æ¥é€šè¿‡cache-asideçš„æ¨¡å¼ç¼“å­˜dbåå°æ¥å£æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ•™å­¦æ•´ä½“æ¦‚æ‹¬æ¶æ„&#34;&gt;æ•™å­¦æ•´ä½“æ¦‚æ‹¬æ¶æ„&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/mypic/master/zyb-jx.png&#34; alt=&#34;jxzb&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“æ€è€ƒ&#34;&gt;æ€»ç»“æ€è€ƒ&lt;/h2&gt;
&lt;p&gt;â€‹	åº•å±‚çš„åŸºç¡€å»ºè®¾æ¯”è¾ƒé‡è¦(&lt;strong&gt;é«˜æ•ˆèƒ½&lt;/strong&gt;)ï¼›ä¸Šå±‚ä¸šåŠ¡çš„å‘å±•ç¦»ä¸å¼€åŸºç¡€ç»„ä»¶çš„ç¨³å®šæ€§(&lt;strong&gt;é«˜å¯ç”¨&lt;/strong&gt;)ï¼›ä»¥åŠæœåŠ¡å¤šäº†ä¹‹åï¼Œå¦‚ä½•é«˜æ•ˆå¿«é€Ÿè¿­ä»£ï¼Œä¸Šçº¿ä¹‹åä¿è¯æ•´ä½“æœåŠ¡æ€§èƒ½çš„ç¨³å®šæ€§(&lt;strong&gt;é«˜å¹¶å‘/ä½å»¶è¿Ÿ/å¯ç›‘æ§/å¯é…ç½®&lt;/strong&gt;)ï¼› ä»¥åŠæœåŠ¡æ¨¡å—ä¹‹é—´çš„åˆ’åˆ†åˆç†ï¼Œç»†åŒ–å‡ºåŠŸèƒ½ç»„ä»¶ï¼Œå¼‚åŠ¨ä¸šåŠ¡ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ˆ&lt;strong&gt;ä½è€¦åˆé«˜å†…èš&lt;/strong&gt;ï¼‰ï¼›è¿™äº›éƒ½éœ€è¦ç†è®ºçŸ¥è¯†åŠ ä»¥æŒ‡å¯¼(æ¯”å¦‚æœåŠ¡åˆ’åˆ†æŠ½è±¡åŸåˆ™DDD, ä¸šåŠ¡æŠ½è±¡è®¾è®¡åŸåˆ™SOLID)ï¼Œä»¥åŠå®è·µåœºæ™¯ä¸­å»å¹³è¡¡æŠ˜ä¸­æ”¹è¿›ï¼›æ²¡æœ‰æ°¸æ’çš„é“¶å¼¹(å†…å·)ï¼Œå°šéœ€ä¸æ–­è¿­ä»£æé«˜ã€‚ä¸€ä¸ªå­— &amp;ldquo;ç¨³&amp;rdquo;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;references&#34;&gt;references&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.infoq.cn/theme/119&#34;&gt;ä½œä¸šå¸®äº‘åŸç”Ÿæ¢ç´¢å’Œå®è·µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.infoq.cn/article/9jn0qfcx2xq7h6xltwa9&#34;&gt;å­¦è€Œæ€ç½‘æ ¡ç›´æ’­è¯¾å ‚çš„æ¶æ„æ¼”è¿›ä¹‹è·¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://insights.thoughtworks.cn/tag/domain-driven-design/&#34;&gt;Thoughtworksæ´è§-é¢†åŸŸé©±åŠ¨è®¾è®¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tech.meituan.com/2020/03/19/design-pattern-practice-in-marketing.html&#34;&gt;è®¾è®¡æ¨¡å¼åœ¨ç¾å›¢å¤–å–è¥é”€ä¸šåŠ¡ä¸­çš„å®è·µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tech.meituan.com/2017/12/22/ddd-in-practice.html&#34;&gt;é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨äº’è”ç½‘ä¸šåŠ¡å¼€å‘ä¸­çš„å®è·µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://read.douban.com/ebook/169386436/&#34;&gt;æ¶æ„æ•´æ´ä¹‹é“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://sre.google/books/&#34;&gt;google-sre-book&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://2012.33degree.org/pdf/JamesLewisMicroServices.pdf&#34;&gt;JamesLewisMicroServices.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://icyfenix.cn/&#34;&gt;å‡¤å‡°æ¶æ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.infoq.cn/article/6dlQZisMiXK3hzLIwEET&#34;&gt;å¾®æœåŠ¡æ¶æ„è®¾è®¡ä¸­çš„è®¾è®¡æ¨¡å¼ã€åŸåˆ™åŠæœ€ä½³å®è·µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s/mojOSgEUaHWGU3H3j7WjlQ&#34;&gt;å¾®æœåŠ¡æ‹†åˆ†ä¹‹é“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://book.douban.com/subject/26938710/&#34;&gt;ç³»ç»Ÿæ¶æ„-å¤æ‚ç³»ç»Ÿçš„äº§å“è®¾è®¡ä¸å¼€å‘&lt;/a&gt;: ç†è®ºçŸ¥è¯†ï¼Œå¤šè¯»å¤šæ€è€ƒå¤šå®è·µï¼Œ&amp;lsquo;&amp;lsquo;è™šå®&#39;&amp;lsquo;ç»“åˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=MzIzNjUxMzk2NQ==&amp;amp;mid=2247497722&amp;amp;idx=1&amp;amp;sn=33df39c492c508b2086a704612edf186&#34;&gt;æ¶æ„æŒ‡å¯¼åŸåˆ™&lt;/a&gt;&lt;/strong&gt;: å€¼å¾—åå¤æ¨æ•²ï¼Œå†…åŒ–ï¼Œå›é¡¾ä»¥å¾€åšè¿‡çš„é¡¹ç›®ï¼Œæ€»ç»“å‡ºåº•å±‚åŸç†&lt;/li&gt;
&lt;/ol&gt;</description>
      
    </item>
    
    <item>
      <title>ç›´æ’­ç³»åˆ—ä¹‹æ¶ˆæ¯æ¨¡å—æ¼”è¿›</title>
      <link>https://weedge.github.io/post/jxzbim/</link>
      <pubDate>Mon, 02 Nov 2020 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/jxzbim/</guid>
      
        <description>&lt;h4 id=&#34;æ•´ä½“æœåŠ¡æ¡†æ¶&#34;&gt;æ•´ä½“æœåŠ¡æ¡†æ¶&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://github.com/weedge/im/blob/main/zbim.png?raw=true&#34; alt=&#34;zbim&#34;&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>policy worker</title>
      <link>https://weedge.github.io/todo/policyworker/</link>
      <pubDate>Wed, 10 Jun 2020 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/todo/policyworker/</guid>
      
        <description>&lt;h4 id=&#34;ç­–ç•¥æ¨¡å‹&#34;&gt;ç­–ç•¥æ¨¡å‹&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync/atomic&amp;#34;&lt;/span&gt;
  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
)

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loadConfig&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
  &lt;span style=&#34;color:#75715e&#34;&gt;// ä»æ•°æ®åº“æˆ–è€…æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–é…ç½®ä¿¡æ¯ï¼Œç„¶åä»¥mapçš„å½¢å¼å­˜æ”¾åœ¨å†…å­˜é‡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;requests&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
  &lt;span style=&#34;color:#75715e&#34;&gt;// å°†ä»å¤–ç•Œä¸­æ¥å—åˆ°çš„è¯·æ±‚æ”¾å…¥åˆ°channelé‡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
  &lt;span style=&#34;color:#75715e&#34;&gt;// configå˜é‡ç”¨æ¥å­˜æ”¾è¯¥æœåŠ¡çš„é…ç½®ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;atomic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;// åˆå§‹åŒ–æ—¶ä»åˆ«çš„åœ°æ–¹åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶å­˜åˆ°configå˜é‡é‡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;loadConfig&lt;/span&gt;())
  &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
    &lt;span style=&#34;color:#75715e&#34;&gt;// æ¯10ç§’é’Ÿå®šæ—¶çš„æ‹‰å–æœ€æ–°çš„é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”æ›´æ–°åˆ°configå˜é‡é‡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)
      &lt;span style=&#34;color:#75715e&#34;&gt;// å¯¹åº”äºèµ‹å€¼æ“ä½œ config = loadConfig()
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;loadConfig&lt;/span&gt;())
    }
  }()
  &lt;span style=&#34;color:#75715e&#34;&gt;// åˆ›å»ºå·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½ä¼šæ ¹æ®å®ƒæ‰€è¯»å–åˆ°çš„æœ€æ–°çš„é…ç½®ä¿¡æ¯æ¥å¤„ç†è¯·æ±‚
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;requests&lt;/span&gt;() {
        &lt;span style=&#34;color:#75715e&#34;&gt;// å¯¹åº”äºå–å€¼æ“ä½œ c := config
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// ç”±äºLoad()è¿”å›çš„æ˜¯ä¸€ä¸ªinterface{}ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆå¼ºåˆ¶è½¬æ¢ä¸€ä¸‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Load&lt;/span&gt;().(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
        &lt;span style=&#34;color:#75715e&#34;&gt;// è¿™é‡Œæ˜¯æ ¹æ®é…ç½®ä¿¡æ¯å¤„ç†è¯·æ±‚çš„é€»è¾‘...
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;
      }
    }()
  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒï¼š&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.betacat.io/post/golang-atomic-value-exploration/&#34;&gt;https://blog.betacat.io/post/golang-atomic-value-exploration/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>2019 TODO</title>
      <link>https://weedge.github.io/post/2019todo/</link>
      <pubDate>Sat, 26 Jan 2019 01:16:30 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/2019todo/</guid>
      
        <description>&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;â€ƒ2018å¹´æ„Ÿè§‰è¿‡çš„å¥½å¿«ï¼Œæ—¶é—´èè‹’ï¼Œæœ‰äº›äº‹å’Œäººï¼Œæ„Ÿè§‰åœ¨2018å˜åŒ–å¾ˆå¤§ï¼›äººéƒ½æ˜¯æœ‰æ¬²æœ›çš„ï¼Œåœ¨æ¬²æœ›çš„é©±ä½¿ä¸‹ï¼Œå»å®ç°è‡ªå·±çš„ç›®æ ‡ï¼Œå…¶ä¸­æœ‰å¤±è´¥ï¼Œæœ‰æˆåŠŸï¼Œè¿˜æœ‰ä¸€ç›´åœ¨è·¯ä¸Šå‰è¡Œçš„ï¼›æ¯å¹´ç»™è‡ªå·±å®šçš„ç›®æ ‡è¦ä¹ˆæœŸæœ›å¤ªé«˜ï¼Œè¦ä¹ˆéšé‡è€Œå®‰ï¼Œåˆ°å¤´æ¥ç»™è‡ªå·±çš„æ„Ÿè§‰æ˜¯ä¸å¤ªåŠ¡å®ï¼Œæœ‰ç‚¹å¥½é«˜éª›è¿œäº†å’Œç¼ºä¹åŠ¨åŠ›ï¼›ä½†æ˜¯å¦‚æœæ²¡æœ‰æ¢¦æƒ³å’Œç›®æ ‡ï¼Œå’Œå’¸é±¼æœ‰ä»€ä¹ˆåˆ†åˆ«å‘¢ï¼Ÿæ‰€ä»¥æŠŠ2019å¹´çš„æ–°å¹´ç›®æ ‡ä»»åŠ¡å†™ä¸‹æ¥ï¼Œç»™è‡ªå·±ç«‹ä¸ªflagï¼Œå®æ–½å‡†åˆ™ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½å¤´çœ‹ä¹¦å­¦ä¹ åšäº‹ï¼ŒæŠ¬å¤´æ€è€ƒæ€»ç»“åšäºº~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¹¦&#34;&gt;ä¹¦&lt;/h2&gt;
&lt;p&gt;ç°åœ¨å¤§éƒ¨åˆ†æ—¶é—´çœ‹ä¹¦éƒ½æ˜¯åˆ©ç”¨æ‰‹æœºï¼Œåœ¨ä¸Šç­ä¸‹ç­çš„æ—¶é—´ï¼Œç¢ç‰‡åŒ–é˜…è¯»ï¼›åŒä¼‘æ—¥å’Œå‡æœŸçš„æ—¶å€™ï¼Œæ‰¾ä¸€ä¸ªå¤©ä¸Šåˆä¸‹åˆæ¥æ·±åº¦é˜…è¯»ï¼›ä¸è¿‡æ„Ÿè§‰åé¢ç»™ä¹¦çš„æ—¶é—´è¶Šæ¥è¶Šå°‘äº†ï¼Œæ—¶é—´çš„ç®¡ç†æ˜¯è¶Šå‘çš„é‡è¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;éæŠ€æœ¯ç±»&#34;&gt;éæŠ€æœ¯ç±»&lt;/h3&gt;
&lt;p&gt;è¯»ä¹¦ä¸åˆ†å…ˆåé¡ºåºï¼Œ æŒ‰ä¸€å¹´12ä¸ªæœˆç®—ï¼Œæš‚æ—¶å®šæ¯ä¸ªæœˆçœ‹å®Œä¸€åˆ°ä¸¤æœ¬ä¹¦ï¼Œè¿™é‡Œå¤§éƒ¨åˆ†å¿ƒç†å­¦å’Œç»æµå­¦æ–¹é¢çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/1012611/&#34;&gt;ä¹Œåˆä¹‹ä¼—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/10785583/&#34;&gt;æ€è€ƒï¼Œå¿«ä¸æ…¢&lt;/a&gt; (ä¹¦æ¯”è¾ƒéš¾å•ƒ)&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/10785583/&#34;&gt;åŸåˆ™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/11445548/&#34;&gt;è‡ªç§çš„åŸºå› &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/30259720/&#34;&gt;ä»Šæ—¥ç®€å²&lt;/a&gt; &lt;a href=&#34;https://book.douban.com/subject/26945094/&#34;&gt;æœªæ¥ç®€å²&lt;/a&gt; &lt;a href=&#34;https://book.douban.com/subject/25985021/&#34;&gt;äººç±»ç®€å²&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/30186119/&#34;&gt;ç¡…è°·å¢é•¿é»‘å®¢å®æˆ˜ç¬”è®°&lt;/a&gt; (é€‚åˆabç­–ç•¥æ•°æ®åˆ†æ)&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/27167992/&#34;&gt;è§è¯†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/26704143/&#34;&gt;æŠŠæ—¶é—´å½“ä½œæœ‹å‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/27662713/&#34;&gt;èˆ†è®º&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/26412113/&#34;&gt;æœºå™¨äººå›ä¹±&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/6811366/&#34;&gt;ç¦…ä¸æ‘©æ‰˜è½¦ç»´ä¿®è‰ºæœ¯&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŠ€æœ¯ç±»&#34;&gt;æŠ€æœ¯ç±»&lt;/h3&gt;
&lt;p&gt;æŠ€æœ¯ç±»çš„ä¸»è¦æ˜¯æœ€è¿‘å·¥ä½œå¯èƒ½ä¼šç”¨åˆ°çš„ï¼Œä½œä¸ºå‚è€ƒä¹¦ç±ï¼Œå…·ä½“è¿˜éœ€è¦åˆ°å·¥ä½œä¸­å®è·µè½¬åŒ–æˆè‡ªå·±ï¼Œå°±å¦‚ä¸€æœ¬æ­¦åŠŸç§˜ç±ï¼Œè¿˜éœ€è¦æ—¥ç§¯æœˆç´¯çš„ä¿®ç‚¼ï¼Œå¤§ä¾ ä¸æ˜¯ä¸€æ‹›ä¸€å¼å°±èƒ½æ··è¿¹æ±Ÿæ¹–çš„ï¼›æŠ€æœ¯è¿­ä»£è¶Šæ¥è¶Šå¿«ï¼Œå­¦ä¹ æ˜¯ä¸€ä¸ªé•¿æœŸçš„è¿‡æœŸï¼Œæ–°æŠ€æœ¯å±‚å‡ºä¸ç©·(æ–°æŠ€æœ¯çš„å­¦ä¹ ç¦»ä¸å¼€å¼€æºç¤¾åŒºgithubï¼Œä»£ç æ˜¯æœ€å¥½çš„æ–‡æ¡£)ï¼Œä½†æ˜¯è®¡ç®—æœºåŸºç¡€çš„ä¸œè¥¿æ˜¯ä¸å˜çš„ï¼ŒæŠ€æœ¯çš„è¿­ä»£éƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€æŠ€æœ¯ä¸Šå‘å±•ï¼Œæ‰€ä»¥ä¿®ç‚¼å†…åŠŸå¿ƒæ³•è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/26337939/&#34;&gt;ä¸ƒå‘¨ä¸ƒå¹¶å‘æ¨¡å‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/26586598/&#34;&gt;æ€§èƒ½ä¹‹å·…&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/26586598/&#34;&gt;Linuxé«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://book.douban.com/subject/10590856/&#34;&gt;ç»Ÿè®¡å­¦ä¹ æ–¹æ³•&lt;/a&gt; &lt;a href=&#34;https://book.douban.com/subject/26708119/&#34;&gt;æœºå™¨å­¦ä¹ &lt;/a&gt; &lt;a href=&#34;https://book.douban.com/subject/27087503/&#34;&gt;æ·±åº¦å­¦ä¹ &lt;/a&gt; (è¿™ä¸ªå­¦èµ·æ¥æœ‰äº›æ¯ç‡¥ï¼Œéœ€è¦ç½‘ä¸Šæ‰¾ç‚¹ä»£ç caseæ¥ç»“åˆå®é™…åº”ç”¨åœºæ™¯)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä»–è¯­è¨€ç±»çš„ï¼Œç½‘ç»œç¼–ç¨‹ç±»çš„ï¼Œæ•°æ®åº“æ“ä½œä¼˜åŒ–ç±»çš„æ•°æ®éƒ½å¯ä»¥åœ¨è¶Šåˆ°é—®é¢˜çš„æ—¶å€™ï¼Œé€šè¿‡æŠ€æœ¯ä¸“æœ‰çš„å…³é”®å­—å¯ä»¥google/ç™¾åº¦ä¸€ä¸‹, å»è§£å†³å®é™…è¶Šåˆ°é—®é¢˜ï¼Œè¦æ¯”ç›´æ¥çœ‹ä¹¦è¦å°è±¡æ·±åˆ»çš„å¤šï¼ŒçŸ¥å…¶ç„¶è€ŒçŸ¥æ‰€ä»¥ç„¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº‹&#34;&gt;äº‹&lt;/h2&gt;
&lt;p&gt;2018çš„äº‹è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚&lt;/p&gt;
&lt;p&gt;å·¥ä½œä¸Šå¤§éƒ¨åˆ†æ—¶é—´æ˜¯è§£å†³ä¸šåŠ¡éœ€æ±‚ï¼Œå¶å°”ä¹Ÿä¼šå†™å‡ºä¸€äº›bug, åšäº‹ç¼ºä¹å…¨é¢çš„è€ƒè™‘ï¼Œæœ‰äº›äº‹æƒ…ä¸æ˜¯è‡ªå·±æ„¿æ„å»åšçš„ï¼Œæœ‰æ—¶å€™ç¼ºä¹ç§¯ææ€§ï¼›ä½œä¸ºä¸€ä¸ªåœ¨èŒåœºæ··è¿¹å…­å¹´çš„äººæ¥è¯´ï¼ŒèŒƒè¿™äº›é”™è¯¯ï¼Œéš¾å…ä¼šæœ‰ç‚¹å°´å°¬ï¼Œæ‰€ä»¥åœ¨åé¢çš„èŒåœºå·¥ä½œä¸­ï¼Œä¸ç®¡æ˜¯å–œæ¬¢å’Œé‡å¤åŒå€¦çš„äº‹æƒ…ï¼Œéƒ½è¦è®¤çœŸè´Ÿè´£çš„å»å¯¹å¾…ï¼Œå·¥ä½œæ˜¯ç»™å…¬å¸è§£å†³é—®é¢˜ï¼Œä¸èƒ½å¸¦ç€æƒ…ç»ªåŒ–å¤„ç†ï¼›è¿˜æœ‰å·¥ä½œä¸Šéœ€è¦åè°ƒæŠŠæ§å¥½æ•ˆç‡å’Œäº§å‡ºè´¨é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ„Ÿæƒ…ä¸Šé€šè¿‡ç›¸äº²è®¤è¯†äº†æŠ•ç¼˜çš„å¦ä¸€åŠï¼Œè™½ç„¶ä¸¤äººå¤–å½¢ä¸Šå¯èƒ½æœ‰äº›ä¸æ­è°ƒ~ï¼Œä½†æ˜¯æœ€åå¼‚åœ°æ‹èµ°åœ¨ä¸€èµ·æŒºä¸å®¹æ˜“çš„ï¼›å¹´åº•æ€»æ•°æŠŠä¹°æˆ¿å­çš„äº‹æƒ…ç»™ç»“å°¾ï¼Œè£…ä¿®çš„äº‹æƒ…ä¸¤äººå•†é‡ç€æ…¢æ…¢æ¥ï¼Œå½¼æ­¤ç›¸ä¿¡ä¼šæœ‰ä¸€ä¸ªæ¸©é¦¨çš„å®¶ğŸ &lt;/p&gt;
&lt;p&gt;2019çš„è§„åˆ’ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»è¦æ˜¯è‡ªå·±å·¥ä½œä¸Šæœ‰çªç ´ï¼Œä¸ç®¡æ˜¯æŠ€èƒ½è¿˜æ˜¯å¤„ç†äº‹æƒ…&lt;/li&gt;
&lt;li&gt;å¸®åŠ©å¥¹æ‰¾åˆ°ä¸€ä»½è¿˜ç®—æ»¡æ„çš„å·¥ä½œ&lt;/li&gt;
&lt;li&gt;å¼„å®Œæˆ¿å­å‡†å¤‡ç»“å©šğŸ&lt;/li&gt;
&lt;li&gt;æ¥çˆ¶æ¯è¿‡æ¥ç©&lt;/li&gt;
&lt;li&gt;ç”¨golang é‡æ„ä¸€ä¸‹å°æœºå™¨äºº&lt;/li&gt;
&lt;li&gt;å®Œæˆç½‘å…³weegate&lt;/li&gt;
&lt;li&gt;more&amp;hellip;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€&#34;&gt;æ€&lt;/h2&gt;
&lt;p&gt;å¹´å¤ä¸€å¹´ï¼Œå²æœˆå‚¬äººè€ï¼Œ30+çš„ç¨‹åºçŒ¿çœ‹ç€00åéƒ½å·²ç»å¼€å§‹ä¸Šå¤§å­¦ï¼Œå¼€å§‹è¿›å…¥ç¤¾ä¼šå®ä¹ äº†ï¼Œçªç„¶å±æœºæ„Ÿæ²¹ç„¶è€Œç”Ÿï¼Œæ˜¯å¦å°±ä¸€å®šä¼šè¢«ç¤¾ä¼šæ·˜æ±°å‘¢ï¼Œæ˜¯å¦å°±åˆ°äº†35+å², å°±ä¸èƒ½ç¼–ç¨‹äº†å‘¢ï¼Œç»™å…¬å¸åˆ›é€ çš„ä»·å€¼å°±æ‰“æŠ˜äº†å‘¢ï¼Ÿä¹Ÿè®¸è¿™äº›é—®é¢˜å’Œç¤¾ä¼šä¸Šçš„é¸­æ¢¨ä¸€ç›´ä¼šå­˜åœ¨ï¼Œå¹¶æ¿€åŠ±ç€èµ„å†è€çŒ¿ä»¬å»åæ€ï¼Œå»å¤ç›˜æ€»ç»“ï¼›ç»éªŒæ˜¯æœ‰çš„ï¼Œæ–—å¿—åœ¨ï¼Œå°±æ€•ä¸å­¦ä¹ ï¼Œä¿—è¯è¯´çš„å¥½ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ´»åˆ°è€ï¼Œå­¦åˆ°è€ï¼Œå¹²åˆ°è€ï¼ï¼ˆä¸ºå³å°†æˆ–è€…å·²æˆè€çŒ¿ ä»£è¨€ï¼Œç¬”èŠ¯~ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æœ€å&#34;&gt;æœ€å&lt;/h2&gt;
&lt;p&gt;å€Ÿç”¨æˆ‘æœ€å–œæ¬¢çš„ä¹”å¸ƒæ–¯è¯­å½•ï¼Œä½œä¸ºæœ¬æ–‡çš„ç»“å°¾ï¼ˆè™½ç„¶æœ‰ç‚¹é¸¡è¡€çš„æ„Ÿè§‰ï¼‰ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äººè¿™ä¸€è¾ˆå­æ²¡æ³•åšå¤ªå¤šçš„äº‹æƒ…ï¼Œæ‰€ä»¥æ¯ä¸€ä»¶éƒ½è¦åšå¾—ç²¾å½©ç»ä¼¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½ çš„æ—¶é—´æœ‰é™ï¼Œæ‰€ä»¥ä¸è¦ä¸ºåˆ«äººè€Œæ´»ã€‚ä¸è¦è¢«æ•™æ¡æ‰€é™ï¼Œä¸è¦æ´»åœ¨åˆ«äººçš„è§‚å¿µé‡Œã€‚ä¸è¦è®©åˆ«äººçš„æ„è§å·¦å³è‡ªå·±å†…å¿ƒçš„å£°éŸ³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ€é‡è¦çš„æ˜¯ï¼Œå‹‡æ•¢çš„å»è¿½éšè‡ªå·±çš„å¿ƒçµå’Œç›´è§‰ï¼Œåªæœ‰è‡ªå·±çš„å¿ƒçµå’Œç›´è§‰æ‰çŸ¥é“ä½ è‡ªå·±çš„çœŸå®æƒ³æ³•ï¼Œå…¶ä»–ä¸€åˆ‡éƒ½æ˜¯æ¬¡è¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;é“¾æ¥&#34;&gt;é“¾æ¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;amp;mid=2651011968&amp;amp;idx=1&amp;amp;sn=3d500660f7dd47c9fa4033bd9fa69c2f&#34;&gt;è§£è¯»2018ï¼šæˆ‘ä»¬å¤„åœ¨ä¸€ä¸ªä»€ä¹ˆæ ·çš„æŠ€æœ¯æµªæ½®å½“ä¸­ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.zhihu.com/question/22937279&#34;&gt;ç¨‹åºå‘˜å·¥ä½œåªèƒ½åšåˆ° 35 å²å—ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=MzI2MDI5NDQwMg==&amp;amp;mid=2247483959&amp;amp;idx=1&amp;amp;sn=bcb5fb9eb2aca5810d87ad3b63c4612b&amp;amp;chksm=ea6a905add1d194c57468ac88b611b9005290d1d922154a7b6fe9fec3fdd710c27de41282608&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0327cbNpv&#34;&gt;35å²ä»¥åçš„å¤§é¾„ç¨‹åºå‘˜ï¼Œæ­£å¤„äºæ€æ ·ä¸€ç§çŠ¶æ€?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>å±è”½macbookå†…ç½®é”®ç›˜</title>
      <link>https://weedge.github.io/post/mackeyboard-hhkb/</link>
      <pubDate>Sat, 19 Jan 2019 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/mackeyboard-hhkb/</guid>
      
        <description>&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;â€ƒâ€ƒæ˜¨å¤©æ™šä¸Šå’Œå¥³å‹äº‰åµï¼Œä¸å°å¿ƒæŠŠæ°´æ´’åœ¨macbookçš„é”®ç›˜ä¸Šäº†ï¼Œå½“æ—¶æ²¡æœ‰åŠæ—¶å…³æœºçƒ˜å¹²ï¼Œç›´æ¥å°±æŠŠæœ¬ç»™å…³ä¸Šäº†ï¼Œå¯¼è‡´ä»Šå¤©æ—©ä¸Šèµ·æ¥å‘ç°é”®ç›˜æŒ‰zå·¦è¾¹çš„shifté”®å¤±çµï¼Œæœ‰æ—¶å€™ä¸€ç›´é‡å¤zé”®ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´zé”®å¤±çµï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªé”®ä¹Ÿå¤±çµäº†ï¼Œç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œæœ‰å¯èƒ½æ˜¯æ’çº¿çš„åŸå› ï¼Œæ‰¾å®˜ç½‘ä¿®ç†ä¸€ä¸‹, ä¼°è®¡ä¹Ÿå¾—300åˆ°1000ä¸ç­‰ï¼›æƒ³æƒ³è¿™äº›ç»´ä¿®è´¹ç”¨éƒ½å¯ä»¥ä¹°ä¸ªé”®ç›˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€ƒâ€ƒç”Ÿæ—¥çš„æ—¶å€™å¥³å‹ç»™æˆ‘ä¹°äº†ä¸€ä¸ªæœ‰çº¿é™å®¹æ— åˆ»ç‰ˆçš„hhkbï¼ˆç­”åº”ç”¨è¿™ä¸ªåŠªåŠ›èµšé’±çš„ï¼‰ï¼Œå½“æ—¶ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œæ— åˆ»ç‰ˆçš„æ•°å­—é”®ä¸æ˜¯å¾ˆå¥½æŒ‰ï¼Œåé¢è§‰å¾—ä¸Šç­æ¯å¤©èƒŒç€å®ƒæœ‰ç‚¹æ²‰ï¼Œå°±ææµ…äº†ï¼›ç°åœ¨å¥½äº†ï¼Œå†…ç½®é”®ç›˜å·²åï¼Œä»¥åå°±é è¿™ä¸ªé”®ç›˜äº†ï¼Œä¸€ç›´ç”¨ä¹Ÿä¸æ¢äº†;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼ŒæŠŠé”®ç›˜æ”¾åœ¨macbookçš„å†…ç½®é”®ç›˜ä¸Šæœ‰å¯èƒ½ä¼šè§¦å‘ä¸Šé¢çš„æŒ‰é”®ï¼Œ éœ€è¦ç¦ç”¨æ‰å†…ç½®é”®ç›˜ï¼›ç½‘ä¸Šæ‰¾äº†ä¸€ä¸ªæŒºå¥½ç”¨çš„è½¯ä»¶&lt;a href=&#34;https://pqrs.org/osx/karabiner/&#34;&gt;Karabiner&lt;/a&gt;ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç‰©ç†é”®æ˜ å°„ï¼Œå…·ä½“æ“ä½œå¸®åŠ©æ–‡æ¡£å¯ä»¥è§&lt;a href=&#34;https://pqrs.org/osx/karabiner/document.html&#34;&gt;å®˜ç½‘æ–‡æ¡£&lt;/a&gt;ï¼›ä¸‹è½½å®‰è£…åï¼Œè®¾ç½®å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/kar.png&#34; alt=&#34;karabiner&#34;&gt;&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>abtest</title>
      <link>https://weedge.github.io/todo/abtest/</link>
      <pubDate>Sat, 23 Dec 2017 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/todo/abtest/</guid>
      
        <description></description>
      
    </item>
    
    <item>
      <title>idç”Ÿæˆ</title>
      <link>https://weedge.github.io/post/idgen/</link>
      <pubDate>Tue, 12 Dec 2017 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/idgen/</guid>
      
        <description>&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;â€ƒâ€ƒç”¨æˆ·ä¸šåŠ¡æ•°æ®å¢é•¿è¿‡å¿«ï¼Œæ¯”å¦‚æ–‡ç« è¯„è®ºç³»ç»Ÿï¼Œfeedæµç³»ç»Ÿï¼Œè®¢å•ç³»ç»Ÿï¼›æ•°æ®çš„å­˜æ”¾æ¨¡å‹éœ€è¦ä»ä¸»ä»çš„å•æœºå•åº“ æ¼”å˜æˆ åˆ†å¸ƒå¼é›†ç¾¤æ•°æ®åº“ï¼› åˆ†åº“åˆ†è¡¨çš„æ•°æ®æŸ¥è¯¢éœ€ç”¨åˆ°å…¨å±€å”¯ä¸€æ ‡è¯†çš„idæ¥æŸ¥è¯¢ä¸šåŠ¡ï¼Œæ¯”å¦‚è«ä¸ªfeedçš„è¯„è®ºæ•°æ®ã€æ¨é€æ¶ˆæ¯ã€è´­ç‰©è®¢å•ã€æ´»åŠ¨ä¼˜æƒ åŠµç­‰ç­‰éƒ½éœ€è¦è¿›è¡Œå”¯ä¸€IDæ ‡è¯†ï¼›ä»¥ä¾¿åˆ†å¸ƒå¼å­˜å‚¨(mysql,nosql,newsql)ç´¢å¼•(b+tree, LSMtree,inverted index)å¿«é€ŸæŸ¥è¯¢ï¼›è‡³äºæ•°æ®ä¸€è‡´æ€§é€šè¿‡çº¦å®šè§„èŒƒåè®®ä¿è¯(å¼ºï¼šç±»Paxosç®—æ³•/raftç®—æ³•ï¼Œå¼±: mq) ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç‰¹å¾&#34;&gt;ç‰¹å¾&lt;/h2&gt;
&lt;p&gt;æ ¹æ®ä¸åŒçš„éœ€æ±‚åœºæ™¯è¿›è¡Œæ€»ä½“å½’çº³å…¨å±€idç”ŸæˆæœåŠ¡çš„ç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨å±€å”¯ä¸€ï¼šæœ€åŸºæœ¬è¦æ±‚ï¼Œä¸èƒ½å‡ºç°é‡å¤çš„idï¼›&lt;/li&gt;
&lt;li&gt;è¶‹åŠ¿é€’å¢ï¼šä¸šåŠ¡ä¸­å¦‚æœå¤§é‡ä½¿ç”¨mysql innodbæ¥å­˜æ”¾æ•°æ®ï¼Œè€Œinnodbä½¿ç”¨èšé›†ç´¢å¼•(cluster index)ï¼Œä½¿ç”¨b+treeæ¥å­˜æ”¾ç´¢å¼•æ•°æ®ï¼Œæ‰€ä»¥åœ¨ä¸»é”®çš„é€‰æ‹©å­˜æ”¾ä¸Šåº”è¯¥å°½é‡ä½¿ç”¨æ•´æ•°å‹æœ‰åºçš„ä¸»é”®ï¼Œæ¥ä¿è¯æ•°æ®çš„å†™å…¥æ€§èƒ½(é¡ºåºio)&lt;/li&gt;
&lt;li&gt;å•è°ƒé€’å¢ï¼šIMå¢é‡æ¶ˆæ¯ï¼Œæ’åºåºåˆ—å·&lt;/li&gt;
&lt;li&gt;å¯è§£ç ï¼šæ¯”å¦‚ç»Ÿè®¡åˆ†æidçš„ç”Ÿæˆæƒ…å†µï¼Œå°½é‡æ˜¯æœåŠ¡åˆ†å¸ƒå‡åŒ€ï¼Œéœ€è¦æŸ¥çœ‹ä¸šåŠ¡id(appID),ç”Ÿæˆæ—¶é—´(time ms), ä»¥åŠidæœåŠ¡èŠ‚ç‚¹å·(nodeID)&lt;/li&gt;
&lt;li&gt;ä¿¡æ¯å®‰å…¨ï¼šç”Ÿæˆidçš„è§„å¾‹ä¸èƒ½è¿‡äºç®€å•ï¼Œæ¯”å¦‚å•è°ƒé€’å¢ï¼Œä¿¡æ¯è¯¦æƒ…å±•ç¤ºé¡µä¼šæœ‰è§„å¾‹çš„çˆ¬å–ï¼Œè¿™æ ·ç›´æ¥å¯ä»¥ä¼°ç®—å‡ºä¸€äº›æŒ‡æ ‡æ•°æ®(å¤©è®¢å•é‡ï¼Œå¤©feedäº§ç”Ÿæµé‡ç­‰)ï¼›æ‰€ä»¥éœ€è¦idæ— è§„å¾‹ç”Ÿæˆ(å¯ä»¥å†…éƒ¨è·å–æœ‰è§„å¾‹çš„idåï¼Œè¿›è¡ŒåŠ ç›ç¼–ç å¤„ç†)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›ç‰¹å¾æœ‰äº›æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½åŒæ—¶æ»¡è¶³ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯å…·ä½“åˆ†æ(å¯èƒ½æœ‰äº›åœºæ™¯ç‰¹å¾è¿˜æœªè€ƒè™‘åˆ°ï¼Œåç»­åŠ å…¥ï¼‰ï¼Œé€‰æ‹©å¯¹åº”ç‰¹å¾æ–¹æ¡ˆæ¥æ»¡è¶³ã€‚&lt;/p&gt;
&lt;p&gt;idç”ŸæˆæœåŠ¡çš„è¯„ä»·æŒ‡æ ‡ï¼šï¼ˆç”±äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œidç”ŸæˆæœåŠ¡ä¾èµ–åº¦éå¸¸é«˜ï¼Œéœ€è¦é«˜å¯ç”¨å’Œé«˜æ€§èƒ½ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å‡å“åº”æ—¶é—´å’Œæ‰€æœ‰è¯·æ±‚ä¸­çš„åƒåˆ†ä¹‹999çš„æœ€ä½ç›¸åº”æ—¶é—´(TP999)å°½å¯èƒ½çš„ä½ï¼›&lt;/li&gt;
&lt;li&gt;SLA(å¯ç”¨æ€§)5ä¸ª9(å…¨å¹´ä½äº5åˆ†é’Ÿçš„ä¸å¯ç”¨æ—¶é—´)&lt;/li&gt;
&lt;li&gt;QPS(æ¯ç§’è¯·æ±‚é‡)å°½å¯èƒ½çš„é«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ–¹æ¡ˆ&#34;&gt;æ–¹æ¡ˆ&lt;/h2&gt;
&lt;h3 id=&#34;uuid&#34;&gt;uuid&lt;/h3&gt;
&lt;p&gt;æ ‡å‡†å‹å¼åŒ…å«32ä¸ª16è¿›åˆ¶æ•°å­—ï¼Œä»¥è¿å­—å·åˆ†ä¸ºäº”æ®µï¼Œå½¢å¼ä¸º8-4-4-4-12çš„36ä¸ªå­—ç¬¦ï¼Œæ— åºï¼Œä¸é€‚åˆç”¨æ¥åšä¸ºæ•°æ®åº“(B+Tree)ä¸­çš„ä¸»é”®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;snowflake&#34;&gt;snowflake&lt;/h3&gt;
&lt;p&gt;twitterä¸­çš„feedæ•°æ®ä»mysqlè¿ç§»è‡³Cassandraä¸­å­˜æ”¾ï¼Œcassandraæ²¡æœ‰é¡ºåºidç”Ÿæˆæœºåˆ¶ï¼Œæå‡ºçš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼›ä¸ä¾èµ–å…¶ä»–ç»„ä»¶æœåŠ¡ï¼Œç›´æ¥ç¨‹åºç®—æ³•å®ç°ï¼›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;41ä½çš„æ—¶é—´åºåˆ—ï¼ˆç²¾ç¡®åˆ°æ¯«ç§’ï¼Œ41ä½çš„é•¿åº¦å¯ä»¥ä½¿ç”¨69å¹´ï¼‰&lt;/li&gt;
&lt;li&gt;10ä½çš„æœºå™¨æ ‡è¯†ï¼ˆ10ä½çš„é•¿åº¦æœ€å¤šæ”¯æŒéƒ¨ç½²1024ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œæ ¹æ®ä¸šåŠ¡æœåŠ¡ç±»å‹å’Œéƒ¨ç½²è¿˜å¯è¿›è¡Œç»†åˆ†ï¼Œæ¯”å¦‚idc,æœºå™¨,ä¸šåŠ¡id(appid)&lt;/li&gt;
&lt;li&gt;12ä½çš„è®¡æ•°é¡ºåºå·ï¼ˆ12ä½çš„è®¡æ•°é¡ºåºå·æ”¯æŒæ¯ä¸ªèŠ‚ç‚¹æ¯æ¯«ç§’äº§ç”Ÿ4096ä¸ªIDåºå·ï¼‰&lt;/li&gt;
&lt;li&gt;æœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œå§‹ç»ˆä¸º0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/snowflake-64bit.jpg&#34; alt=&#34;snowflake&#34;&gt;&lt;/p&gt;
&lt;p&gt;64ä½bigintç±»å‹ID, æœ€å¤§2^63-1  19ä½10è¿›åˆ¶æ•°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¼ºç‚¹: å¤šæœºéƒ¨ç½²æ—¶ï¼Œå¿…é¡»ä¿è¯æ—¶é—´æ˜¯åŒæ­¥çš„ï¼Œå¦åˆ™å¦‚æœå­˜åœ¨æ—¶é—´å›æº¯ï¼Œå‡ºç°é‡å¤idã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥åŠ ä¸Šå¤šå°æœºå™¨æ—¶é—´åŒæ­¥æ£€æµ‹æ¢å¤æœºåˆ¶&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E6%99%82%E9%96%93%E5%8D%94%E5%AE%9A&#34;&gt;NTPç½‘ç»œæ—¶é—´åè®®&lt;/a&gt;ï¼Œå¯ä»¥å°½é‡é¿å…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;redisç”Ÿæˆid&#34;&gt;redisç”Ÿæˆid:&lt;/h3&gt;
&lt;p&gt;åˆ©ç”¨redisçš„å•çº¿ç¨‹æœºåˆ¶ï¼Œä»¥åŠåŸå­é€’å¢æ“ä½œINCRå’ŒINCRBYæ¥å®ç°ï¼›å¤šå°éƒ¨ç½²ï¼šé‡‡ç”¨æŒ‰èµ·å§‹å€¼åˆ†Nå°æœºå™¨æ•°é—´éš”é€’å¢(ç­‰å·®æ•°åˆ—)ï¼Œæ ¼å¼ï¼šæ—¶é—´æˆ³+å•æ—¥å¢é•¿å·ï¼›(å•ç‚¹æ•…éšœï¼Œç”±äºç­‰å·®å€¼Næœºå™¨æ•°æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„ï¼Œæ°´å¹³æ‰©å®¹ä¸æ–¹ä¾¿ï¼Œä¸ä¾¿äºè¿ç»´)&lt;/p&gt;
&lt;h3 id=&#34;mysqlç”Ÿæˆid64ä½&#34;&gt;mysqlç”Ÿæˆid(64ä½):&lt;/h3&gt;
&lt;p&gt;åˆ©ç”¨mysqlçš„auto_incrementè‡ªåŠ©æœºåˆ¶ + replace into tableæ“ä½œ(tableå®šä¹‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯64ä½çš„ä¸»é”®è‡ªå¢å­—æ®µï¼Œä¸€ä¸ªæ˜¯å±æ€§å”¯ä¸€å­—æ®µ) +InnoDB/MyISAMå¼•æ“ æ¥å®ç°ï¼Œå¤šå°ä¸»ä»éƒ¨ç½²ï¼šé‡‡ç”¨æŒ‰èµ·å§‹å€¼åˆ†Nå°æœºå™¨æ•°é—´éš”é€’å¢(ç­‰å·®æ•°åˆ—)ï¼Œéœ€è¦è®¾ç½®mysqlè‡ªå¢å‚æ•°ï¼šset auto_increment_increment=N.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜åœ¨é—®é¢˜ï¼š&lt;br&gt;
ä¸»è·ªäº†ï¼Œåˆ‡ä»ï¼Œä¸»ä»æ•°æ®åŒæ­¥å­˜åœ¨å»¶æ—¶çš„è¯ï¼Œidä¼šå‡ºç°é‡å¤çš„æƒ…å†µï¼Œä»¥åŠæ¯æ¬¡ç”Ÿæˆidï¼Œéƒ½è¦è®¿é—®ä¸€æ¬¡æ•°æ®åº“replaceæ“ä½œï¼Œæ€§èƒ½ä¼šé™ä½å¾ˆå¤šï¼›&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;br&gt;
é€šè¿‡â€œå·æ®µâ€segmentæ‰¹é‡è·å–çš„æ–¹å¼ï¼Œä»mysqlä¸­è·å–ID,ç„¶åæ‰©å¤§å€æ•°M,è®¾å®šèŒƒå›´[ID*M,(ID+1)*M]ï¼Œç„¶åä»å†…å­˜ä¸­çš„è¿™ä¸ªèŒƒå›´é‡Œç”Ÿæˆä¸€ä¸ªè‡ªå¢åºåˆ—å·ï¼Œå¦‚æœåˆ°äº†èŒƒå›´çš„æœ€å¤§å€¼ï¼Œåˆ™é˜»å¡å…¶ä»–è¯·æ±‚ï¼Œç”±æœ€æ—©çš„çº¿ç¨‹å»dbè·å–idï¼Œè®¾å®šèŒƒå›´ï¼Œæˆ–è€…åœ¨å·ç åˆ°è¾¾æœ€å¤§èŒƒå›´çš„10~75%çš„æ—¶å€™æå‰å»dbè·å–idï¼Œè¿™æ ·å°±ä¸ä¼šé˜»å¡çš„æƒ…å†µï¼›ç„¶åç»§ç»­ä»¥è¿°è¿‡ç¨‹ã€‚è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªå°ç¼ºé™·å°±æ˜¯æœåŠ¡é‡å¯ï¼Œä»¥å¾€å†…å­˜ä¸­çš„idèŒƒå›´æ®µå°±ä¼šæµªè´¹æ‰ï¼Œä½†æ˜¯64ä½è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ€§èƒ½æé«˜äº†ï¼Œæµªè´¹ç‚¹ä¹Ÿå°±æ— æ‰€è°“å•¦~ å½“ç„¶å¦‚æœä½ æ˜¯å¤„å¥³åº§ï¼Œæœ€æ±‚æè‡´å¯ä»¥æ—è·¯ç›‘æ§è®°å½•å·²ç»åˆ†é…å‡ºå»çš„idï¼Œå¯åŠ¨çš„æ—¶å€™åœ¨æå›æ¥æ”¾å…¥å†…å­˜ä¸­ç»§ç»­åˆ†é…ç”Ÿæˆidï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ¡ˆæ¯”è¾ƒå¸¸ç”¨ï¼Œç¨³å®šï¼Œä¾èµ–mysqlï¼Œéœ€è¦ä¸dbaé…åˆæ“ä½œ,å’Œredisç”Ÿæˆidä¸€æ ·ä¸ä¾¿äºæ°´å¹³æ‰©å±•ï¼Œè¿ç»´ç»´æŠ¤ï¼Œæ”¹è¿›æ–¹æ¡ˆç±»ä¼¼äºç¾å›¢çš„Leaf-segmentè®¾è®¡ï¼Œé‡‡ç”¨å…ƒæ•°æ®(tag,max_id,step,desc,create_time,update_time)ç®¡ç†ï¼Œå¯¹ä¸šåŠ¡tagè¿›è¡Œåˆ†åº“æ‰©å®¹ï¼Œå‡ä½è¿ç»´ç»´æŠ¤æˆæœ¬&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ€§èƒ½ä¸Šå½“ç„¶snowflakeæ€§èƒ½æœ€å¥½ï¼Œå…¨å±€å”¯ä¸€ï¼Œè¶‹åŠ¿é€’å¢ï¼Œå¯è§£ç ï¼Œä¸ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œå”¯ä¸€ç¼ºé™·æ˜¯æ—¶é—´ä¸åŒæ­¥çš„é—®é¢˜ï¼Œå¦‚æœå›é€€çš„æ—¶é—´æ¯”è¾ƒå¤§ï¼ŒæœåŠ¡å¯èƒ½å°±è·ªäº†ï¼Œè§£å†³æ–¹æ¡ˆï¼šæœåŠ¡å¯åŠ¨æ—¶å°±è¿›è¡Œæ ¡éªŒæ—¶é—´æ˜¯å¦ä¸å¯åŠ¨çš„æœåŠ¡èŠ‚ç‚¹ä¸€è‡´ï¼Œä¾èµ–äºzkæˆ–è€…etcdæ¥è®°å½•ç›‘æ§å„ä¸ªgenId serviceæœåŠ¡èŠ‚ç‚¹çš„æ—¶é—´ä¿¡æ¯ï¼ŒéªŒè¯ç›¸åŒåˆ™okï¼Œå¦åˆ™å¯åŠ¨å¤±è´¥ï¼ŒæŠ¥è­¦ã€‚åº”ç”¨åœºæ™¯feedæµ&lt;/li&gt;
&lt;li&gt;ç¨³å®šä¸Šmysqlç”Ÿæˆidæ–¹æ¡ˆæ¯”è¾ƒå¥½ï¼Œå…¨å±€å”¯ä¸€ï¼Œå•ä¸ªmysqlå®ä¾‹å¯ä»¥ä¿è¯å•è°ƒé€’å¢ï¼Œæ‰©å®¹å¤šå®ä¾‹å˜æˆè¶‹åŠ¿é€’å¢(proxy wrrè´Ÿè½½å‡è¡¡w=1)ï¼Œæ€§èƒ½å’Œä¸»ä»åŒæ­¥å»¶è¿Ÿå¯¼è‡´idé‡å¤é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯ä»¥é€šè¿‡å†…å­˜ä¸­çš„IDèŒƒå›´æ®µsegmentæ¥è®¡ç®—ç”Ÿæˆè‡ªå¢åºåˆ—idè§£å†³ã€‚åº”ç”¨åœºæ™¯è®¢å•å·ï¼Œæ¶ˆæ¯id&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒé˜…è¯»&#34;&gt;å‚è€ƒé˜…è¯»&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s/F7WTNeC3OUr76sZARtqRjw&#34;&gt;åˆ†å¸ƒå¼æ¶æ„ç³»ç»Ÿç”Ÿæˆå…¨å±€å”¯ä¸€åºåˆ—å·çš„ä¸€ä¸ªæ€è·¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tech.meituan.com/MT_Leaf.html&#34;&gt;ç¾å›¢ç‚¹è¯„idç”Ÿæˆå™¨ç³»ç»Ÿ-Leaf&lt;/a&gt;  (HAï¼Œæ€§èƒ½ï¼Œä¾¿äºæ‰©å®¹,é€šè¿‡ç®¡ç†å…ƒæ•°æ®(tag,max_id,step,desc,create_time,update_time)ï¼Œå¯¹ä¸šåŠ¡tagè¿›è¡Œåˆ†åº“æ‰©å®¹ï¼›é€šè¿‡zkæ¥åŒæ­¥æ¯ä¸ªå¯åŠ¨çš„LeafèŠ‚ç‚¹æ—¶é—´ï¼Œæ–°çš„æœåŠ¡å¯åŠ¨æ˜¯é€šè¿‡æ—¶é—´æ ¡éªŒæœºåˆ¶æ¥è§„é¿æ—¶é—´æˆ³ä¸åŒæ­¥ï¼Œå›æ‹¨é—®é¢˜ä¸Šçš„ç›‘æ§)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://yuerblog.cc/2017/11/21/golang-id-alloc/&#34;&gt;golangåˆ†å¸ƒå¼idç”ŸæˆæœåŠ¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://thesecretlivesofdata.com/raft/&#34;&gt;raft&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æ¶ˆæ¯é˜Ÿåˆ—</title>
      <link>https://weedge.github.io/todo/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</link>
      <pubDate>Sun, 12 Nov 2017 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/todo/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</guid>
      
        <description>&lt;h2 id=&#34;æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»what&#34;&gt;æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»what&lt;/h2&gt;
&lt;h3 id=&#34;åè®®&#34;&gt;åè®®ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MQTT&lt;/strong&gt;(Message Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼ŒåŸºäºäºŒè¿›åˆ¶æ¶ˆæ¯çš„å‘å¸ƒ/è®¢é˜…ç¼–ç¨‹æ¨¡å¼çš„æ¶ˆæ¯åè®®):&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://docs.emqtt.cn/zh_CN/latest/mqtt.html&#34;&gt;http://docs.emqtt.cn/zh_CN/latest/mqtt.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/20888181&#34;&gt;https://zhuanlan.zhihu.com/p/20888181&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•çš„åè®®:&lt;a href=&#34;http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html&#34;&gt;http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºè§„èŒƒåè®®å¾ˆç®€å•ï¼Œéå¸¸é€‚åˆéœ€è¦ä½åŠŸè€—å’Œç½‘ç»œå¸¦å®½æœ‰é™çš„IoTåœºæ™¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;AMQP&lt;/strong&gt;(Advanced Message Queuing Protocol,ä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€å‘æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡)ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;XMPP&lt;/strong&gt;(å¯æ‰©å±•æ¶ˆæ¯å¤„ç†ç°åœºåè®®ï¼ŒExtensible Messaging and Presence Protocolï¼‰æ˜¯åŸºäºå¯æ‰©å±•æ ‡è®°è¯­è¨€çš„åè®®ï¼Œå¤šç”¨äºå³æ—¶æ¶ˆæ¯)ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ¶ˆæ¯é˜Ÿåˆ—åŸç†why&#34;&gt;&lt;strong&gt;æ¶ˆæ¯&lt;/strong&gt;é˜Ÿåˆ—åŸç†why&lt;/h2&gt;
&lt;h2 id=&#34;æ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨åœºæ™¯where&#34;&gt;æ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨åœºæ™¯where&lt;/h2&gt;
&lt;h2 id=&#34;å¦‚ä½•è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—how&#34;&gt;å¦‚ä½•è®¾è®¡æ¶ˆæ¯é˜Ÿåˆ—how&lt;/h2&gt;
&lt;h2 id=&#34;å¼€æºæ¶ˆæ¯é˜Ÿåˆ—&#34;&gt;å¼€æºæ¶ˆæ¯é˜Ÿåˆ—&lt;/h2&gt;
&lt;h3 id=&#34;kafka&#34;&gt;kafka&lt;/h3&gt;
&lt;h3 id=&#34;nsq&#34;&gt;NSQ&lt;/h3&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
</description>
      
    </item>
    
    <item>
      <title>golangå­¦ä¹ ç¬”è®°</title>
      <link>https://weedge.github.io/post/golang/</link>
      <pubDate>Wed, 01 Nov 2017 01:16:30 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/golang/</guid>
      
        <description>&lt;p&gt;åˆšå¼€å§‹æ¥è§¦golangçš„æ—¶å€™æ˜¯åœ¨å¤§å­¦æ—¶å€™ï¼Œå½“æ—¶å¤§æ¦‚æ˜¯2010å¹´å·¦å³ï¼Œå¯¹è¿™é—¨æ–°è¯­è¨€æ¯”è¾ƒå¥½å¥‡ï¼Œä½†æ˜¯æ²¡æœ‰æ·±å…¥å»äº†è§£ï¼Œåªæ˜¯é“å¬é€”è¯´è¿™é—¨è¯­è¨€åœ¨å¹¶å‘å¤„ç†ä¸Šå¾ˆæ–¹ä¾¿ï¼Œå¯¹äºåç¨‹è¿™ä¸ªä¸œè¥¿ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å¬è¯´ã€‚è‡ªä»å·¥ä½œä¹‹åï¼Œå°±ä¸€ç›´æ²¡æœ‰æ¥è§¦è¿‡è¿™é—¨è¯­è¨€,æœ€è¿‘å…¬å¸æƒ³å¾€golangä¸Šè½¬ï¼Œå¼€å‘æ–°çš„é¡¹ç›®å¹³å°ï¼Œæ¯•ç«Ÿgolangè¿è¡Œæ•ˆç‡å’Œå¼€å‘æ•ˆç‡éƒ½è¦æ¯”å…¶ä»–è¯­è¨€è¦ç®€å•æ–¹ä¾¿å¾ˆå¤š(å¬è¯´c++éƒ½å¿«20äº†)ã€‚&lt;/p&gt;
&lt;p&gt;å‰ç¥¥ç‰©ï¼šï¼ˆæ†¨åšå°åœ°é¼  move~move~move~ Bui~~~~    go~go~go~ ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/go-mascot.png&#34; alt=&#34;åœ°é¼ &#34;&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆèŒèŒã®å‹¤åŠ³å°åœ°é¼ ~ï¼‰å¹¶å‘åä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/go-concurrence.png&#34; alt=&#34;å¹¶å‘åä½œ&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;è¯­è¨€&#34;&gt;è¯­è¨€&lt;/h2&gt;
&lt;p&gt;çœ‹ä¸ƒå‘¨ä¸ƒè¯­è¨€ä¸­æåˆ°çš„ï¼Œè¯­è¨€å„æœ‰ç‰¹è‰²ï¼Œç”¨äºä¸åŒçš„å¼€å‘åœºæ™¯ï¼Œå¯¹åº”å›¢é˜Ÿçš„å·¥å…·æ ˆï¼›ç»å¸¸ç”¨è‡ªå·±ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ€ç»´æ¨¡å¼ä¹Ÿä¼šæœ‰æ‰€ä¸åŒï¼›æ€»çš„æ¥è¯´ï¼Œæ”¯æŒKISSåŸåˆ™ï¼Œæ–¹ä¾¿é«˜æ•ˆå¼€å‘/æµ‹è¯•/éƒ¨ç½²/è¿è¡Œï¼Œå¹¶å‘è¿è¡Œè§£å†³é—®é¢˜ï¼Œæµå‡ºæ›´å¤šæ—¶é—´å…³æ³¨ä¸šåŠ¡æˆ–è€…&lt;code&gt;kick ass &amp;amp;&amp;amp; Chew bubblegum (just a joke~)&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;å‘å±•å†å²&#34;&gt;å‘å±•å†å²ï¼š&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å‘æ˜è¿™ä¸ªè¯­è¨€çš„åˆè¡·ï¼Œã€Œä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºæ¯›éœ€è¦è¿™ä¸ªè¯­è¨€ï¼šhttps://www.oschina.net/translate/go-at-google-language-design-in-the-service-of-software-engineering&lt;/li&gt;
&lt;li&gt;åˆå¿ƒï¼šç®€å•,å¼€å‘ç®€æ´ï¼Œæ–¹ä¾¿å¿«é€Ÿå¼€å‘ç¼–è¯‘å‘å¸ƒ(å¼€å‘è¯­è¨€çš„ä½œè€…æ¥è‡ªcå’Œjava, ä½œè€…Rob Pikeå®ç°å¹¶å‘æ€æƒ³,å¸ƒé“è€…ï¼Œä»–ç›¸å…³çš„è§†é¢‘å’Œæ–‡ç« éœ€è¦å¤šçœ‹ï¼Œç²¾é«“å“¦ï¼ŒThis guy is a genius~ )&lt;/li&gt;
&lt;li&gt;æºç ï¼šhttps://github.com/golang/go&lt;/li&gt;
&lt;li&gt;ç‰¹æ®ŠèŠ‚ç‚¹ï¼š2008 6.6 ~1.5ç‰ˆæœ¬å»é™¤äº†cä»£ç å®ç°è‡ªä¸¾(1.5+ç›´æ¥ç”¨goæ¥ç¼–è¯‘å®‰è£…å³å¯)ï¼Œ now 10å¹´+ golang2.0 ç‰ˆ  &lt;a href=&#34;https://github.com/golang/go/wiki/Go2&#34;&gt;https://github.com/golang/go/wiki/Go2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Hello,Gopherï¼ˆgolangä½œè€…ä¹‹ä¸€Rob Pike è®²çš„golangå‘å±•å²ï¼ŒåŠä¼—å®¶è¯­è¨€ä¹‹æ‰€é•¿ï¼Œå‘æ˜è¿™ä¸ªè¯­è¨€çš„åˆè¡·ï¼‰:https://www.youtube.com/watch?v=VoS7DsT1rdM&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd &lt;a href=&#34;https://talks.golang.org/2014/hellogophers.slide##12&#34;&gt;slide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Go Concurrency Patterns(ä¸€äº›å¹¶å‘æ¨¡å¼case, goroutineé€šè¿‡channelç»„åˆä¼ é€’å…±äº«æ•°æ®, no race like DAG): &lt;a href=&#34;https://www.youtube.com/watch?v=f6kdp27TYZs&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd&#34;&gt;https://www.youtube.com/watch?v=f6kdp27TYZs&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd&lt;/a&gt;  &lt;a href=&#34;https://talks.golang.org/2012/concurrency.slide&#34;&gt;slide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Concurrency Is Not Parallelism: &lt;a href=&#34;https://blog.golang.org/concurrency-is-not-parallelism&#34;&gt;https://blog.golang.org/concurrency-is-not-parallelism&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Simplicity is Complicated: &lt;a href=&#34;https://www.youtube.com/watch?v=rFejpH_tAHM&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd&#34;&gt;https://www.youtube.com/watch?v=rFejpH_tAHM&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd&lt;/a&gt; &lt;a href=&#34;https://talks.golang.org/2015/simplicity-is-complicated.slide#1&#34;&gt;slide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The Design of the Go Assemblerï¼šhttps://www.youtube.com/watch?v=KINIAgRpkDA&amp;amp;list=PL3NQHgGj2vtsJkK6ZyTzogNUTqe4nFSWd &lt;a href=&#34;https://talks.golang.org/2016/asm.slide#1&#34;&gt;slide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç‰¹å¾&#34;&gt;ç‰¹å¾ï¼š&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;KISSï¼›ç®€å•æœ´å® ï¼ˆåšå·¥ç¨‹çš„äººæœ€å–œæ¬¢çš„å°±æ˜¯ç®€å•å®ç”¨çš„ä¸œè¥¿ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;è¿è¡Œå ç”¨èµ„æºä½(å¯è¿è¡Œåœ¨åµŒå…¥å¼å¹³å°linux arm)ï¼Œè·¨å¹³å°&lt;/li&gt;
&lt;li&gt;((å†…å­˜)æ•°æ®ç»“æ„+ç®—æ³•+æŠ½è±¡å®šä¹‰æ¥å£)ï¼›&lt;/li&gt;
&lt;li&gt;è¯­æ³•ç®€å•ï¼Œ25ä¸ªå…³é”®å­—ï¼›&lt;/li&gt;
&lt;li&gt;cè¯­è¨€ç»“æ„ä½“å½¢å¼æ¨¡æ‹Ÿç»§æ‰¿æ–¹æ³•é‡å†™æœºåˆ¶ï¼›&lt;/li&gt;
&lt;li&gt;åŸºç¡€æ•°æ®ç»“æ„ç±»å‹ï¼šbyte,string, array; slice, map,chanel å¼•ç”¨ç±»å‹ï¼›(å…¶ä»–æ•°æ®ç»“æ„heap(ä¼˜å…ˆé˜Ÿåˆ—),list,ring(circular list)è¿™äº›åœ¨å®˜æ–¹æä¾›çš„å…¬å…±åº“ä¸­)&lt;/li&gt;
&lt;li&gt;å¼ºç±»å‹è¯­è¨€ï¼Œinterface{} è¡¨ç¤ºé€šç”¨ç±»å‹(ç›¸å½“äºstlä¸­çš„æ¨¡æ¿)ï¼›&lt;/li&gt;
&lt;li&gt;å¼‚å¸¸å¤„ç†: defer, panic, recover æŠ›å‡ºä¸€ä¸ªpanicçš„å¼‚å¸¸ï¼ˆå¼‚å¸¸æŒ‡çš„æ˜¯æ„æ–™ä¹‹å¤–çš„æƒ…å†µï¼Œæ¯”å¦‚å¼•ç”¨äº†ç©ºæŒ‡é’ˆï¼Œä¸‹æ ‡è¶Šç•Œï¼Œé™¤æ•°ä¸º0ï¼Œä¸åº”è¯¥å‡ºç°çš„åˆ†æ”¯ï¼Œæ¯”å¦‚defaultï¼‰ï¼Œç„¶ååœ¨deferä¸­é€šè¿‡recoveræ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œæœ€åæ­£å¸¸å¤„ç†ï¼›æ³¨æ„å¦‚æœæ²¡æœ‰recoverå»æ•è·å¼‚å¸¸ï¼Œç¨‹åºå°±ä¼šé€€å‡ºï¼›&lt;/li&gt;
&lt;li&gt;é”™è¯¯æœºåˆ¶: errorï¼Œé”™è¯¯æŒ‡çš„æ˜¯æ„æ–™ä¹‹ä¸­çš„æƒ…å†µï¼Œæ¯”å¦‚æ–‡ä»¶å¯èƒ½ä¼šæ‰“å¼€å¤±è´¥ï¼Œç½‘ç»œè¿æ¥å¯èƒ½æ–­å¼€å¯¼è‡´è¿æ¥å¤±è´¥ç­‰ç­‰ï¼Œé”™è¯¯æ˜¯ä¸šåŠ¡è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå¼‚å¸¸ä¸æ˜¯ (ä¸šåŠ¡éœ€å®šä¹‰å¸¸è§çš„é”™è¯¯ç æ ‡è¯†å¯¹åº”é”™è¯¯ä¿¡æ¯)&lt;/li&gt;
&lt;li&gt;å˜é‡å¯¹è±¡å†…å­˜åˆ†é…é€šè¿‡tcmallocæ¥ç”³è¯·ä¸€å—span, åˆ†æˆå¤šä¸ªpageæä¾›ä½¿ç”¨ï¼Œå……åˆ†åˆ©ç”¨å†…å­˜ç©ºé—´ï¼Œé€šè¿‡gcå›æ”¶runtimeå¯¹è±¡(éšç€ç‰ˆæœ¬è¿­ä»£ï¼Œå¯¹gcçš„æ•ˆç‡é€æ¸æé«˜ï¼Œæœ‰ä¸“é—¨çš„runtimeå›¢é˜Ÿæ”¯æŒ)&lt;/li&gt;
&lt;li&gt;å¹¶å‘ç¨‹åºé€šè¿‡channelå…±äº«å†…å­˜(share memory by communicating)ï¼›&lt;/li&gt;
&lt;li&gt;é€‚åˆwebåç«¯å¼€å‘(å®˜æ–¹golang.orgå·²æä¾›çš„åŸºç¡€åº“ &lt;a href=&#34;https://golang.org/pkg/&#34;&gt;https://golang.org/pkg/&lt;/a&gt; ï¼Œnet/http(è¯·æ±‚ï¼Œå“åº”ï¼Œclientï¼Œserver), http/template, æ•°æ®åº“å®¢æˆ·ç«¯é©±åŠ¨æ¥å£å®šä¹‰database/sql(ä¸‰æ–¹æ ¹æ®æ¥å£æ ‡å‡†å¯ä»¥è‡ªå®šä¹‰å®ç°ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å•ç‹¬å®šä¹‰ä¸€å¥—æ ‡å‡†å®ç°)ï¼Œæ•°æ®åŠ å¯†cryptoï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;é€šè¿‡goroutine(åç¨‹ï¼Œç”¨æˆ·çº§åˆ«è½»é‡çº§çº¿ç¨‹)æ”¯æŒå¹¶å‘ï¼Œ åç¨‹é€šè¿‡channelé€šä¿¡( &amp;lt;-chan interface{} æ¥æ”¶chanï¼›chan&amp;lt;-interface{} å‘é€chanï¼›åŒæ­¥é€šè¿‡syncæœºåˆ¶(lock(é”æ¥å£) mutex(æŸä¸ªgoroutineåŠ äº’æ–¥é”) rwlock(å¯¹è¯»å†™æ“ä½œåŠ é”) WaitGroup(pvæ“ä½œ,å¯¹goroutineç»„) ï¼ŒCond(æ¡ä»¶å˜é‡ï¼Œä¿¡å·é‡))ï¼›&lt;/li&gt;
&lt;li&gt;Golangå®ç°äº† CSP(Communicating Sequential Process &lt;a href=&#34;http://www.usingcsp.com/cspbook.pdf&#34;&gt;http://www.usingcsp.com/cspbook.pdf&lt;/a&gt; )å¹¶å‘æ¨¡å‹åšä¸ºå¹¶å‘åŸºç¡€ï¼Œåº•å±‚ä½¿ç”¨goroutineåšä¸ºå¹¶å‘å®ä½“ï¼Œgoroutineéå¸¸è½»é‡çº§å¯ä»¥åˆ›å»ºå‡ åä¸‡ä¸ªå®ä½“ï¼›å®ä½“é—´é€šè¿‡ channel ç»§ç»­åŒ¿åæ¶ˆæ¯ä¼ é€’ä½¿ä¹‹è§£è€¦ï¼Œåœ¨è¯­è¨€å±‚é¢å®ç°äº†è‡ªåŠ¨è°ƒåº¦ï¼Œè¿™æ ·å±è”½äº†å¾ˆå¤šå†…éƒ¨ç»†èŠ‚ï¼Œå¯¹å¤–æä¾›ç®€å•çš„è¯­æ³•å…³é”®å­—(go,select,channel)ï¼Œå¤§å¤§ç®€åŒ–äº†å¹¶å‘ç¼–ç¨‹çš„æ€ç»´è½¬æ¢å’Œç®¡ç†çº¿ç¨‹çš„å¤æ‚æ€§ï¼›&lt;/li&gt;
&lt;li&gt;SO OPENï¼Œimport ä¸‰æ–¹åº“æº(å¤§éƒ¨åˆ†gitçš„æ–¹å¼æ¥è‡ªgithub/gitlibï¼Œè¿˜æ”¯æŒhg)ï¼Œæºç ç›´æ¥å¯ä»¥ä¿®æ”¹ç¼–è¯‘(å–ä¹‹äºæºç”¨ä¹‹æº)ï¼›&lt;/li&gt;
&lt;li&gt;Go å‘½ä»¤å·¥å…·æ–¹ä¾¿å¼€å‘è‡ªæµ‹è°ƒè¯•ï¼š &lt;a href=&#34;https://golang.org/cmd/go/&#34;&gt;https://golang.org/cmd/go/&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡go testæ¥å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•(cpu,pprof)ï¼Œç›´æ¥å¯ä»¥æµ‹è¯•ç”¨ä¾‹å…ˆè¡Œï¼Œ&lt;/li&gt;
&lt;li&gt;go tool,  pprof (è¿›è¡Œæ€§èƒ½åˆ†æ &lt;a href=&#34;http://cizixs.com/2017/09/11/profiling-golang-program&#34;&gt;http://cizixs.com/2017/09/11/profiling-golang-program&lt;/a&gt; ï¼‰objdump(dumpå‡ºæ±‡ç¼–ä»£ç ï¼‰&lt;/li&gt;
&lt;li&gt;go get -u ~=  download to go build and install , go run å•ç‹¬è¿è¡Œ&lt;/li&gt;
&lt;li&gt;go fmt ä»£ç æ ¼å¼åŒ–ï¼Œç»Ÿä¸€ç¼–ç é£æ ¼ï¼Œæ–¹ä¾¿ååŒç¼–ç¨‹&lt;/li&gt;
&lt;li&gt;go mod: &lt;a href=&#34;https://github.com/golang/go/wiki/Modules&#34;&gt;https://github.com/golang/go/wiki/Modules&lt;/a&gt; 1.11æ–°å¼•å…¥çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿packageä¾èµ–ç®¡ç†ï¼Œç±»ä¼¼nodejsä¸­çš„npm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Go 2.0æ­£å¾…å‘å¸ƒï¼Œ10å¹´+å‘å±•ï¼Œä¼šæœ‰ä¸€äº›ä¼˜åŒ–å’Œæ–°ç‰¹æ€§  &lt;a href=&#34;https://www.youtube.com/watch?v=RIvL2ONhFBI&#34;&gt;https://www.youtube.com/watch?v=RIvL2ONhFBI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Moreâ€¦..&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å·¥ä½œä¸Šä½¿ç”¨è¯­è¨€è¿›åŒ–&#34;&gt;å·¥ä½œä¸Šä½¿ç”¨è¯­è¨€è¿›åŒ–&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/coder.jpg&#34; alt=&#34;coder&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;C/C++ -&amp;gt; *.so -&amp;gt; php/python  |   java -&amp;gt; *.jar  ==&amp;raquo;  go -&amp;gt; *.a -import-&amp;gt; pkg -compile-&amp;gt;  binary program&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¼–å†™è¿è¡Œï¼šå¤æ‚  -&amp;gt;  ç®€å•&lt;/p&gt;
&lt;p&gt;Go ç›¸å½“äºå…¼é¡¾äº†cçš„æ‰§è¡Œæ•ˆç‡ï¼Œpythonçš„å¼€å‘æ•ˆç‡ï¼Œæ‹©ä¸­æ–¹æ¡ˆï¼Œé€‚åˆæœåŠ¡ç«¯å¼€å‘(ä¸šåŠ¡å¼€å‘ï¼ŒåŸºç¡€ç»„ä»¶å¼€å‘(ç½‘å…³ï¼Œdbï¼ŒAI)ï¼Œè‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å¼€å‘devops);
å¦‚æœç”¨goæ¥è°ƒç”¨.soåŠ¨æ€é“¾æ¥åº“ï¼Œéœ€è¦ç”¨cgoæœºåˆ¶&lt;/p&gt;
&lt;p&gt;è¯­æ³•å¯¹æ¯”å‚è€ƒï¼šhttp://hyperpolyglot.org/c&lt;/p&gt;
&lt;h2 id=&#34;å­¦ä¹ &#34;&gt;å­¦ä¹ &lt;/h2&gt;
&lt;ol start=&#34;0&#34;&gt;
&lt;li&gt;å¼€å§‹å…¥é—¨ï¼šhttps://golang.org/doc/code.html&lt;/li&gt;
&lt;li&gt;golangçš„åŸºæœ¬è¯­æ³•çŸ¥è¯†ï¼Œå¯ä»¥é€šè¿‡gotouræ¥è¿›è¡Œç®€å•çš„å­¦ä¹ å…¥é—¨ï¼ŒgodocæŸ¥çœ‹å…·ä½“åŸºç¡€æ–‡æ¡£å’Œgetåˆ°æœ¬åœ°çš„ä¸‰æ–¹åº“æ¥å£æ–‡æ¡£ï¼Œ
Gotourç®€å•å…¥é—¨ â€”â€”&amp;gt; &lt;a href=&#34;https://github.com/qyuhen/book/blob/master/Go%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20%E7%AC%AC%E5%9B%9B%E7%89%88.pdf&#34;&gt;è¯­æ³•å¿«é€Ÿå…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç»ƒä¹ ä¹ é¢˜ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://goquiz.github.io/&#34;&gt;Goè¯­è¨€ç»å…¸ç¬”è¯•é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gobyexample.com&#34;&gt;Goå®ä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;æœ€ä½³å®è·µï¼š(è¿™ä¸ªä¼šæ ¹æ®å®è·µåœºæ™¯é€æ¸å®Œå–„ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå½¢æˆä¸€ä¸ªæ ‡å‡†è§„èŒƒ)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://talks.golang.org/2013/bestpractices.slide&#34;&gt;12æ¡æœ€ä½³å®è·µ&lt;/a&gt; &lt;a href=&#34;http://maiyang.me/2017/10/21/twelve-best-practices-in-golang/&#34;&gt;ä¸­æ–‡è§£é‡Š&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;é¢å‘å¯¹è±¡è®¾è®¡SOLIDï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.gokit.info/post/go-solid-design/&#34;&gt;SOLID&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;ä¸šåŠ¡å¸¸ç”¨ä¾èµ–é˜¶çº§å¼€å‘ï¼š(æŒæ¡ä¸€äº›ä¸‰æ–¹åº“ï¼Œæ–¹ä¾¿å¿«é€Ÿé›†æˆå¼€å‘)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Webå¼€å‘æ¡†æ¶ï¼š
&lt;ul&gt;
&lt;li&gt;beego &lt;a href=&#34;https://github.com/astaxie/beego&#34;&gt;https://github.com/astaxie/beego&lt;/a&gt;  æ”¯æŒmvc, orm; é€‚ç”¨äºcmsï¼Œmisç®¡ç†åå°å¼€å§‹å¼€å‘ ï¼ˆé‡é‡ç‚¹ï¼Œå¼€å‘æ¡†æ¶å·²ç»æ­å¥½ï¼ŒåŸºç¡€webå¼€å‘ç»„ä»¶å·²æœ‰ï¼ŒRBACè§„èŒƒåå°æƒé™ï¼‰
&lt;ul&gt;
&lt;li&gt;gin &lt;a href=&#34;https://github.com/gin-gonic/gin&#34;&gt;https://github.com/gin-gonic/gin&lt;/a&gt; åˆ©ç”¨httprouterå®ç°é«˜æ€§èƒ½è·¯ç”± (è½»é‡ç‚¹ï¼Œé€‚åˆdiy)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“ ï¼ˆclient driverï¼‰
&lt;ul&gt;
&lt;li&gt;msyql: &lt;a href=&#34;https://github.com/go-sql-driver/mysql&#34;&gt;https://github.com/go-sql-driver/mysql&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Redis: &lt;a href=&#34;https://github.com/garyburd/redigo&#34;&gt;https://github.com/garyburd/redigo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Mongo: &lt;a href=&#34;https://github.com/go-mgo/mgo&#34;&gt;https://github.com/go-mgo/mgo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ZK client: &lt;a href=&#34;https://github.com/samuel/go-zookeeper/zk&#34;&gt;https://github.com/samuel/go-zookeeper/zk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Grpc: &lt;a href=&#34;https://github.com/grpc/grpc-go&#34;&gt;https://github.com/grpc/grpc-go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Log: &lt;a href=&#34;https://github.com/sirupsen/logrus&#34;&gt;https://github.com/sirupsen/logrus&lt;/a&gt; (ä»¥hookæœºåˆ¶æ·»åŠ è‡ªå®šçš„æ—¥å¿—ï¼Œlograte:https://github.com/sirupsen/logrus##rotationï¼Œæˆ–è€…https://github.com/natefinch/lumberjack)&lt;/li&gt;
&lt;li&gt;é˜Ÿåˆ—: &lt;a href=&#34;https://github.com/nsqio/nsq&#34;&gt;https://github.com/nsqio/nsq&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;è®¢é˜…èµ„æºblog:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.golang.org&#34;&gt;https://blog.golang.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.goinggo.net&#34;&gt;https://www.goinggo.net&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gocn.io/&#34;&gt;https://gocn.io/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;å®è·µè¸©çš„å‘ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/29545675&#34;&gt;https://zhuanlan.zhihu.com/p/29545675&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/31395716&#34;&gt;https://zhuanlan.zhihu.com/p/31395716&lt;/a&gt; (channel,å¼•å‘çš„æ­»é”ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;åº”ç”¨åœºæ™¯ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/26777189&#34;&gt;æ–°é—»å®æ—¶æ¨é€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;More:  DIY ï¼ˆu can do itï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;å¥½çš„å¼€æºé¡¹ç›®ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/hackstoic/golang-open-source-projects&#34;&gt;golang-open-source-projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/avelino/awesome-go&#34;&gt;awesome-go&lt;/a&gt; (full-stack dev for venture company )&lt;/li&gt;
&lt;li&gt;Web serveræœåŠ¡ï¼š
&lt;ul&gt;
&lt;li&gt;Caddyï¼šç±»ä¼¼nginx,apache,middleware chain(è´£ä»»é“¾æ¨¡å¼) ç®¡ç†æ–¹å¼ï¼Œç‹¬ç«‹çš„mwä¹Ÿå¯æ‹†åˆ†å•ç‹¬è¿è¡Œï¼Œæ¯”å¦‚è´Ÿè½½å‡è¡¡æ¨¡å—ï¼Œåå‘ä»£ç†ï¼Œfastcgiä»£ç† &lt;a href=&#34;https://github.com/mholt/caddy&#34;&gt;https://github.com/mholt/caddy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç½‘å…³ï¼š
&lt;ul&gt;
&lt;li&gt;krakend: &lt;a href=&#34;https://github.com/devopsfaith/krakend&#34;&gt;https://github.com/devopsfaith/krakend&lt;/a&gt;  ï¼ˆé«˜æ€§èƒ½ï¼Œç›¸æ¯”kong&amp;hellip;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡ï¼š
&lt;ul&gt;
&lt;li&gt;go-micro (&lt;a href=&#34;https://github.com/micro/go-micro&#34;&gt;https://github.com/micro/go-micro&lt;/a&gt;  +  plugins: &lt;a href=&#34;https://github.com/micro/go-plugins&#34;&gt;https://github.com/micro/go-plugins&lt;/a&gt;  )
&lt;ul&gt;
&lt;li&gt;Go-kit (&lt;a href=&#34;https://github.com/go-kit/kit&#34;&gt;https://github.com/go-kit/kit&lt;/a&gt;  very nice micro-service lib framework) diy å€Ÿé‰´ ç›¸å…³ä»‹ç»ï¼šhttps://www.youtube.com/watch?v=NX0sHF8ZZgw&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡å‘ç°ï¼š
&lt;ul&gt;
&lt;li&gt;etcd: &lt;a href=&#34;https://github.com/coreos/etcd&#34;&gt;https://github.com/coreos/etcd&lt;/a&gt; (åŠŸèƒ½ä»‹ç»: &lt;a href=&#34;http://www.infoq.com/cn/articles/etcd-interpretation-application-scenario-implement-principle&#34;&gt;http://www.infoq.com/cn/articles/etcd-interpretation-application-scenario-implement-principle&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Consul: &lt;a href=&#34;https://github.com/hashicorp/consul&#34;&gt;https://github.com/hashicorp/consul&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Rpcï¼š
&lt;ul&gt;
&lt;li&gt;grpc: &lt;a href=&#34;https://github.com/grpc/grpc-go&#34;&gt;https://github.com/grpc/grpc-go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;thrift: &lt;a href=&#34;https://github.com/apache/thrift/tree/master/lib/go&#34;&gt;https://github.com/apache/thrift/tree/master/lib/go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Webå¼€å‘æ¡†æ¶ï¼š
&lt;ul&gt;
&lt;li&gt;beego(æ”¯æŒmvcæ¨¡å¼å¼€å‘,https://github.com/astaxie/beego)ï¼Œ&lt;/li&gt;
&lt;li&gt;gin(é«˜æ€§èƒ½è·¯ç”±è¯·æ±‚å¤„ç†,https://github.com/gin-gonic/gin )&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“æœåŠ¡ï¼š
&lt;ul&gt;
&lt;li&gt;Tidb (NewSQL æ•°æ®åº“ï¼Œæ°´å¹³æ‰©å±•ï¼Œå¼ºä¸€è‡´ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¤šç§æ•°æ®å¼•æ“é€‰æ‹©ï¼Œmysqlåè®®é€šä¿¡ &lt;a href=&#34;https://github.com/pingcap/tidb&#34;&gt;https://github.com/pingcap/tidb&lt;/a&gt; å›½å†…å…¬å¸ç”¨çš„æ¯”è¾ƒå¤šï¼‰&lt;/li&gt;
&lt;li&gt;Cockroachdb  (NewSQL æ•°æ®åº“ï¼Œæœ‰ç™¾åº¦çš„åŒå­¦æäº¤ç»´æŠ¤ &lt;a href=&#34;https://github.com/cockroachdb/cockroach&#34;&gt;https://github.com/cockroachdb/cockroach&lt;/a&gt; ï¼‰&lt;/li&gt;
&lt;li&gt;Influxdb (æ—¶åºæ•°æ®åº“ï¼Œåº”ç”¨äºç›‘æ§æ—¥å¿—æ•°æ®å­˜å‚¨ï¼Œæä¾›å®æ—¶æ•°æ®å±•ç°ï¼Œhttps://github.com/influxdata/influxdbï¼‰&lt;/li&gt;
&lt;li&gt;Bboltdb (æœ¬åœ°åµŒå…¥å¼æ•°æ®åº“ , LMDBçš„goå®ç°ç‰ˆæœ¬,https://github.com/coreos/bbolt)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¨é€ï¼š
&lt;ul&gt;
&lt;li&gt;Gorush: &lt;a href=&#34;https://github.com/appleboy/gorush&#34;&gt;https://github.com/appleboy/gorush&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;çˆ¬è™«ï¼š
&lt;ul&gt;
&lt;li&gt;Gocolly: &lt;a href=&#34;https://github.com/gocolly/colly&#34;&gt;https://github.com/gocolly/colly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Gocrawl: &lt;a href=&#34;https://github.com/PuerkitoBio/gocrawl&#34;&gt;https://github.com/PuerkitoBio/gocrawl&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶ï¼š
&lt;ul&gt;
&lt;li&gt;Upspin: &lt;a href=&#34;https://github.com/upspin/upspin&#34;&gt;https://github.com/upspin/upspin&lt;/a&gt; (Rob Pike ä¸»å¯¼çš„ä¸€ä¸ªå®éªŒé¡¹ç›®ï¼Œhttps://www.youtube.com/watch?v=ENLWEfi0Tkg)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é“¾è·¯è·Ÿè¸ªï¼š
&lt;ul&gt;
&lt;li&gt;Opentracing: &lt;a href=&#34;https://github.com/opentracing/opentracing-go&#34;&gt;https://github.com/opentracing/opentracing-go&lt;/a&gt;  ç»“åˆzipkin&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®æ—¶æ¶ˆæ¯é˜Ÿåˆ—å¹³å°ï¼š
&lt;ul&gt;
&lt;li&gt;NSQ: &lt;a href=&#34;https://github.com/nsqio/nsq&#34;&gt;https://github.com/nsqio/nsq&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç›‘æ§:
&lt;ul&gt;
&lt;li&gt;grafanaï¼šhttps://github.com/grafana/grafana&lt;/li&gt;
&lt;li&gt;prometheus: &lt;a href=&#34;https://github.com/prometheus/prometheus&#34;&gt;https://github.com/prometheus/prometheus&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®¹å™¨ç®¡ç†ï¼š
&lt;ul&gt;
&lt;li&gt;Kubernetes(K8S): &lt;a href=&#34;https://github.com/kubernetes/kubernetes&#34;&gt;https://github.com/kubernetes/kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Kubernetes Handbook: &lt;a href=&#34;https://jimmysong.io/kubernetes-handbook/&#34;&gt;https://jimmysong.io/kubernetes-handbook/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä»£ç ä»“åº“æœåŠ¡ï¼š
&lt;ul&gt;
&lt;li&gt;gogs (è½»é‡çº§çš„ä»£ç å·¥å…·ï¼Œå¯ä»¥è¿è¡Œåœ¨piä¸Š, ç•Œé¢å’Œgithubç›¸ä¼¼, &lt;a href=&#34;https://github.com/gogits/gogs&#34;&gt;https://github.com/gogits/gogs&lt;/a&gt; ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;CI/CD(Continuous Delivery):
&lt;ul&gt;
&lt;li&gt;Drone: &lt;a href=&#34;https://github.com/drone/drone&#34;&gt;https://github.com/drone/drone&lt;/a&gt; ï¼ˆå¯é…å¥—è‡ªç ”ä¸Šçº¿è¿ç»´å¹³å°ï¼‰&lt;/li&gt;
&lt;li&gt;jenkins-x: &lt;a href=&#34;https://github.com/jenkins-x/jx&#34;&gt;https://github.com/jenkins-x/jx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å·¥å…·ï¼š
&lt;ul&gt;
&lt;li&gt;Gotty: &lt;a href=&#34;https://github.com/yudai/gotty&#34;&gt;https://github.com/yudai/gotty&lt;/a&gt; ï¼ˆwebshell)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™æ€ç½‘é¡µç”Ÿæˆå™¨ï¼š
&lt;ul&gt;
&lt;li&gt;hugo: &lt;a href=&#34;https://github.com/gohugoio/hugo&#34;&gt;https://github.com/gohugoio/hugo&lt;/a&gt; (å¯ä»¥ç”¨æ¥å†™ä¸ªäººæŠ€æœ¯åšå®¢)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ•°æ®ç§‘å­¦(cheat sheet)ï¼š &lt;a href=&#34;https://www.cheatography.com/chewxy/cheat-sheets/data-science-in-go-a/pdf/&#34;&gt;https://www.cheatography.com/chewxy/cheat-sheets/data-science-in-go-a/pdf/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ·±å…¥ç†è§£&#34;&gt;æ·±å…¥ç†è§£&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/weedge/weedge.github.io/master/image/goroutine.jpg&#34; alt=&#34;goroutineå®ç°æœºåˆ¶&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;goroutineå®ç°æœºåˆ¶ï¼šhttps://www.zhihu.com/question/20862617 ï¼ˆM:å†…æ ¸OSçº¿ç¨‹ï¼›G:goroutineç”¨æˆ·æ€è½»é‡çº§çº¿ç¨‹ï¼Œè‡ªå·±çš„æ ˆï¼Œæ­£åœ¨ç­‰å¾…çš„channelç­‰ï¼›P: è°ƒåº¦çš„ä¸Šä¸‹æ–‡ï¼Œæ˜¯è°ƒåº¦åè°ƒçš„å¤„ç†å™¨ï¼ŒPçš„æ•°é‡ä»£è¡¨äº†çœŸæ­£çš„å¹¶å‘åº¦)
ï¼ˆtipsï¼šç›¸å¯¹äºjavaä¸­å¹¶å‘åº“å®ç°æ˜¯ä¸æ˜¯è¦ç®€æ´é«˜æ•ˆäº›å‘¢ï¼Œhttps://golang.org/doc/faq##goroutines  è¿™ä¸ªè§£é‡Šäº†golangä¸ºä»€ä¹ˆç”¨åæˆä»£æ›¿çº¿ç¨‹ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŒæ­¥æœºåˆ¶ï¼šsync lock(é”æ¥å£) mutex(æŸä¸ªgoroutineåŠ äº’æ–¥é”) rwlock(å¯¹è¯»å†™æ“ä½œåŠ é”) WaitGroup(pvæ“ä½œ,å¯¹goroutineç»„) ï¼ŒCond(æ¡ä»¶å˜é‡ï¼Œä¿¡å·é‡) ç”¨æ³•å‚è€ƒï¼šhttps://deepzz.com/post/golang-sync-package-usage.html  (å…¶å®å°±æ˜¯OSä¸­çš„åŒæ­¥æœºåˆ¶å®ç°)   é”çš„è¯æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè¦ä¹ˆé”ä½ï¼Œè¦ä¹ˆä¸åšï¼Œé€šè¿‡atomicæ“ä½œåº•å±‚çš„cpuæŒ‡ä»¤(CHANGE*, SWAP* &amp;hellip;.etcæŒ‡ä»¤æ ¹æ®ä¸åŒçš„cpu/gpuå‚å•†å®šä¹‰ï¼Œintel/amd)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†…å­˜ç®¡ç†ï¼š &lt;a href=&#34;http://legendtkl.com/2017/04/02/golang-alloc/&#34;&gt;http://legendtkl.com/2017/04/02/golang-alloc/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GCæœºåˆ¶ï¼šhttp://legendtkl.com/2017/04/28/golang-gc/&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ·±å…¥äº†è§£golangçš„æ‰§è¡ŒåŸç†ï¼Œhttps://github.com/qyuhen/book/blob/master/Go%201.5%20%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90.pdf (åº•å±‚çš„è¿è¡Œæ—¶é€»è¾‘æœ‰ç‚¹åƒphpçš„æ‰§è¡Œè¿‡ç¨‹, php7åº•å±‚è¿è¡Œç»“æ„ä¹Ÿå€Ÿé‰´äº†golangçš„è®¾è®¡æ€æƒ³ï¼Œæ¯”å¦‚å†…å­˜çš„ç”³è¯·)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;faq&#34;&gt;FAQ:&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://golang.org/doc/faq&#34;&gt;https://golang.org/doc/faq&lt;/a&gt;  ç›¸å½“æœ‰ç”¨å€¼å¾—ä¸€è¯»&lt;/p&gt;
&lt;p&gt;çƒ­æ›´æ–°æ–¹æ¡ˆï¼š &lt;a href=&#34;https://studygolang.com/topics/1194&#34;&gt;https://studygolang.com/topics/1194&lt;/a&gt;  (ç›‘æ§ä¸€ä¸ªå½“å‰ç‰ˆæœ¬æ–‡ä»¶æ˜¯å¦å˜åŠ¨äº†ï¼Œå¦‚æœå˜åŠ¨ç„¶åå°†è€çš„æ‰§è¡Œæ–‡ä»¶è½¯è¿æŒ‡å‘æ–°çš„æ‰§è¡Œæ–‡ä»¶(rm è½¯è¿,ln åˆ›å»ºæ–°çš„è½¯è¿ï¼Œç„¶åé€šè¿‡hupä¿¡å·ä¼˜é›…çš„é‡å¯ç”±endlesså¯åŠ¨çš„æœåŠ¡)&lt;/p&gt;
&lt;h2 id=&#34;å¼€å‘å·¥å…·&#34;&gt;å¼€å‘å·¥å…·&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;vim-go: &lt;a href=&#34;https://github.com/fatih/vim-go&#34;&gt;https://github.com/fatih/vim-go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;vscode-go: &lt;a href=&#34;https://github.com/Microsoft/vscode-go&#34;&gt;https://github.com/Microsoft/vscode-go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;goland: &lt;a href=&#34;https://www.jetbrains.com/go/&#34;&gt;https://www.jetbrains.com/go/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;diy&#34;&gt;DIY&lt;/h2&gt;
&lt;p&gt;(ç†Ÿæ‚‰ä¸‰æ–¹æºç ï¼ŒåŸºç¡€åº“ï¼Œè‡ªè¡ŒdiyæœåŠ¡)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç½‘å…³æœåŠ¡&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç½‘å…³åå°&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; abtest&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; abteståå°&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¾®æœåŠ¡
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; passport&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; activity&lt;/li&gt;
&lt;li&gt;Moreâ€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; èµ„æºç®¡ç†(K8S)&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç›‘æ§&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ci/cdæ„å»ºå‘å¸ƒä¸Šçº¿&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; é˜Ÿåˆ—&lt;/li&gt;
&lt;/ul&gt;</description>
      
    </item>
    
    <item>
      <title>æ›´æ¢åšå®¢</title>
      <link>https://weedge.github.io/post/use-hugo-blog/</link>
      <pubDate>Thu, 12 Oct 2017 10:26:23 +0800</pubDate>
      
      <guid>https://weedge.github.io/post/use-hugo-blog/</guid>
      
        <description>&lt;p&gt;â€ƒâ€ƒåšå®¢æœ‰æ®µæ—¶é—´ä¸€ç›´æ²¡æœ‰è·Ÿæ–°è¿‡äº†ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯å¤ªæ‡’äº†ï¼Œæˆ–è€…æ²¡æœ‰åŠ¨åŠ›å»pushä½ å»å¹²å¥½è¿™ä»¶äº‹æƒ…ï¼›çœ‹ç€ä»¥å‰çš„åšå®¢ï¼Œå¯¥å¯¥æ— å‡ çš„å‡ ç¯‡ï¼Œè´¨é‡ä¹Ÿä¸é«˜ï¼›æ—©ä¸Šä¸Šç­ç»å¸¸çœ‹ä¸€äº›å…¬ä¼—å·æ–‡ç« ï¼Œæœ‰ä¸ªä½œè€…æ¯å¤©åšæŒå†™ä¸€ç¯‡æ–‡ç« ï¼Œéƒ½å·²ç»åšæŒäº†å¤§åŠå¹´äº†ï¼Œä»ç”Ÿæ´»çš„æ€è€ƒè®°å½•ï¼Œåˆ°æŠ€æœ¯çš„ç§¯ç´¯ï¼Œè€Œä¸”è¾“å‡ºçš„æ–‡ç« è´¨é‡ä¸é”™ï¼Œè‡³å°‘è‡ªå·±è¯»äº†ä¹‹åä¼šäº§ç”Ÿä¸€äº›å…±é¸£ï¼Œæˆ–è€…å­¦åˆ°ä¸€äº›çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»å¸¸å¬åˆ°æŠ€æœ¯äººæ€»ç»“çš„è¯ï¼šæŠ€æœ¯æ˜¯ä¸€ä¸ªç§¯ç´¯çš„è¿‡ç¨‹ï¼Œä»åˆ«äººé‚£é‡Œçœ‹åˆ°çš„ï¼Œå’Œè‡ªå·±å»åŠ¨æ‰‹å®ç°çš„æ˜¯ä¸¤å›äº‹ï¼Œåˆ«äººè¶Ÿè¿‡çš„å‘ï¼Œä½ å†é‡æ–°è¸©ä¸€æ¬¡ï¼Œä¹Ÿè®¸ä¼šé‡åˆ°æ–°çš„å‘ï¼Œè¿™äº›è¸©è¿‡ä¹‹åï¼ŒæŠŠè¿™äº›çŸ¥è¯†ç‚¹å’Œæ»¡å‘æ–¹æ¡ˆè®°å½•ä¸‹æ¥ï¼Œæ—¥ç§¯æœˆç´¯ï¼Œæ˜¯å¯¹ä»¥åæ˜¯æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€ƒâ€ƒä»¥å‰çš„åšå®¢æ˜¯ç”¨&lt;a href=&#34;http://octopress.org/docs/&#34;&gt;octopress&lt;/a&gt;æ¥ç”Ÿæˆåšå®¢çš„é™æ€æ–‡ä»¶çš„ï¼Œæœ€è¿‘å‘ç°è¿™ä¸ªæ²¡æœ‰æ›´æ–°äº†; è‡ªå·±åœ¨æƒ³æ˜¯ä¸æ˜¯å¯ä»¥è‡ªå·±æŒ‰ç…§è¿™ä¸ªæ€è·¯ç”Ÿæˆä¸€å¥—ï¼ŒåŠ ä¸Šæœ€è¿‘åœ¨å­¦ä¹ golangï¼›åœ¨ç½‘ä¸Šç´¢æœäº†ç”¨golangç”Ÿæˆåšå®¢çš„å·¥å…·ï¼Œç¡®å®æœ‰ä¸ªä¸é”™çš„å¼€æºå·¥å…·&lt;a href=&#34;https://gohugo.io/&#34;&gt;hugo&lt;/a&gt;ï¼Œä½¿ç”¨åï¼Œå‘ç°è¶…çº§æ–¹ä¾¿ï¼Œç”Ÿæˆåˆ°å‘å¸ƒå°±ä¸¤æ­¥ï¼Œç›¸æ¯”ç¹çæ“ä½œçš„octopress,è¦ç®€å•æ–¹ä¾¿çš„å¤šï¼Œè€Œä¸”ç”Ÿæˆçš„å‰ç«¯æ¨¡æ¿ç”¨çš„æ˜¯&lt;a href=&#34;https://mustache.github.io/&#34;&gt;mustache&lt;/a&gt;ï¼Œæ¨¡æ¿è¯­æ³•åœ¨å‰ç«¯æ¯”è¾ƒå¸¸ç”¨;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;macOSä¸‹å®‰è£…ï¼Œç›´æ¥å¯ä»¥é€šè¿‡brewæ¥å®‰è£…&lt;code&gt;sudo brew install hugo&lt;/code&gt;å°±å¯ä»¥ä½¿ç”¨äº†ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»ºç«‹è‡ªå·±çš„åšå®¢ï¼Œç”¨markdownå†™æ–‡ç« ï¼Œç„¶åæœ¬åœ°æŸ¥çœ‹ï¼Œæ£€æŸ¥okåœ¨å‘å¸ƒåˆ°github pageä¸Šï¼›å…·ä½“æ“ä½œçœ‹&lt;a href=&#34;https://gohugo.io/documentation/&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;å§ï¼Œ è¿™é‡Œå°±ä¸ä»‹ç»äº†å“ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;â€ƒâ€ƒç°åœ¨å°±å¼€å§‹æ–°çš„å†™ä½œè®°å½•æ—…ç¨‹å§!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢(The road ahead will be long, I shall search)&lt;/p&gt;
&lt;/blockquote&gt;</description>
      
    </item>
    
  </channel>
</rss>
